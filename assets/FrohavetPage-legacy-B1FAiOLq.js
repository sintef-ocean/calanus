System.register(["./index-legacy-BJkswuFD.js","./render-legacy-Czul8PfQ.js","./leaflet-legacy-CY6cmsxr.js"],(function(e,t){"use strict";var a,n,l,o,i,r,s,m,d,u,c,p,g,v,h,y,f,b,N,A,S,w,x,I,F,C,D,O,T,_,L,M,k,z,E,P,R,W,B,H,U,Z,V,Q,j,q,J,X,K,G,Y,$,ee,te,ae,ne,le,oe,ie,re,se,me,de;return{setters:[e=>{a=e.d,n=e.u,l=e.F,o=e.G,i=e.H,r=e.J,s=e.K,m=e.L,d=e.M,u=e.r,c=e.Z,p=e.S,g=e.T,v=e.U,h=e.$,y=e.c,f=e.a0,b=e.a1,N=e.a2,A=e.a3,S=e.a4,w=e.V,x=e.h,I=e.Q,F=e.b,C=e.e,D=e.Y,O=e.a5,T=e.f,_=e.X,L=e.p,M=e._,k=e.D,z=e.w,E=e.E,P=e.i,R=e.j,W=e.l,B=e.m,H=e.n,U=e.I},e=>{Z=e.u,V=e.a,Q=e.n,j=e.o,q=e.E,J=e.i,X=e.q,K=e.c,G=e.s,Y=e.k,$=e.v,ee=e.m,te=e.l,ae=e.g,ne=e.f,le=e.j,oe=e.h,ie=e.t,re=e.p,se=e.T,me=e.I,de=e.U},null],execute:function(){var t=document.createElement("style");t.textContent=".chart[data-v-b89f4124],.chart[data-v-1518ec8f]{position:absolute;width:100%;height:100%}\n/*$vite$:1*/",document.head.appendChild(t);const ue=1e5,ce=35125,pe=M(a({__name:"FroHavet",setup(e,{expose:t}){Z([J,X,K,G,Y,$,ee,te,ae,ne,le,oe,ie]);const{t:a,locale:M}=n({useScope:"local"}),{theme:k,initOptions:z}=V(),E=l(),P=o(),{coordsFormat:R}=i(E),{POIs:W,locationActive:B}=i(P),{coords:H,locatedAt:U}=r();s(H,(()=>{const e=H.value.latitude,t=H.value.longitude,a=H.value.accuracy;e&&t&&e<1/0&&t<1/0&&U.value&&a&&P.addPoi("locate",m.latLng(e,t),new Date(U.value),a)})),s(W.value,(()=>{const e=P.getPoi("click"),t=P.getPoi("locate");e?ve.value.setLatLng(e.position):t&&he.value.setLatLng(t.position)})),s(B,(()=>{fe.value&&B.value==P.MarkerState.Clearable?he.value.addTo(fe.value):fe.value&&B.value==P.MarkerState.Placeable&&fe.value.removeLayer(he.value)}));const pe=m.icon({iconUrl:d("pin","svg"),iconSize:[40,40],iconAnchor:[20,39],tooltipAnchor:[5,-33],className:"raudfinn-marker"}),ge=m.icon({iconUrl:d("locate","svg"),iconSize:[40,40],iconAnchor:[20,20],tooltipAnchor:[5,0],className:"raudfinn-marker"}),ve=u(m.marker([0,0],{icon:pe}));ve.value.bindTooltip((e=>Q(ve.value.getLatLng()).format(R.value)));const he=u(m.marker([0,0],{icon:ge}));he.value.bindTooltip((e=>{const t=P.getPoi("locate");let n="";if(t&&(n=new Intl.DateTimeFormat(M.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(t.when),n+="<br><b>",n+=a("Accuracy")+": "+t.text+"</b> m",e)){const a=e.getTooltip();if(a&&t.text&&"number"==typeof t.text&&t.text>100&&a.getElement()instanceof HTMLElement){const e=a.getElement();e&&m.DomUtil.addClass(e,"raudfinn-warning")}}return Q(he.value.getLatLng()).format(R.value)+"<br>"+n}));const ye=u({}),fe=u({}),be=u([]),Ne=u(-1);L(se,k),L(me,z),L(de,{notMerge:!1,lazyUpdate:!0});const Ae=c(),{cascade_info:Se,timeIndex:we}=i(Ae),xe=p("frohavet");xe.setSpaceStride(2);const Ie={lat:[63.5,64.5],lng:[8.2,10]};xe.setBoundingBox(Ie),xe.setTimeStride(2);const{timeStride:Fe,spaceStride:Ce,region:De,boundingBox:Oe,activeLayer:Te,activeLayerName:_e,sinmod_info:Le}=i(xe),{data:Me}=g(Fe,De),{array:ke}=v(Fe,Ce,De,Oe),{array:ze}=h(),Ee=u(0),Pe=y((()=>ze.value?.length>we.value&&ze.value[we.value].isSuccess?ze.value[we.value].data:[[0,0,.1,.1,.2,0,.1,-.1,"2025",1,1,1,1]])),Re=y((()=>ke.value?.length>Ee.value&&ke.value[Ee.value].isSuccess?ke.value[Ee.value].data:[[0,0,.1,.1,.2,0,.1,-.1,"2025",1,1,1,1,1,1,1,1]])),{data:We}=f("operational"),{data:Be}=b("samples"),{data:He}=N("silcam"),{data:Ue}=A("vehicles"),Ze=S(),{timeInterval:Ve}=i(Ze);s(Ve,(()=>{Qe()}));const Qe=()=>{try{for(const e of["net-samples","silcam","vehicle"])ye.value?.setOption({dataset:{fromDatasetId:e+"-dataset",id:e+"-filtered",transform:{type:"filter",config:{and:[{dimension:"datetime",gt:w(Ve)[0],lt:w(Ve)[1],parser:"time"}]}}}})}catch{}},je=u(10.5),qe=u(w(Oe));s(je,(()=>{const e=je.value;var t;xe.setSpaceStride((t=e)>11?1:t<=11&&t>10?2:3),je.value>11&&We.value?Je({lat:[We.value.lat[0],We.value.lat[1]],lng:[We.value.lng[0],We.value.lng[1]]}):Je(qe)}));const Je=e=>{try{ye.value?.setOption({dataset:{fromDatasetId:"sinmod-dataset",id:"sinmod-dataset-filtered",transform:{type:"filter",config:{and:[{dimension:"lng0",">":w(e).lng[0],"<":w(e).lng[1]},{dimension:"lat0",">":w(e).lat[0],"<":w(e).lat[1]}]}}}})}catch{}};s(qe,(()=>{try{je.value<=11?Je(qe):xe.setBoundingBox(Ie)}catch{}}));const Xe=u(!0),Ke=()=>{try{ye.value?.setOption({visualMap:{id:"sinmod",text:Le.value.text,show:!0,right:0,padding:8,top:172,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"],colorAlpha:[0,0]},type:"continuous",seriesIndex:4,precision:2,inverse:!1,dimension:Le.value.dimension,min:Le.value.color_range[0],max:Le.value.color_range[1],range:Le.value.visible_range,inRange:{color:Le.value.colors}}})}catch{}},Ge=()=>{try{ye.value?.setOption({visualMap:{id:"cascade",text:Se.value.text,show:!0,right:0,padding:8,top:0,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"],colorAlpha:[0,0]},type:"continuous",seriesIndex:5,precision:2,inverse:!1,dimension:Se.value.dimension,min:Se.value.color_range[0],max:Se.value.color_range[1],range:Se.value.visible_range,inRange:{color:Se.value.colors}}})}catch{}},Ye=()=>{We.value&&ye.value?.setOption({dataset:{id:"operational-area",source:We.value.source}})},$e=()=>{Be.value&&ye.value?.setOption({dataset:{id:"net-samples-dataset",source:Be.value}})},et=()=>{He.value&&ye.value?.setOption({dataset:{id:"silcam-dataset",source:He.value}})},tt=()=>{Ue.value&&ye.value?.setOption({visualMap:{id:"vehicle-visual",pieces:Ue.value.pieces,max:Ue.value.pieces.length-1},dataset:{id:"vehicle-dataset",source:Ue.value.source}})};s(Le,(()=>{Ke()})),s(Se,(()=>{Ge()})),s(Me,(()=>{at()})),s(Re,(()=>{nt()})),s(Pe,(()=>{lt()})),s(We,(()=>{Ye()})),s(Be,(()=>{$e()})),s(He,(()=>{et()})),s(Ue,(()=>{tt()}));const at=()=>{const e=new Array;Me.value?.timestrings.forEach(((t,a)=>{e.push({series:[{},{},{},{},{datasetId:"sinmod-dataset-"+Number(a).toString(10)},{}]}),ye.value?.setOption({dataset:{id:"sinmod-dataset-"+Number(a).toString(10),fromDatasetId:"sinmod-dataset-filtered",transform:{type:"filter",config:{dimension:"time","=":t,parser:"time"},print:!1}}})})),ye.value?.setOption({timeline:{data:Me.value?.timestrings},options:e})},nt=async()=>{Re.value&&ye.value?.setOption({dataset:{id:"sinmod-dataset",source:Re.value}})},lt=async()=>{Pe.value&&ye.value?.setOption({dataset:{id:"cascade-dataset",source:Pe.value}})},ot=y((()=>[{name:a("Operational region")},{name:a("Net sample",2),icon:"pin"},{name:"SILCAM",icon:"diamond"}])),it={backgroundColor:"rgba(255,255,255,0)",legend:[{id:"sparse",data:ot.value,textStyle:{fontSize:14},top:1,borderWidth:1,borderRadius:2,left:"20%",orient:"vertical",show:!0},{id:"dense",data:["SINMOD - FROHAVET","CASCADE"],textStyle:{fontSize:14},top:1,borderWidth:1,borderRadius:2,right:"center",orient:"vertical",show:!0,selected:{"SINMOD - FROHAVET":!0,CASCADE:!0}}],timeline:{left:"5%",right:"5%",bottom:10,show:!0,axisType:"category",symbol:"roundRect",realtime:!0,loop:!0,autoPlay:!1,controlStyle:{showPlayBtn:!0,stopIcon:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAGpJREFUWAntlkEKwDAIBKP+/znt82xrD6FIpSSHXDpCQBeXDXOyNQoCBQEz21T1eL7QivUuj/qkO1MTwUm6R3cvPbEw6tO3kJUaH4AABCAAAQhAAAIQgEBJQET2fJxe2udZPuvLWcz/IXACuUMWMJDzUAgAAAAASUVORK5CYII=",playIcon:"path://M41.365908,29.4271388 L41.3664843,29.4265626 L26.3794329,19.1497136 L26.3747509,19.1541315 C26.0642269,18.8592621 25.6429678,18.677793 25.1786824,18.677793 C24.2236284,18.677793 23.4494433,19.4443188 23.4494433,20.3905371 C23.4494433,20.910214 23.4270417,21.9276946 23.4494433,21.9056292 L23.4494433,30.6673861 L23.4494433,39.8901629 C23.4494433,39.8977982 23.4494433,40.4825908 23.4494433,40.9444991 C23.4494433,41.8901412 24.2236284,42.656691 25.1786824,42.656691 C25.6447205,42.656691 26.0677564,42.4740454 26.3782564,42.1764869 L26.3794329,42.1770872 L41.3664843,31.9005503 L41.3659081,31.8996379 C41.6917266,31.5882735 41.894997,31.1514078 41.894997,30.6670739 C41.894997,30.6658974 41.894997,30.6650091 41.894997,30.6635444 C41.894997,30.6623679 41.894997,30.6609273 41.894997,30.6600389 C41.894997,30.175657 41.6917265,29.7384792 41.365908,29.4271388 Z"},symbolSize:15,playInterval:1500,itemStyle:{borderWidth:2},emphasis:{label:{fontSize:14,fontWeight:"bolder"}},checkpointStyle:{symbol:"pin",symbolSize:16},lineStyle:{width:3},label:{align:"left",fontSize:14,fontWeight:"bold",padding:2,formatter:function(e,t){if(t%6==0){const t={month:"short",day:"numeric",timeZoneName:"short",hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(M.value,t).format(new Date(x(e).toDate()))}if(t%6==1)return"";{const t={hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(M.value,t).format(new Date(x(e).toDate()))}}},tooltip:{textStyle:{fontSize:14},formatter:e=>new Intl.DateTimeFormat(M.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(new Date(x(e.name).toDate()))}},tooltip:{},toolbox:{itemSize:24,top:32,left:64,orient:"vertical",feature:{saveAsImage:{name:"sfiharvest",backgroundColor:"rgba(255,255,255,1)",excludeComponents:["toolbox"],iconStyle:{borderColor:"#4170f0",borderWidth:2},emphasis:{iconStyle:{textFill:"rgba(0,0,0,1)",textBackgroundColor:"rgba(255,255,255,0.7)",textPadding:4}}}}},lmap:{attributionControl:!1,center:[9,64],zoom:10.5,minZoom:8,resizeEnable:!0,renderOnMoving:!1,echartsLayerInteractive:!0,largeMode:!1,zoomControl:!1,zoomSnap:.5,zoomDelta:.5,zoomAnimation:!1,fadeAnimation:!1,wheelPxPerZoomLevel:120},dataset:(()=>{const e=new Array;e.push({id:"operational-area",dimensions:[{type:"number",name:"lng0"},{type:"number",name:"lat0"},{type:"number",name:"lng1"},{type:"number",name:"lat1"}],sourceHeader:1,source:[["lng0","lat0","lng1","lat1"],[0,0,.1,0]]}),e.push({id:"net-samples-dataset",dimensions:[{type:"number",name:"lat"},{type:"number",name:"lng"},{type:"time",name:"datetime"},"density"],sourceHeader:1,source:[["lat","lon","datetime","density"],[0,0,"2025-05-16T00:00:00.0",0]]}),e.push({id:"silcam-dataset",dimensions:[{type:"number",name:"lng0"},{type:"number",name:"lat0"},{type:"number",name:"lng1"},{type:"number",name:"lat1"},{type:"time",name:"datetime"},"density"],sourceHeader:1,source:[["lng0","lat0","lng1","lat1","datetime","density"],[0,0,.01,0,"2025-05-16T00:00:00+0000",0]]}),e.push({id:"vehicle-dataset",dimensions:[{type:"number",name:"id"},{type:"ordinal",name:"vehicle_id"},{type:"number",name:"lng0"},{type:"number",name:"lat0"},{type:"number",name:"lng1"},{type:"number",name:"lat1"},{type:"time",name:"datetime"}],sourceHeader:1,source:[["id","vehicle_id","lng0","lat0","lng1","lat1","datetime"],[0,"none",0,0,.1,0,"2025-05-17T00:00:00"]]}),e.push({id:"sinmod-dataset",dimensions:[{type:"float",name:"id"},{type:"float",name:"lng0"},{type:"float",name:"lat0"},{type:"float",name:"lng1"},{type:"float",name:"lat1"},{type:"float",name:"lng2"},{type:"float",name:"lat2"},{type:"float",name:"lng3"},{type:"float",name:"lat3"},{type:"time",name:"time"},{type:"float",name:"calanus_finmarchicus"},{type:"float",name:"diatoms"},{type:"float",name:"flagellates"},{type:"float",name:"temperature"},{type:"float",name:"salinity"},{type:"float",name:"u_east"},{type:"float",name:"v_north"},{type:"float",name:"current"}],source:{id:new Float64Array(ue).map((()=>NaN)),lng0:new Float64Array(ue).map((()=>NaN)),lat0:new Float64Array(ue).map((()=>NaN)),lng1:new Float64Array(ue).map((()=>NaN)),lat1:new Float64Array(ue).map((()=>NaN)),lng2:new Float64Array(ue).map((()=>NaN)),lat2:new Float64Array(ue).map((()=>NaN)),lng3:new Float64Array(ue).map((()=>NaN)),lat3:new Float64Array(ue).map((()=>NaN)),time:new Array(ue).map((()=>"")),calanus_finmarchicus:new Float64Array(ue).map((()=>NaN)),diatoms:new Float64Array(ue).map((()=>NaN)),flagellates:new Float64Array(ue).map((()=>NaN)),temperature:new Float64Array(ue).map((()=>NaN)),salinity:new Float64Array(ue).map((()=>NaN)),u_east:new Float64Array(ue).map((()=>NaN)),v_north:new Float64Array(ue).map((()=>NaN)),current:new Float64Array(ue).map((()=>NaN))}}),e.push({id:"cascade-dataset",dimensions:[{type:"float",name:"id"},{type:"float",name:"lng0"},{type:"float",name:"lat0"},{type:"float",name:"lng1"},{type:"float",name:"lat1"},{type:"float",name:"lng2"},{type:"float",name:"lat2"},{type:"float",name:"lng3"},{type:"float",name:"lat3"},{type:"time",name:"time"},{type:"float",name:"biomass_estimate"},{type:"float",name:"biomass_estimate_top_10m"},{type:"float",name:"uncertainty_biomass"},{type:"float",name:"information_gain"}],source:{id:new Float64Array(ce).map((()=>NaN)),lng0:new Float64Array(ce).map((()=>NaN)),lat0:new Float64Array(ce).map((()=>NaN)),lng1:new Float64Array(ce).map((()=>NaN)),lat1:new Float64Array(ce).map((()=>NaN)),lng2:new Float64Array(ce).map((()=>NaN)),lat2:new Float64Array(ce).map((()=>NaN)),lng3:new Float64Array(ce).map((()=>NaN)),lat3:new Float64Array(ce).map((()=>NaN)),time:new Array(ce).map((()=>"")),biomass_estimate:new Float64Array(ce).map((()=>NaN)),biomass_estimate_top_10m:new Float64Array(ce).map((()=>NaN)),uncertainty_biomass:new Float64Array(ce).map((()=>NaN)),information_gain:new Float64Array(ce).map((()=>NaN))}}),e.push({fromDatasetId:"sinmod-dataset",id:"sinmod-dataset-filtered",transform:{type:"filter",config:{and:[{dimension:"lng0",">":qe.value.lng[0],"<":qe.value.lng[1]},{dimension:"lat0",">":qe.value.lat[0],"<":qe.value.lat[1]}]}}});for(const t of["net-samples","silcam","vehicle"])e.push({fromDatasetId:t+"-dataset",id:t+"-filtered",transform:{type:"filter",config:{and:[{dimension:"datetime",gt:w(Ve)[0],lt:w(Ve)[1],parser:"time"}]}}});return e})(),visualMap:[{id:"net-samples-visual",show:!0,right:0,bottom:60,padding:8,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,inRange:{color:I({colormap:"density",nshades:20,format:"rgbaString",alpha:.8})},outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"]},type:"continuous",precision:2,seriesIndex:1,dimension:3,text:[a("Net sample"),"TBD"],min:0,max:100},{id:"silcam-visual",show:!0,right:0,bottom:232,padding:8,itemWidth:24,itemHeight:80,text:["SILCAM","TBD"],handleSize:"140%",calculable:!0,realtime:!0,inRange:{color:I({colormap:"cdom",nshades:9,format:"rgbaString",alpha:.8})},outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"]},type:"continuous",precision:2,seriesIndex:2,dimension:5,min:0,max:100},{id:"vehicle-visual",type:"piecewise",top:0,right:"20%",textStyle:{fontSize:14},min:0,max:1,seriesIndex:3,splitNumber:1,dimension:0,pieces:[{value:0,label:"none",color:"#cccccc"}]},{id:"sinmod",show:!0},{id:"cascade",show:!0}],series:[{type:"custom",coordinateSystem:"lmap",name:a("Operational region"),id:"region",datasetId:"operational-area",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,tooltip:{position:(e,t,a,n,l)=>({bottom:60,right:150}),formatter:e=>{if(e.value&&e.dimensionNames){let t="";const n=e.value,l=n[0],o=n[1],i=n[2],r=n[3];return t+='<table class="raudfinn-item">',t+='<tr><th colspan=3 align="center">'+e.marker+" "+a("Operational region")+"</th></tr>",t+="<tr><td><b>"+a("Edge",1)+'</b></td><td colspan=2 align="right">'+Q({lng:l,lat:o}).format(R.value)+"</td></tr>",t+="<tr><td><b>"+a("Edge",1)+'</b></td><td colspan=2 align="right">'+Q({lng:i,lat:r}).format(R.value)+"</td></tr>",t+="</table>",t}return""}},renderItem:(e,t)=>{const a=[t.value("lng0"),t.value("lat0"),t.value("lng1"),t.value("lat1")];for(let o=0;o<a.length;o++)if(isNaN(a[o]))return{type:"text"};const n=t.coord([t.value("lng0"),t.value("lat0")]),l=t.coord([t.value("lng1"),t.value("lat1")]);return{type:"line",shape:{x1:n[0],y1:n[1],x2:l[0],y2:l[1]},style:{lineWidth:2,stroke:"#b7232d"},emphasis:{style:{lineWidth:3,stroke:"#b7232d"}}}}},{type:"scatter",coordinateSystem:"lmap",name:a("Net sample",2),id:"net-samples",datasetId:"net-samples-filtered",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,symbol:"pin",symbolSize:e=>Math.max(20,e[3]/2.5),encode:{lng:"lng",lat:"lat",value:"density"},tooltip:{position:(e,t,a,n,l)=>({bottom:60,right:150}),formatter:e=>{if(e.value&&e.dimensionNames){let t="";const n=e.value,l=n[0],o=n[1],i=n[3],r=new Intl.DateTimeFormat(M.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(x(n[2]).toDate());return t+='<table class="raudfinn-item">',t+='<tr><th colspan=3 align="center">'+e.marker+" "+a("Net sample")+"</th></tr>",t+="<tr><td><b>"+a("Timepoint")+'</b></td><td colspan=2 align="right">'+r+"</td></tr>",t+="<tr><td><b>"+a("Position")+'</b></td><td colspan=2 align="right">'+Q({lng:l,lat:o}).format(R.value)+"</td></tr>",t+="<tr><td><b>"+a("Measurement")+'</b></td><td align="right">'+i.toFixed(2)+"</td><td>TBD</td></tr>",t+="</table>",t}return""}}},{type:"custom",coordinateSystem:"lmap",name:"SILCAM",id:"silcam",z:3,datasetId:"silcam-filtered",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,tooltip:{position:(e,t,a,n,l)=>({bottom:60,right:150}),formatter:e=>{if(e.value&&e.dimensionNames){let t="";const n=e.value,l=n[0],o=n[1],i=n[5],r=new Intl.DateTimeFormat(M.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(x(n[4]).toDate());return t+='<table class="raudfinn-item">',t+='<tr><th colspan=3 align="center">'+e.marker+" SILCAM</th></tr>",t+="<tr><td><b>"+a("Timepoint")+'</b></td><td colspan=2 align="right">'+r+"</td></tr>",t+="<tr><td><b>"+a("Position")+'</b></td><td colspan=2 align="right">'+Q({lng:l,lat:o}).format(R.value)+"</td></tr>",t+="<tr><td><b>"+a("Measurement")+'</b></td><td align="right">'+i.toFixed(2)+"</td><td>TBD</td></tr>",t+="</table>",t}return""}},renderItem:(e,t)=>{const a=[t.value("lng0"),t.value("lat0"),t.value("lng1"),t.value("lat1")];for(let o=0;o<a.length;o++)if(isNaN(a[o]))return{type:"text"};const n=t.coord([t.value("lng0"),t.value("lat0")]),l=t.coord([t.value("lng1"),t.value("lat1")]);return{type:"line",shape:{x1:n[0],y1:n[1],x2:l[0],y2:l[1]},style:{lineWidth:2,stroke:t.visual("color")},emphasis:{style:{lineWidth:3,stroke:t.visual("color")}}}}},{type:"custom",coordinateSystem:"lmap",name:a("Vehicle",2),id:"vehicles",z:3,datasetId:"vehicle-filtered",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,itemStyle:{borderColor:"#555"},renderItem:(e,t)=>{const a=[t.value("lng0"),t.value("lat0"),t.value("lng1"),t.value("lat1")];for(let o=0;o<a.length;o++)if(isNaN(a[o]))return{type:"text"};const n=t.coord([t.value("lng0"),t.value("lat0")]),l=t.coord([t.value("lng1"),t.value("lat1")]);return{type:"line",shape:{x1:n[0],y1:n[1],x2:l[0],y2:l[1]},style:{lineWidth:2,stroke:t.visual("color")},emphasis:{style:{lineWidth:3,stroke:t.visual("color")}}}},tooltip:{position:(e,t,a,n,l)=>({bottom:60,right:150}),formatter:e=>{if(e.value&&e.dimensionNames){let t="";const n=e.value,l=n[3],o=n[2];n[5],n[4];const i=new Intl.DateTimeFormat(M.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(x(n[6]).toDate());return t+='<table class="raudfinn-item">',t+='<tr><th colspan=3 align="center">'+e.marker+" "+a("Vehicle")+"</th></tr>",t+="<tr><td><b>"+a("Vehicle")+'</b></td><td colspan=2 align="right">'+n[1]+"</td></tr>",t+="<tr><td><b>"+a("Timepoint")+'</b></td><td colspan=2 align="right">'+i+"</td></tr>",t+="<tr><td><b>"+a("Position")+'</b></td><td colspan=2 align="right">'+Q({lng:l,lat:o}).format(R.value)+"</td></tr>",t+="</table>",t}return""}}},{type:"custom",z:1,coordinateSystem:"lmap",name:"SINMOD - FROHAVET",id:"frohavet",renderItem:j(Le),tooltip:{position:(e,t,a,n,l)=>({bottom:60,left:20}),formatter:e=>{if(e.value&&e.dimensionNames){let t="";const n=e.value,l=n[2],o=n[1],i=n[4],r=n[3],s=n[6],d=n[5],u=n[8],c=n[7],p=.25*(l+i+s+u),g=.25*(o+r+d+c),v=fe.value?.distance(m.latLng(l,o),m.latLng(i,r)),h=fe.value?.distance(m.latLng(l,o),m.latLng(u,c)),y=.5*(v+h),f=9,b=new Intl.DateTimeFormat(M.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(x(n[f]).toDate());return t+='<table class="raudfinn-item">',t+='<tr><th colspan=3 align="center">'+e.marker+" "+Le.value.description+"</th></tr>",t+="<tr><td><b>"+a("Timepoint")+'</b></td><td colspan=2 align="right">'+b+"</td></tr>",t+="<tr><td><b>"+a("Position")+'</b></td><td colspan=2 align="right">'+Q({lng:g,lat:p}).format(R.value)+"</td></tr>",t+="<tr><td><b>"+a("Resolution")+'</b></td><td align="right">'+y.toFixed(0)+"</td><td>m</td></tr>",t+='<tr><td colspan=3 class="raudfinn-item-td"></td></tr>',Object.values(D).forEach((l=>{e.dimensionNames&&(t+="<tr><td><b>"+a(e.dimensionNames[l.dimension])+'</b></td><td align="right">'+n[l.dimension].toFixed(2)+"</td><td>"+l.unit+"</td></tr>")})),t+="</table>",t}return""}},datasetId:"sinmod-dataset",progressive:1e4,progressiveChunkMode:"sequential",animation:!1},{type:"custom",z:1,coordinateSystem:"lmap",name:"CASCADE",id:"cascade",renderItem:j(Se),tooltip:{position:(e,t,a,n,l)=>({bottom:60,left:20}),formatter:e=>{if(e.value&&e.dimensionNames){let t="";const n=e.value,l=n[2],o=n[1],i=n[4],r=n[3],s=n[6],d=n[5],u=n[8],c=n[7],p=.25*(l+i+s+u),g=.25*(o+r+d+c),v=fe.value?.distance(m.latLng(l,o),m.latLng(i,r)),h=fe.value?.distance(m.latLng(l,o),m.latLng(u,c)),y=.5*(v+h),f=9,b=new Intl.DateTimeFormat(M.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(x(n[f]).toDate());return t+='<table class="raudfinn-item">',t+='<tr><th colspan=3 align="center">'+e.marker+" "+Se.value.description+"</th></tr>",t+="<tr><td><b>"+a("Timepoint")+'</b></td><td colspan=2 align="right">'+b+"</td></tr>",t+="<tr><td><b>"+a("Position")+'</b></td><td colspan=2 align="right">'+Q({lng:g,lat:p}).format(R.value)+"</td></tr>",t+="<tr><td><b>"+a("Resolution")+'</b></td><td align="right">'+y.toFixed(0)+"</td><td>m</td></tr>",t+='<tr><td colspan=3 class="raudfinn-item-td"></td></tr>',Object.values(O).forEach((l=>{e.dimensionNames&&(t+="<tr><td><b>"+a(e.dimensionNames[l.dimension])+'</b></td><td align="right">'+n[l.dimension].toFixed(2)+"</td><td>"+l.unit+"</td></tr>")})),t+="</table>",t}return""}},datasetId:"cascade-dataset",progressive:1e4,progressiveChunkMode:"sequential",animation:!1}]},rt=u(!0);s(k,(()=>{rt.value=!0,st()})),s(z,(()=>{rt.value=!0,st()})),s(ye,((e,t)=>{rt.value=!0,st()})),s(fe,((e,t)=>{nt(),lt(),Ye(),et(),$e(),tt()}));const st=()=>{setTimeout((()=>{if(rt.value&&(rt.value=!re(Ne,fe,ye,be),ye.value?.setOption(it),ye.value?.setOption({legend:{id:"sparse",data:ot.value}}),ye.value?.setOption({series:{name:a("Operational region"),id:"region"}}),ye.value?.setOption({visualMap:{id:"net-samples-visual",text:[a("Net sample"),"TBD"]},series:{name:a("Net sample",2),id:"net-samples"}}),Ke(),Ge(),at()),fe.value)try{fe.value.invalidateSize(),ve.value.addTo(fe.value),je.value=fe.value.getZoom(),fe.value.on("moveend",(e=>{const t=fe.value.getBounds(),a=t.getEast()-t.getWest(),n=t.getNorth()-t.getSouth(),l=.05;qe.value={lng:[t.getWest()-l*a,t.getEast()+l*a],lat:[t.getSouth()-l*n,t.getNorth()+l*n]}})),fe.value.on("zoomend",(e=>{je.value=fe.value.getZoom()}))}catch{console.warn("Map does not exist yet")}}),50)},mt=e=>{Xe.value!=e.selected["SINMOD - FROHAVET"]&&(Xe.value=e.selected["SINMOD - FROHAVET"])},dt=e=>{e.playState&&!Xe.value&&((async e=>{const t=await _.create({message:e,duration:3e3,position:"middle"});await t.present()})(a("SINMOD disabled")),ye.value?.dispatchAction({type:"timelinePlayChange",playState:!1}))},ut=e=>{Ee.value=e.currentIndex},ct=e=>{setTimeout((()=>{ye.value&&ye.value.dispatchAction({type:"hideTip"})}),3e3)};return t({doPlot:st}),(e,t)=>(T(),F(C(q),{ref_key:"theChart",ref:ye,class:"chart","manual-update":!0,autoresize:!0,option:it,onClick:ct,onLegendselectchanged:mt,onTimelineplaychanged:dt,onTimelinechanged:ut},null,512))}}),[["__scopeId","data-v-b89f4124"]]);e("default",M(a({__name:"FrohavetPage",setup(e){const t=u({});return k((()=>{t.value.doPlot()})),(e,a)=>(T(),F(C(E),null,{default:z((()=>[P(C(U),{fullscreen:!0},{default:z((()=>[P(C(R),{class:"raudfinn-grid"},{default:z((()=>[P(C(W),{class:"raudfinn-col-0",size:"12",style:{display:"flex"}},{default:z((()=>[P(C(B),{class:"raudfinn-card"},{default:z((()=>[P(C(H),{class:"raudfinn-card-content",style:{position:"relative"}},{default:z((()=>[P(pe,{ref_key:"theMap",ref:t,name:"Frohavet map"},null,512)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-1518ec8f"]]))}}}));
