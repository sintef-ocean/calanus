import{d as ie,u as Me,F as ze,G as Ee,H as U,J as Pe,K as d,L as v,M as le,r as c,S as Be,T as Re,U as We,c as re,V as He,h as A,Q as se,b as me,e as S,Y as Ue,f as ue,X as Ve,p as V,_ as de,D as Ze,w as I,E as $e,i as T,j as Qe,l as Ke,m as Ye,n as qe,I as Ge}from"./index-D42ZD87f.js";import{u as Je,a as Xe,n as h,o as je,E as et,i as tt,q as at,c as nt,s as ot,k as lt,v as rt,m as st,l as it,g as mt,f as ut,j as dt,h as ct,t as pt,p as gt,T as vt,I as ht,U as ft}from"./render-B3rKqHXx.js";import"./leaflet-CYx1M_cZ.js";const s=1e5,yt=ie({__name:"FroHavet",setup(ce,{expose:D}){Je([tt,at,nt,ot,lt,rt,st,it,mt,ut,dt,ct,pt]);const{t:l,locale:f}=Me({useScope:"local"}),{theme:Z,initOptions:$}=Xe(),pe=ze(),b=Ee(),{coordsFormat:g}=U(pe),{POIs:ge,locationActive:z}=U(b),{coords:C,locatedAt:Q}=Pe();d(C,()=>{const t=C.value.latitude,e=C.value.longitude,a=C.value.accuracy;t&&e&&t<1/0&&e<1/0&&Q.value&&a&&b.addPoi("locate",v.latLng(t,e),new Date(Q.value),a)}),d(ge.value,()=>{const t=b.getPoi("click"),e=b.getPoi("locate");t?F.value.setLatLng(t.position):e&&w.value.setLatLng(e.position)}),d(z,()=>{i.value&&z.value==b.MarkerState.Clearable?w.value.addTo(i.value):i.value&&z.value==b.MarkerState.Placeable&&i.value.removeLayer(w.value)});const ve=v.icon({iconUrl:le("pin","svg"),iconSize:[40,40],iconAnchor:[20,39],tooltipAnchor:[5,-33],className:"raudfinn-marker"}),he=v.icon({iconUrl:le("locate","svg"),iconSize:[40,40],iconAnchor:[20,20],tooltipAnchor:[5,0],className:"raudfinn-marker"}),F=c(v.marker([0,0],{icon:ve}));F.value.bindTooltip(t=>h(F.value.getLatLng()).format(g.value));const w=c(v.marker([0,0],{icon:he}));w.value.bindTooltip(t=>{const e=b.getPoi("locate");let a="";if(e&&(a=new Intl.DateTimeFormat(f.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(e.when),a+="<br><b>",a+=l("Accuracy")+": "+e.text+"</b> m",t)){const n=t.getTooltip();if(n&&e.text&&typeof e.text=="number"&&e.text>100&&n.getElement()instanceof HTMLElement){const o=n.getElement();o&&v.DomUtil.addClass(o,"raudfinn-warning")}}return h(w.value.getLatLng()).format(g.value)+"<br>"+a});const fe={notMerge:!1,lazyUpdate:!0},m=c({}),i=c({}),ye=c([]),be=c(-1);V(vt,Z),V(ht,$),V(ft,fe);const Ae=async t=>{await(await Ve.create({message:t,duration:3e3,position:"middle"})).present()},N=Be("frohavet");N.setSpaceStride(1);const K={lat:[63.5,64.3],lng:[8.2,10]};N.setBoundingBox(K);const{timeStride:Y,spaceStride:Se,region:q,boundingBox:G,activeLayer:St,activeLayerName:Nt,sinmod_info:y}=U(N),{data:E}=Re(Y,q),{array:P}=We(Y,Se,q,G),O=c(0),J=re(()=>{var t;return((t=P.value)==null?void 0:t.length)>O.value&&P.value[O.value].isSuccess?P.value[O.value].data:[[0,0,.1,.1,.2,0,.1,-.1,"2025",1,1,1,1,1,1,1,1]]}),x=c(7),p=c(He(G));d(x,()=>{const t=x.value,e=a=>a>11?1:a<=11&&a>10?2:a<=10&&a>7?3:4;N.setSpaceStride(e(t))}),d(p,()=>{var t;try{(t=m.value)==null||t.setOption({dataset:{fromDatasetId:"sinmod-dataset",id:"sinmod-dataset-filtered",transform:{type:"filter",config:{and:[{dimension:"lng0",">":p.value.lng[0],"<":p.value.lng[1]},{dimension:"lat0",">":p.value.lat[0],"<":p.value.lat[1]}]}}}}),x.value>10?N.setBoundingBox(p.value):N.setBoundingBox(K)}catch(e){}});const Ne=t=>{const e=new Array;return e.push({id:"operational-area",dimensions:[{type:"number",name:"lat0"},{type:"number",name:"lng0"},{type:"number",name:"lat1"},{type:"number",name:"lng1"},{type:"number",name:"lat2"},{type:"number",name:"lng2"},{type:"number",name:"lat3"},{type:"number",name:"lng3"}],sourceHeader:1,source:[["lat0","lon0","lat1","lon1","lat2","lon2","lat3","lon3"],[63.9,9,63.9,9.2,63.83,9.17,63.8,9]]}),e.push({id:"net-samples-dataset",dimensions:[{type:"number",name:"lat"},{type:"number",name:"lng"},{type:"time",name:"timestamp"},"density"],sourceHeader:1,source:[["lat","lon","datetime","density"],[63.865,9.03,"2025-05-16T12:22:33.123",0],[63.81,9.02,"2025-05-17T12:22:43.123",30],[63.8,9.08,"2025-05-19T12:22:43.123",80]]}),e.push({id:"silcam-dataset",dimensions:[{type:"number",name:"lng0"},{type:"number",name:"lat0"},{type:"number",name:"lng1"},{type:"number",name:"lat1"},{type:"time",name:"timestamp"},"density"],sourceHeader:1,source:[["lng0","lat0","lng1","lat1","datetime","density"],[9,63,805,9,63.81,"2025-05-16T12:22:33.123",0],[9,63.81,9.01,63.81,"2025-05-17T12:22:43.123",30],[9.01,63.81,9.02,63.82,"2025-05-19T12:22:53.123",80],[9.02,63.82,9.03,63.82,"2025-05-17T12:23:03.123",60],[9.03,63.82,9.04,63.83,"2025-05-19T12:23:13.123",20]]}),e.push({id:"vehicle-dataset",dimensions:[{type:"number",name:"id"},{type:"ordinal",name:"vehicle_id"},{type:"number",name:"lat0"},{type:"number",name:"lng0"},{type:"number",name:"lat1"},{type:"number",name:"lng1"},{type:"time",name:"timestamp"}],sourceHeader:1,source:[["id","vehicle_id","lat0","lon0","lat1","lon1","datetime"],[0,"Grethe",63.86,9.05,63.86,9.08,"2025-05-17T12:22:33.123"],[1,"Thor",63.88,9.05,63.88,9.08,"2025-05-17T12:22:33.123"],[2,"Roald",63.88,9.1,63.84,9.08,"2025-05-17T12:22:33.123"],[3,"Yellow AutoNaut",63.83,9,63.8,9.02,"2025-05-17T12:22:33.123"],[4,"Red AutoNaut",63.83,9.2,63.8,9.22,"2025-05-17T12:22:33.123"],[5,"Flyer",63.83,8.95,63.8,9,"2025-05-17T12:22:33.123"]]}),e.push({id:"sinmod-dataset",dimensions:[{type:"float",name:"id"},{type:"float",name:"lng0"},{type:"float",name:"lat0"},{type:"float",name:"lng1"},{type:"float",name:"lat1"},{type:"float",name:"lng2"},{type:"float",name:"lat2"},{type:"float",name:"lng3"},{type:"float",name:"lat3"},{type:"time",name:"time"},{type:"float",name:"calanus_finmarchicus"},{type:"float",name:"diatoms"},{type:"float",name:"flagellates"},{type:"float",name:"temperature"},{type:"float",name:"salinity"},{type:"float",name:"u_east"},{type:"float",name:"v_north"},{type:"float",name:"current"}],source:{id:new Float64Array(s).map(()=>NaN),lng0:new Float64Array(s).map(()=>NaN),lat0:new Float64Array(s).map(()=>NaN),lng1:new Float64Array(s).map(()=>NaN),lat1:new Float64Array(s).map(()=>NaN),lng2:new Float64Array(s).map(()=>NaN),lat2:new Float64Array(s).map(()=>NaN),lng3:new Float64Array(s).map(()=>NaN),lat3:new Float64Array(s).map(()=>NaN),time:new Array(s).map(()=>""),calanus_finmarchicus:new Float64Array(s).map(()=>NaN),diatoms:new Float64Array(s).map(()=>NaN),flagellates:new Float64Array(s).map(()=>NaN),temperature:new Float64Array(s).map(()=>NaN),salinity:new Float64Array(s).map(()=>NaN),u_east:new Float64Array(s).map(()=>NaN),v_north:new Float64Array(s).map(()=>NaN),current:new Float64Array(s).map(()=>NaN)}}),e.push({fromDatasetId:"sinmod-dataset",id:"sinmod-dataset-filtered",transform:{type:"filter",config:{and:[{dimension:"lng0",">":p.value.lng[0],"<":p.value.lng[1]},{dimension:"lat0",">":p.value.lat[0],"<":p.value.lat[1]}]}}}),e},B=c(!0),X=()=>{var t;try{(t=m.value)==null||t.setOption({visualMap:{id:"sinmod",text:y.value.text,show:!0,right:0,padding:8,top:172,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"],colorAlpha:[0,0]},type:"continuous",seriesIndex:4,precision:2,inverse:!1,dimension:y.value.dimension,min:y.value.color_range[0],max:y.value.color_range[1],range:y.value.visible_range,inRange:{color:y.value.colors}}})}catch(e){}};d(y,()=>{X()}),d(E,()=>{j()}),d(J,()=>{ee()});const j=()=>{var e,a,n;const t=new Array;(e=E.value)==null||e.timestrings.forEach((o,r)=>{var u;t.push({series:[{},{},{},{},{datasetId:"sinmod-dataset-"+Number(r).toString(10)}]}),(u=m.value)==null||u.setOption({dataset:{id:"sinmod-dataset-"+Number(r).toString(10),fromDatasetId:"sinmod-dataset",transform:{type:"filter",config:{dimension:"time","=":o,parser:"time"},print:!1}}})}),(n=m.value)==null||n.setOption({timeline:{data:(a=E.value)==null?void 0:a.timestrings},options:t})},ee=async()=>{var t;(t=m.value)==null||t.setOption({dataset:{id:"sinmod-dataset",source:J.value}})},te=re(()=>[{name:l("Operational region")},{name:l("Net sample",2),icon:"pin"},{name:"SILCAM",icon:"diamond"}]),ae={backgroundColor:"rgba(255,255,255,0)",legend:[{id:"sparse",data:te.value,textStyle:{fontSize:14},top:1,borderWidth:1,borderRadius:2,left:"20%",orient:"vertical",show:!0},{id:"dense",data:["SINMOD - FROHAVET"],textStyle:{fontSize:14},top:1,borderWidth:1,borderRadius:2,right:"center",orient:"vertical",show:!0,selected:{"SINMOD - FROHAVET":!0}}],timeline:{left:"5%",right:"5%",bottom:10,show:!0,axisType:"category",symbol:"roundRect",realtime:!0,loop:!0,autoPlay:!1,controlStyle:{showPlayBtn:!0,stopIcon:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAGpJREFUWAntlkEKwDAIBKP+/znt82xrD6FIpSSHXDpCQBeXDXOyNQoCBQEz21T1eL7QivUuj/qkO1MTwUm6R3cvPbEw6tO3kJUaH4AABCAAAQhAAAIQgEBJQET2fJxe2udZPuvLWcz/IXACuUMWMJDzUAgAAAAASUVORK5CYII=",playIcon:"path://M41.365908,29.4271388 L41.3664843,29.4265626 L26.3794329,19.1497136 L26.3747509,19.1541315 C26.0642269,18.8592621 25.6429678,18.677793 25.1786824,18.677793 C24.2236284,18.677793 23.4494433,19.4443188 23.4494433,20.3905371 C23.4494433,20.910214 23.4270417,21.9276946 23.4494433,21.9056292 L23.4494433,30.6673861 L23.4494433,39.8901629 C23.4494433,39.8977982 23.4494433,40.4825908 23.4494433,40.9444991 C23.4494433,41.8901412 24.2236284,42.656691 25.1786824,42.656691 C25.6447205,42.656691 26.0677564,42.4740454 26.3782564,42.1764869 L26.3794329,42.1770872 L41.3664843,31.9005503 L41.3659081,31.8996379 C41.6917266,31.5882735 41.894997,31.1514078 41.894997,30.6670739 C41.894997,30.6658974 41.894997,30.6650091 41.894997,30.6635444 C41.894997,30.6623679 41.894997,30.6609273 41.894997,30.6600389 C41.894997,30.175657 41.6917265,29.7384792 41.365908,29.4271388 Z"},symbolSize:15,playInterval:1500,itemStyle:{borderWidth:2},emphasis:{label:{fontSize:14,fontWeight:"bolder"}},checkpointStyle:{symbol:"pin",symbolSize:16},lineStyle:{width:3},label:{align:"left",fontSize:14,fontWeight:"bold",padding:2,formatter:function(t,e){if(e%6==0){const a={month:"short",day:"numeric",timeZoneName:"short",hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(f.value,a).format(new Date(A(t).toDate()))}else{if(e%6==1)return"";{const a={hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(f.value,a).format(new Date(A(t).toDate()))}}}},tooltip:{textStyle:{fontSize:14},formatter:t=>new Intl.DateTimeFormat(f.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(new Date(A(t.name).toDate()))}},tooltip:{},toolbox:{itemSize:24,top:32,left:64,orient:"vertical",feature:{saveAsImage:{name:"sfiharvest",backgroundColor:"rgba(255,255,255,1)",excludeComponents:["toolbox"],iconStyle:{borderColor:"#4170f0",borderWidth:2},emphasis:{iconStyle:{textFill:"rgba(0,0,0,1)",textBackgroundColor:"rgba(255,255,255,0.7)",textPadding:4}}}}},lmap:{attributionControl:!1,center:[9,64],zoom:10.5,minZoom:6,resizeEnable:!0,renderOnMoving:!1,echartsLayerInteractive:!0,largeMode:!1,zoomControl:!1,zoomSnap:.5,zoomDelta:.5,zoomAnimation:!1,fadeAnimation:!1,wheelPxPerZoomLevel:120},dataset:Ne(),visualMap:[{id:"net-samples-visual",show:!0,right:0,bottom:60,padding:8,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,inRange:{color:se({colormap:"density",nshades:20,format:"rgbaString",alpha:.8})},outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"]},type:"continuous",precision:2,seriesIndex:1,dimension:3,text:[l("Net sample"),"TBD"],min:0,max:100},{id:"silcam-visual",show:!0,right:0,bottom:232,padding:8,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,inRange:{color:se({colormap:"cdom",nshades:20,format:"rgbaString",alpha:.8})},outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"]},type:"continuous",precision:2,seriesIndex:2,dimension:5,min:0,max:100,text:["SILCAM","TBD"]},{id:"vehicle-visual",type:"piecewise",top:0,right:"20%",textStyle:{fontSize:14},min:0,max:5,seriesIndex:3,splitNumber:1,dimension:0,pieces:[{value:0,label:"Grethe",color:"#37A2DA"},{value:1,label:"Thor",color:"#b55dba"},{value:2,label:"Roald",color:"#37a354"},{value:3,label:"Yellow AutoNaut",color:"#b5bd48"},{value:4,label:"Red AutoNaut",color:"#e06343"},{value:5,label:"Flyer",color:"#8378EA"}]},{id:"sinmod",show:!0}],series:[{type:"custom",coordinateSystem:"lmap",name:l("Operational region"),id:"region",datasetId:"operational-area",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,tooltip:{position:(t,e,a,n,o)=>({bottom:60,right:150}),formatter:t=>{if(t.value&&t.dimensionNames){let e="";const a=t.value,n=a[0],o=a[1],r=a[2],u=a[3],k=a[4],M=a[5],R=a[6],W=a[7];return e+='<table class="raudfinn-item">',e+='<tr><th colspan=3 align="center">'+t.marker+" "+l("Operational region")+"</th></tr>",e+="<tr><td><b>"+l("Edge",2)+'</b></td><td colspan=2 align="right">'+h({lng:n,lat:o}).format(g.value)+"</td></tr>",e+='<tr><td></td><td colspan=2 align="right">'+h({lng:r,lat:u}).format(g.value)+"</td></tr>",e+='<tr><td></td><td colspan=2 align="right">'+h({lng:k,lat:M}).format(g.value)+"</td></tr>",e+='<tr><td></td><td colspan=2 align="right">'+h({lng:R,lat:W}).format(g.value)+"</td></tr>",e+="</table>",e}else return""}},renderItem:(t,e)=>{const a=e.coord([e.value(1),e.value(0)]),n=e.coord([e.value(3),e.value(2)]),o=e.coord([e.value(5),e.value(4)]),r=e.coord([e.value(7),e.value(6)]);return{type:"polygon",shape:{points:[a,n,o,r]},style:{stroke:"#b7232d",lineWidth:2,fill:"rgba(0,0,0,0)"},emphasis:{style:{lineWidth:3}}}}},{type:"scatter",coordinateSystem:"lmap",name:l("Net sample",2),id:"net-samples",datasetId:"net-samples-dataset",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,symbol:"pin",symbolSize:t=>Math.max(20,t[3]/2.5),encode:{lng:"lng",lat:"lat",value:"density"},tooltip:{position:(t,e,a,n,o)=>({bottom:60,right:150}),formatter:t=>{if(t.value&&t.dimensionNames){let e="";const a=t.value,n=a[0],o=a[1],r=a[3],u=new Intl.DateTimeFormat(f.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(A(a[2]).toDate());return e+='<table class="raudfinn-item">',e+='<tr><th colspan=3 align="center">'+t.marker+" "+l("Net sample")+"</th></tr>",e+="<tr><td><b>"+l("Timepoint")+'</b></td><td colspan=2 align="right">'+u+"</td></tr>",e+="<tr><td><b>"+l("Position")+'</b></td><td colspan=2 align="right">'+h({lng:n,lat:o}).format(g.value)+"</td></tr>",e+="<tr><td><b>"+l("Measurement")+'</b></td><td align="right">'+r.toFixed(2)+"</td><td>TBD</td></tr>",e+="</table>",e}else return""}}},{type:"custom",coordinateSystem:"lmap",name:"SILCAM",id:"silcam",z:3,datasetId:"silcam-dataset",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,encode:{lng:"lng0",lat:"lat0",value:"density"},tooltip:{position:(t,e,a,n,o)=>({bottom:60,right:150}),formatter:t=>{if(t.value&&t.dimensionNames){let e="";const a=t.value,n=a[0],o=a[1],r=a[5],u=new Intl.DateTimeFormat(f.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(A(a[4]).toDate());return e+='<table class="raudfinn-item">',e+='<tr><th colspan=3 align="center">'+t.marker+" SILCAM</th></tr>",e+="<tr><td><b>"+l("Timepoint")+'</b></td><td colspan=2 align="right">'+u+"</td></tr>",e+="<tr><td><b>"+l("Position")+'</b></td><td colspan=2 align="right">'+h({lng:n,lat:o}).format(g.value)+"</td></tr>",e+="<tr><td><b>"+l("Measurement")+'</b></td><td align="right">'+r.toFixed(2)+"</td><td>TBD</td></tr>",e+="</table>",e}else return""}},renderItem:(t,e)=>{const a=[e.value("lng0"),e.value("lat0"),e.value("lng1"),e.value("lat1")];for(let r=0;r<a.length;r++)if(isNaN(a[r]))return{type:"text"};const n=e.coord([e.value("lng0"),e.value("lat0")]),o=e.coord([e.value("lng1"),e.value("lat1")]);return{type:"line",shape:{x1:n[0],y1:n[1],x2:o[0],y2:o[1]},style:{lineWidth:2,stroke:e.visual("color")},emphasis:{style:{lineWidth:3,stroke:e.visual("color")}}}}},{type:"custom",coordinateSystem:"lmap",name:l("Vehicle",2),id:"vehicles",z:3,datasetId:"vehicle-dataset",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,itemStyle:{borderColor:"#555"},encode:{lng:"lng0",lat:"lat0"},renderItem:(t,e)=>{const a=[e.value("lng0"),e.value("lat0"),e.value("lng1"),e.value("lat1")];for(let r=0;r<a.length;r++)if(isNaN(a[r]))return{type:"text"};const n=e.coord([e.value("lng0"),e.value("lat0")]),o=e.coord([e.value("lng1"),e.value("lat1")]);return{type:"line",shape:{x1:n[0],y1:n[1],x2:o[0],y2:o[1]},style:{lineWidth:2,stroke:e.visual("color")},emphasis:{style:{lineWidth:3,stroke:e.visual("color")}}}},tooltip:{position:(t,e,a,n,o)=>({bottom:60,right:150}),formatter:t=>{if(t.value&&t.dimensionNames){let e="";const a=t.value,n=a[3],o=a[2];a[5],a[4];const r=new Intl.DateTimeFormat(f.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(A(a[6]).toDate());return e+='<table class="raudfinn-item">',e+='<tr><th colspan=3 align="center">'+t.marker+" "+l("Vehicle")+"</th></tr>",e+="<tr><td><b>"+l("Vehicle")+'</b></td><td colspan=2 align="right">'+a[1]+"</td></tr>",e+="<tr><td><b>"+l("Timepoint")+'</b></td><td colspan=2 align="right">'+r+"</td></tr>",e+="<tr><td><b>"+l("Position")+'</b></td><td colspan=2 align="right">'+h({lng:n,lat:o}).format(g.value)+"</td></tr>",e+="</table>",e}else return""}}},{type:"custom",z:1,coordinateSystem:"lmap",name:"SINMOD - FROHAVET",id:"frohavet",renderItem:je(y),tooltip:{position:(t,e,a,n,o)=>({bottom:60,left:20}),formatter:t=>{var e,a;if(t.value&&t.dimensionNames){let n="";const o=t.value,r=o[2],u=o[1],k=o[4],M=o[3],R=o[6],W=o[5],ne=o[8],oe=o[7],De=.25*(r+k+R+ne),Ce=.25*(u+M+W+oe),Fe=(e=i.value)==null?void 0:e.distance(v.latLng(r,u),v.latLng(k,M)),Oe=(a=i.value)==null?void 0:a.distance(v.latLng(r,u),v.latLng(ne,oe)),Le=.5*(Fe+Oe),ke=new Intl.DateTimeFormat(f.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(A(o[9]).toDate());return n+='<table class="raudfinn-item">',n+='<tr><th colspan=3 align="center">'+t.marker+" "+y.value.description+"</th></tr>",n+="<tr><td><b>"+l("Timepoint")+'</b></td><td colspan=2 align="right">'+ke+"</td></tr>",n+="<tr><td><b>"+l("Position")+'</b></td><td colspan=2 align="right">'+h({lng:Ce,lat:De}).format(g.value)+"</td></tr>",n+="<tr><td><b>"+l("Resolution")+'</b></td><td align="right">'+Le.toFixed(0)+"</td><td>m</td></tr>",n+='<tr><td colspan=3 class="raudfinn-item-td"></td></tr>',Object.values(Ue).forEach(H=>{t.dimensionNames&&(n+="<tr><td><b>"+l(t.dimensionNames[H.dimension])+'</b></td><td align="right">'+o[H.dimension].toFixed(2)+"</td><td>"+H.unit+"</td></tr>")}),n+="</table>",n}else return""}},datasetId:"sinmod-dataset",progressive:1e4,progressiveChunkMode:"sequential",animation:!1}]},Ie=()=>{var t,e,a,n;(t=m.value)==null||t.setOption(ae),(e=m.value)==null||e.setOption({legend:{id:"sparse",data:te.value}}),(a=m.value)==null||a.setOption({series:{name:l("Operational region"),id:"region"}}),(n=m.value)==null||n.setOption({visualMap:{id:"net-samples-visual",text:[l("Net sample"),"TBD"]},series:{name:l("Net sample",2),id:"net-samples"}}),X(),j()},Te=()=>{ee()},_=c(!0);d(Z,()=>{_.value=!0,L()}),d($,()=>{_.value=!0,L()}),d(m,(t,e)=>{_.value=!0,L()}),d(i,(t,e)=>{Te()});const L=()=>{setTimeout(()=>{if(_.value&&(_.value=!gt(be,i,m,ye),Ie()),i.value)try{i.value.invalidateSize(),F.value.addTo(i.value),x.value=i.value.getZoom(),i.value.on("moveend",t=>{const e=i.value.getBounds(),a=e.getEast()-e.getWest(),n=e.getNorth()-e.getSouth(),o=.05;p.value={lng:[e.getWest()-o*a,e.getEast()+o*a],lat:[e.getSouth()-o*n,e.getNorth()+o*n]}}),i.value.on("zoomend",t=>{x.value=i.value.getZoom()})}catch(t){console.warn("Map does not exist yet")}},50)},we=t=>{B.value!=t.selected["SINMOD - FROHAVET"]&&(B.value=t.selected["SINMOD - FROHAVET"])},xe=t=>{var e;t.playState&&!B.value&&(Ae(l("SINMOD disabled")),(e=m.value)==null||e.dispatchAction({type:"timelinePlayChange",playState:!1}))},_e=t=>{O.value=t.currentIndex};return D({doPlot:L}),(t,e)=>(ue(),me(S(et),{ref_key:"theChart",ref:m,class:"chart","manual-update":!0,autoresize:!0,option:ae,onLegendselectchanged:we,onTimelineplaychanged:xe,onTimelinechanged:_e},null,512))}}),bt=de(yt,[["__scopeId","data-v-27a3cad5"]]),At=ie({__name:"FrohavetPage",setup(ce){const D=c({});return Ze(()=>{D.value.doPlot()}),(l,f)=>(ue(),me(S($e),null,{default:I(()=>[T(S(Ge),{fullscreen:!0},{default:I(()=>[T(S(Qe),{class:"raudfinn-grid"},{default:I(()=>[T(S(Ke),{class:"raudfinn-col-0",size:"12",style:{display:"flex"}},{default:I(()=>[T(S(Ye),{class:"raudfinn-card"},{default:I(()=>[T(S(qe),{class:"raudfinn-card-content",style:{position:"relative"}},{default:I(()=>[T(bt,{ref_key:"theMap",ref:D,name:"Frohavet map"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Dt=de(At,[["__scopeId","data-v-1518ec8f"]]);export{Dt as default};
