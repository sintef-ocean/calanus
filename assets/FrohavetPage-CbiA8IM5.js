import{d as ke,u as st,F as lt,G as rt,H as R,J as it,K as i,L as u,M as Te,r as g,Z as mt,S as dt,T as ct,U as ut,$ as pt,c as de,a0 as gt,a1 as vt,a2 as ft,a3 as ht,a4 as yt,V as b,h as I,Q as Oe,b as Me,e as x,Y as bt,a5 as Nt,f as ze,X as At,p as ce,_ as Ee,D as St,w as F,E as It,i as T,j as wt,l as _t,m as xt,n as Dt,I as Ct}from"./index-DPXAEm47.js";import{u as Ft,a as Tt,n as N,o as Le,E as Ot,i as Lt,q as kt,c as Mt,s as zt,k as Et,v as Pt,m as Bt,l as Rt,g as Wt,f as Ht,j as Vt,h as Ut,t as Zt,p as $t,T as Qt,I as qt,U as Kt}from"./render-CKQRmLS9.js";import"./leaflet-CYx1M_cZ.js";const d=1e5,p=35125,Jt=ke({__name:"FroHavet",setup(Pe,{expose:W}){Ft([Lt,kt,Mt,zt,Et,Pt,Bt,Rt,Wt,Ht,Vt,Ut,Zt]);const{t:s,locale:v}=st({useScope:"local"}),{theme:ue,initOptions:pe}=Tt(),Be=lt(),w=rt(),{coordsFormat:f}=R(Be),{POIs:Re,locationActive:$}=R(w),{coords:H,locatedAt:ge}=it();i(H,()=>{const t=H.value.latitude,e=H.value.longitude,a=H.value.accuracy;t&&e&&t<1/0&&e<1/0&&ge.value&&a&&w.addPoi("locate",u.latLng(t,e),new Date(ge.value),a)}),i(Re.value,()=>{const t=w.getPoi("click"),e=w.getPoi("locate");t?V.value.setLatLng(t.position):e&&O.value.setLatLng(e.position)}),i($,()=>{m.value&&$.value==w.MarkerState.Clearable?O.value.addTo(m.value):m.value&&$.value==w.MarkerState.Placeable&&m.value.removeLayer(O.value)});const We=u.icon({iconUrl:Te("pin","svg"),iconSize:[40,40],iconAnchor:[20,39],tooltipAnchor:[5,-33],className:"raudfinn-marker"}),He=u.icon({iconUrl:Te("locate","svg"),iconSize:[40,40],iconAnchor:[20,20],tooltipAnchor:[5,0],className:"raudfinn-marker"}),V=g(u.marker([0,0],{icon:We}));V.value.bindTooltip(t=>N(V.value.getLatLng()).format(f.value));const O=g(u.marker([0,0],{icon:He}));O.value.bindTooltip(t=>{const e=w.getPoi("locate");let a="";if(e&&(a=new Intl.DateTimeFormat(v.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(e.when),a+="<br><b>",a+=s("Accuracy")+": "+e.text+"</b> m",t)){const n=t.getTooltip();if(n&&e.text&&typeof e.text=="number"&&e.text>100&&n.getElement()instanceof HTMLElement){const o=n.getElement();o&&u.DomUtil.addClass(o,"raudfinn-warning")}}return N(O.value.getLatLng()).format(f.value)+"<br>"+a});const Ve={notMerge:!1,lazyUpdate:!0},r=g({}),m=g({}),Ue=g([]),Ze=g(-1);ce(Qt,ue),ce(qt,pe),ce(Kt,Ve);const $e=async t=>{await(await At.create({message:t,duration:3e3,position:"middle"})).present()},Qe=mt(),{cascade_info:h,timeIndex:Q}=R(Qe),D=dt("frohavet");D.setSpaceStride(2);const ve={lat:[63.5,64.5],lng:[8.2,10]};D.setBoundingBox(ve),D.setTimeStride(2);const{timeStride:fe,spaceStride:qe,region:he,boundingBox:ye,activeLayer:jt,activeLayerName:Gt,sinmod_info:y}=R(D),{data:q}=ct(fe,he),{array:K}=ut(fe,qe,he,ye),{array:J}=pt(),U=g(0),X=de(()=>{var t;return((t=J.value)==null?void 0:t.length)>Q.value&&J.value[Q.value].isSuccess?J.value[Q.value].data:[[0,0,.1,.1,.2,0,.1,-.1,"2025",1,1,1,1]]}),Y=de(()=>{var t;return((t=K.value)==null?void 0:t.length)>U.value&&K.value[U.value].isSuccess?K.value[U.value].data:[[0,0,.1,.1,.2,0,.1,-.1,"2025",1,1,1,1,1,1,1,1]]}),{data:A}=gt("operational"),{data:j}=vt("samples"),{data:G}=ft("silcam"),{data:L}=ht("vehicles"),Ke=yt(),{timeInterval:k}=R(Ke);i(k,()=>{Je()});const Je=()=>{var t;try{for(const e of["net-samples","silcam","vehicle"])(t=r.value)==null||t.setOption({dataset:{fromDatasetId:e+"-dataset",id:e+"-filtered",transform:{type:"filter",config:{and:[{dimension:"datetime",gt:b(k)[0],lt:b(k)[1],parser:"time"}]}}}})}catch(e){}},C=g(10.5),S=g(b(ye));i(C,()=>{const t=C.value,e=a=>a>11?1:a<=11&&a>10?2:(a<=10&&a>7,3);D.setSpaceStride(e(t)),C.value>11&&A.value?ee({lat:[A.value.lat[0],A.value.lat[1]],lng:[A.value.lng[0],A.value.lng[1]]}):ee(S)});const ee=t=>{var e;try{(e=r.value)==null||e.setOption({dataset:{fromDatasetId:"sinmod-dataset",id:"sinmod-dataset-filtered",transform:{type:"filter",config:{and:[{dimension:"lng0",">":b(t).lng[0],"<":b(t).lng[1]},{dimension:"lat0",">":b(t).lat[0],"<":b(t).lat[1]}]}}}})}catch(a){}};i(S,()=>{try{C.value<=11?ee(S):D.setBoundingBox(ve)}catch(t){}});const Xe=t=>{const e=new Array;e.push({id:"operational-area",dimensions:[{type:"number",name:"lng0"},{type:"number",name:"lat0"},{type:"number",name:"lng1"},{type:"number",name:"lat1"}],sourceHeader:1,source:[["lng0","lat0","lng1","lat1"],[0,0,.1,0]]}),e.push({id:"net-samples-dataset",dimensions:[{type:"number",name:"lat"},{type:"number",name:"lng"},{type:"time",name:"datetime"},"density"],sourceHeader:1,source:[["lat","lon","datetime","density"],[0,0,"2025-05-16T00:00:00.0",0]]}),e.push({id:"silcam-dataset",dimensions:[{type:"number",name:"lng0"},{type:"number",name:"lat0"},{type:"number",name:"lng1"},{type:"number",name:"lat1"},{type:"time",name:"datetime"},"density"],sourceHeader:1,source:[["lng0","lat0","lng1","lat1","datetime","density"],[0,0,.01,0,"2025-05-16T00:00:00+0000",0]]}),e.push({id:"vehicle-dataset",dimensions:[{type:"number",name:"id"},{type:"ordinal",name:"vehicle_id"},{type:"number",name:"lng0"},{type:"number",name:"lat0"},{type:"number",name:"lng1"},{type:"number",name:"lat1"},{type:"time",name:"datetime"}],sourceHeader:1,source:[["id","vehicle_id","lng0","lat0","lng1","lat1","datetime"],[0,"none",0,0,.1,0,"2025-05-17T00:00:00"]]}),e.push({id:"sinmod-dataset",dimensions:[{type:"float",name:"id"},{type:"float",name:"lng0"},{type:"float",name:"lat0"},{type:"float",name:"lng1"},{type:"float",name:"lat1"},{type:"float",name:"lng2"},{type:"float",name:"lat2"},{type:"float",name:"lng3"},{type:"float",name:"lat3"},{type:"time",name:"time"},{type:"float",name:"calanus_finmarchicus"},{type:"float",name:"diatoms"},{type:"float",name:"flagellates"},{type:"float",name:"temperature"},{type:"float",name:"salinity"},{type:"float",name:"u_east"},{type:"float",name:"v_north"},{type:"float",name:"current"}],source:{id:new Float64Array(d).map(()=>NaN),lng0:new Float64Array(d).map(()=>NaN),lat0:new Float64Array(d).map(()=>NaN),lng1:new Float64Array(d).map(()=>NaN),lat1:new Float64Array(d).map(()=>NaN),lng2:new Float64Array(d).map(()=>NaN),lat2:new Float64Array(d).map(()=>NaN),lng3:new Float64Array(d).map(()=>NaN),lat3:new Float64Array(d).map(()=>NaN),time:new Array(d).map(()=>""),calanus_finmarchicus:new Float64Array(d).map(()=>NaN),diatoms:new Float64Array(d).map(()=>NaN),flagellates:new Float64Array(d).map(()=>NaN),temperature:new Float64Array(d).map(()=>NaN),salinity:new Float64Array(d).map(()=>NaN),u_east:new Float64Array(d).map(()=>NaN),v_north:new Float64Array(d).map(()=>NaN),current:new Float64Array(d).map(()=>NaN)}}),e.push({id:"cascade-dataset",dimensions:[{type:"float",name:"id"},{type:"float",name:"lng0"},{type:"float",name:"lat0"},{type:"float",name:"lng1"},{type:"float",name:"lat1"},{type:"float",name:"lng2"},{type:"float",name:"lat2"},{type:"float",name:"lng3"},{type:"float",name:"lat3"},{type:"time",name:"time"},{type:"float",name:"biomass_estimate"},{type:"float",name:"biomass_estimate_top_10m"},{type:"float",name:"uncertainty_biomass"},{type:"float",name:"information_gain"}],source:{id:new Float64Array(p).map(()=>NaN),lng0:new Float64Array(p).map(()=>NaN),lat0:new Float64Array(p).map(()=>NaN),lng1:new Float64Array(p).map(()=>NaN),lat1:new Float64Array(p).map(()=>NaN),lng2:new Float64Array(p).map(()=>NaN),lat2:new Float64Array(p).map(()=>NaN),lng3:new Float64Array(p).map(()=>NaN),lat3:new Float64Array(p).map(()=>NaN),time:new Array(p).map(()=>""),biomass_estimate:new Float64Array(p).map(()=>NaN),biomass_estimate_top_10m:new Float64Array(p).map(()=>NaN),uncertainty_biomass:new Float64Array(p).map(()=>NaN),information_gain:new Float64Array(p).map(()=>NaN)}}),e.push({fromDatasetId:"sinmod-dataset",id:"sinmod-dataset-filtered",transform:{type:"filter",config:{and:[{dimension:"lng0",">":S.value.lng[0],"<":S.value.lng[1]},{dimension:"lat0",">":S.value.lat[0],"<":S.value.lat[1]}]}}});for(const a of["net-samples","silcam","vehicle"])e.push({fromDatasetId:a+"-dataset",id:a+"-filtered",transform:{type:"filter",config:{and:[{dimension:"datetime",gt:b(k)[0],lt:b(k)[1],parser:"time"}]}}});return e},te=g(!0),be=()=>{var t;try{(t=r.value)==null||t.setOption({visualMap:{id:"sinmod",text:y.value.text,show:!0,right:0,padding:8,top:172,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"],colorAlpha:[0,0]},type:"continuous",seriesIndex:4,precision:2,inverse:!1,dimension:y.value.dimension,min:y.value.color_range[0],max:y.value.color_range[1],range:y.value.visible_range,inRange:{color:y.value.colors}}})}catch(e){}},Ne=()=>{var t;try{(t=r.value)==null||t.setOption({visualMap:{id:"cascade",text:h.value.text,show:!0,right:0,padding:8,top:0,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"],colorAlpha:[0,0]},type:"continuous",seriesIndex:5,precision:2,inverse:!1,dimension:h.value.dimension,min:h.value.color_range[0],max:h.value.color_range[1],range:h.value.visible_range,inRange:{color:h.value.colors}}})}catch(e){}},Ae=()=>{var t;A.value&&((t=r.value)==null||t.setOption({dataset:{id:"operational-area",source:A.value.source}}))},Se=()=>{var t;j.value&&((t=r.value)==null||t.setOption({dataset:{id:"net-samples-dataset",source:j.value}}))},Ie=()=>{var t;G.value&&((t=r.value)==null||t.setOption({dataset:{id:"silcam-dataset",source:G.value}}))},we=()=>{var t;L.value&&((t=r.value)==null||t.setOption({visualMap:{id:"vehicle-visual",pieces:L.value.pieces,max:L.value.pieces.length-1},dataset:{id:"vehicle-dataset",source:L.value.source}}))};i(y,()=>{be()}),i(h,()=>{Ne()}),i(q,()=>{_e()}),i(Y,()=>{xe()}),i(X,()=>{De()}),i(A,()=>{Ae()}),i(j,()=>{Se()}),i(G,()=>{Ie()}),i(L,()=>{we()});const _e=()=>{var e,a,n;const t=new Array;(e=q.value)==null||e.timestrings.forEach((o,l)=>{var c;t.push({series:[{},{},{},{},{datasetId:"sinmod-dataset-"+Number(l).toString(10)},{}]}),(c=r.value)==null||c.setOption({dataset:{id:"sinmod-dataset-"+Number(l).toString(10),fromDatasetId:"sinmod-dataset-filtered",transform:{type:"filter",config:{dimension:"time","=":o,parser:"time"},print:!1}}})}),(n=r.value)==null||n.setOption({timeline:{data:(a=q.value)==null?void 0:a.timestrings},options:t})},xe=async()=>{var t;Y.value&&((t=r.value)==null||t.setOption({dataset:{id:"sinmod-dataset",source:Y.value}}))},De=async()=>{var t;X.value&&((t=r.value)==null||t.setOption({dataset:{id:"cascade-dataset",source:X.value}}))},Ce=de(()=>[{name:s("Operational region")},{name:s("Net sample",2),icon:"pin"},{name:"SILCAM",icon:"diamond"}]),Fe={backgroundColor:"rgba(255,255,255,0)",legend:[{id:"sparse",data:Ce.value,textStyle:{fontSize:14},top:1,borderWidth:1,borderRadius:2,left:"20%",orient:"vertical",show:!0},{id:"dense",data:["SINMOD - FROHAVET","CASCADE"],textStyle:{fontSize:14},top:1,borderWidth:1,borderRadius:2,right:"center",orient:"vertical",show:!0,selected:{"SINMOD - FROHAVET":!0,CASCADE:!0}}],timeline:{left:"5%",right:"5%",bottom:10,show:!0,axisType:"category",symbol:"roundRect",realtime:!0,loop:!0,autoPlay:!1,controlStyle:{showPlayBtn:!0,stopIcon:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAGpJREFUWAntlkEKwDAIBKP+/znt82xrD6FIpSSHXDpCQBeXDXOyNQoCBQEz21T1eL7QivUuj/qkO1MTwUm6R3cvPbEw6tO3kJUaH4AABCAAAQhAAAIQgEBJQET2fJxe2udZPuvLWcz/IXACuUMWMJDzUAgAAAAASUVORK5CYII=",playIcon:"path://M41.365908,29.4271388 L41.3664843,29.4265626 L26.3794329,19.1497136 L26.3747509,19.1541315 C26.0642269,18.8592621 25.6429678,18.677793 25.1786824,18.677793 C24.2236284,18.677793 23.4494433,19.4443188 23.4494433,20.3905371 C23.4494433,20.910214 23.4270417,21.9276946 23.4494433,21.9056292 L23.4494433,30.6673861 L23.4494433,39.8901629 C23.4494433,39.8977982 23.4494433,40.4825908 23.4494433,40.9444991 C23.4494433,41.8901412 24.2236284,42.656691 25.1786824,42.656691 C25.6447205,42.656691 26.0677564,42.4740454 26.3782564,42.1764869 L26.3794329,42.1770872 L41.3664843,31.9005503 L41.3659081,31.8996379 C41.6917266,31.5882735 41.894997,31.1514078 41.894997,30.6670739 C41.894997,30.6658974 41.894997,30.6650091 41.894997,30.6635444 C41.894997,30.6623679 41.894997,30.6609273 41.894997,30.6600389 C41.894997,30.175657 41.6917265,29.7384792 41.365908,29.4271388 Z"},symbolSize:15,playInterval:1500,itemStyle:{borderWidth:2},emphasis:{label:{fontSize:14,fontWeight:"bolder"}},checkpointStyle:{symbol:"pin",symbolSize:16},lineStyle:{width:3},label:{align:"left",fontSize:14,fontWeight:"bold",padding:2,formatter:function(t,e){if(e%6==0){const a={month:"short",day:"numeric",timeZoneName:"short",hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(v.value,a).format(new Date(I(t).toDate()))}else{if(e%6==1)return"";{const a={hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(v.value,a).format(new Date(I(t).toDate()))}}}},tooltip:{textStyle:{fontSize:14},formatter:t=>new Intl.DateTimeFormat(v.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(new Date(I(t.name).toDate()))}},tooltip:{},toolbox:{itemSize:24,top:32,left:64,orient:"vertical",feature:{saveAsImage:{name:"sfiharvest",backgroundColor:"rgba(255,255,255,1)",excludeComponents:["toolbox"],iconStyle:{borderColor:"#4170f0",borderWidth:2},emphasis:{iconStyle:{textFill:"rgba(0,0,0,1)",textBackgroundColor:"rgba(255,255,255,0.7)",textPadding:4}}}}},lmap:{attributionControl:!1,center:[9,64],zoom:10.5,minZoom:8,resizeEnable:!0,renderOnMoving:!1,echartsLayerInteractive:!0,largeMode:!1,zoomControl:!1,zoomSnap:.5,zoomDelta:.5,zoomAnimation:!1,fadeAnimation:!1,wheelPxPerZoomLevel:120},dataset:Xe(),visualMap:[{id:"net-samples-visual",show:!0,right:0,bottom:60,padding:8,itemWidth:24,itemHeight:80,handleSize:"140%",calculable:!0,realtime:!0,inRange:{color:Oe({colormap:"density",nshades:20,format:"rgbaString",alpha:.8})},outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"]},type:"continuous",precision:2,seriesIndex:1,dimension:3,text:[s("Net sample"),"TBD"],min:0,max:100},{id:"silcam-visual",show:!0,right:0,bottom:232,padding:8,itemWidth:24,itemHeight:80,text:["SILCAM","TBD"],handleSize:"140%",calculable:!0,realtime:!0,inRange:{color:Oe({colormap:"cdom",nshades:9,format:"rgbaString",alpha:.8})},outOfRange:{color:["rgba(127,127,127,0.2)","rgba(127,127,127,0.2)"]},type:"continuous",precision:2,seriesIndex:2,dimension:5,min:0,max:100},{id:"vehicle-visual",type:"piecewise",top:0,right:"20%",textStyle:{fontSize:14},min:0,max:1,seriesIndex:3,splitNumber:1,dimension:0,pieces:[{value:0,label:"none",color:"#cccccc"}]},{id:"sinmod",show:!0},{id:"cascade",show:!0}],series:[{type:"custom",coordinateSystem:"lmap",name:s("Operational region"),id:"region",datasetId:"operational-area",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,tooltip:{position:(t,e,a,n,o)=>({bottom:60,right:150}),formatter:t=>{if(t.value&&t.dimensionNames){let e="";const a=t.value,n=a[0],o=a[1],l=a[2],c=a[3];return e+='<table class="raudfinn-item">',e+='<tr><th colspan=3 align="center">'+t.marker+" "+s("Operational region")+"</th></tr>",e+="<tr><td><b>"+s("Edge",1)+'</b></td><td colspan=2 align="right">'+N({lng:n,lat:o}).format(f.value)+"</td></tr>",e+="<tr><td><b>"+s("Edge",1)+'</b></td><td colspan=2 align="right">'+N({lng:l,lat:c}).format(f.value)+"</td></tr>",e+="</table>",e}else return""}},renderItem:(t,e)=>{const a=[e.value("lng0"),e.value("lat0"),e.value("lng1"),e.value("lat1")];for(let l=0;l<a.length;l++)if(isNaN(a[l]))return{type:"text"};const n=e.coord([e.value("lng0"),e.value("lat0")]),o=e.coord([e.value("lng1"),e.value("lat1")]);return{type:"line",shape:{x1:n[0],y1:n[1],x2:o[0],y2:o[1]},style:{lineWidth:2,stroke:"#b7232d"},emphasis:{style:{lineWidth:3,stroke:"#b7232d"}}}}},{type:"scatter",coordinateSystem:"lmap",name:s("Net sample",2),id:"net-samples",datasetId:"net-samples-filtered",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,symbol:"pin",symbolSize:t=>Math.max(20,t[3]/2.5),encode:{lng:"lng",lat:"lat",value:"density"},tooltip:{position:(t,e,a,n,o)=>({bottom:60,right:150}),formatter:t=>{if(t.value&&t.dimensionNames){let e="";const a=t.value,n=a[0],o=a[1],l=a[3],c=new Intl.DateTimeFormat(v.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(I(a[2]).toDate());return e+='<table class="raudfinn-item">',e+='<tr><th colspan=3 align="center">'+t.marker+" "+s("Net sample")+"</th></tr>",e+="<tr><td><b>"+s("Timepoint")+'</b></td><td colspan=2 align="right">'+c+"</td></tr>",e+="<tr><td><b>"+s("Position")+'</b></td><td colspan=2 align="right">'+N({lng:n,lat:o}).format(f.value)+"</td></tr>",e+="<tr><td><b>"+s("Measurement")+'</b></td><td align="right">'+l.toFixed(2)+"</td><td>TBD</td></tr>",e+="</table>",e}else return""}}},{type:"custom",coordinateSystem:"lmap",name:"SILCAM",id:"silcam",z:3,datasetId:"silcam-filtered",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,tooltip:{position:(t,e,a,n,o)=>({bottom:60,right:150}),formatter:t=>{if(t.value&&t.dimensionNames){let e="";const a=t.value,n=a[0],o=a[1],l=a[5],c=new Intl.DateTimeFormat(v.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(I(a[4]).toDate());return e+='<table class="raudfinn-item">',e+='<tr><th colspan=3 align="center">'+t.marker+" SILCAM</th></tr>",e+="<tr><td><b>"+s("Timepoint")+'</b></td><td colspan=2 align="right">'+c+"</td></tr>",e+="<tr><td><b>"+s("Position")+'</b></td><td colspan=2 align="right">'+N({lng:n,lat:o}).format(f.value)+"</td></tr>",e+="<tr><td><b>"+s("Measurement")+'</b></td><td align="right">'+l.toFixed(2)+"</td><td>TBD</td></tr>",e+="</table>",e}else return""}},renderItem:(t,e)=>{const a=[e.value("lng0"),e.value("lat0"),e.value("lng1"),e.value("lat1")];for(let l=0;l<a.length;l++)if(isNaN(a[l]))return{type:"text"};const n=e.coord([e.value("lng0"),e.value("lat0")]),o=e.coord([e.value("lng1"),e.value("lat1")]);return{type:"line",shape:{x1:n[0],y1:n[1],x2:o[0],y2:o[1]},style:{lineWidth:2,stroke:e.visual("color")},emphasis:{style:{lineWidth:3,stroke:e.visual("color")}}}}},{type:"custom",coordinateSystem:"lmap",name:s("Vehicle",2),id:"vehicles",z:3,datasetId:"vehicle-filtered",progressive:1e4,progressiveChunkMode:"sequential",animation:!1,itemStyle:{borderColor:"#555"},renderItem:(t,e)=>{const a=[e.value("lng0"),e.value("lat0"),e.value("lng1"),e.value("lat1")];for(let l=0;l<a.length;l++)if(isNaN(a[l]))return{type:"text"};const n=e.coord([e.value("lng0"),e.value("lat0")]),o=e.coord([e.value("lng1"),e.value("lat1")]);return{type:"line",shape:{x1:n[0],y1:n[1],x2:o[0],y2:o[1]},style:{lineWidth:2,stroke:e.visual("color")},emphasis:{style:{lineWidth:3,stroke:e.visual("color")}}}},tooltip:{position:(t,e,a,n,o)=>({bottom:60,right:150}),formatter:t=>{if(t.value&&t.dimensionNames){let e="";const a=t.value,n=a[3],o=a[2];a[5],a[4];const l=new Intl.DateTimeFormat(v.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(I(a[6]).toDate());return e+='<table class="raudfinn-item">',e+='<tr><th colspan=3 align="center">'+t.marker+" "+s("Vehicle")+"</th></tr>",e+="<tr><td><b>"+s("Vehicle")+'</b></td><td colspan=2 align="right">'+a[1]+"</td></tr>",e+="<tr><td><b>"+s("Timepoint")+'</b></td><td colspan=2 align="right">'+l+"</td></tr>",e+="<tr><td><b>"+s("Position")+'</b></td><td colspan=2 align="right">'+N({lng:n,lat:o}).format(f.value)+"</td></tr>",e+="</table>",e}else return""}}},{type:"custom",z:1,coordinateSystem:"lmap",name:"SINMOD - FROHAVET",id:"frohavet",renderItem:Le(y),tooltip:{position:(t,e,a,n,o)=>({bottom:60,left:20}),formatter:t=>{var e,a;if(t.value&&t.dimensionNames){let n="";const o=t.value,l=o[2],c=o[1],z=o[4],E=o[3],ae=o[6],ne=o[5],P=o[8],B=o[7],oe=.25*(l+z+ae+P),se=.25*(c+E+ne+B),le=(e=m.value)==null?void 0:e.distance(u.latLng(l,c),u.latLng(z,E)),re=(a=m.value)==null?void 0:a.distance(u.latLng(l,c),u.latLng(P,B)),ie=.5*(le+re),me=new Intl.DateTimeFormat(v.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(I(o[9]).toDate());return n+='<table class="raudfinn-item">',n+='<tr><th colspan=3 align="center">'+t.marker+" "+y.value.description+"</th></tr>",n+="<tr><td><b>"+s("Timepoint")+'</b></td><td colspan=2 align="right">'+me+"</td></tr>",n+="<tr><td><b>"+s("Position")+'</b></td><td colspan=2 align="right">'+N({lng:se,lat:oe}).format(f.value)+"</td></tr>",n+="<tr><td><b>"+s("Resolution")+'</b></td><td align="right">'+ie.toFixed(0)+"</td><td>m</td></tr>",n+='<tr><td colspan=3 class="raudfinn-item-td"></td></tr>',Object.values(bt).forEach(_=>{t.dimensionNames&&(n+="<tr><td><b>"+s(t.dimensionNames[_.dimension])+'</b></td><td align="right">'+o[_.dimension].toFixed(2)+"</td><td>"+_.unit+"</td></tr>")}),n+="</table>",n}else return""}},datasetId:"sinmod-dataset",progressive:1e4,progressiveChunkMode:"sequential",animation:!1},{type:"custom",z:1,coordinateSystem:"lmap",name:"CASCADE",id:"cascade",renderItem:Le(h),tooltip:{position:(t,e,a,n,o)=>({bottom:60,left:20}),formatter:t=>{var e,a;if(t.value&&t.dimensionNames){let n="";const o=t.value,l=o[2],c=o[1],z=o[4],E=o[3],ae=o[6],ne=o[5],P=o[8],B=o[7],oe=.25*(l+z+ae+P),se=.25*(c+E+ne+B),le=(e=m.value)==null?void 0:e.distance(u.latLng(l,c),u.latLng(z,E)),re=(a=m.value)==null?void 0:a.distance(u.latLng(l,c),u.latLng(P,B)),ie=.5*(le+re),me=new Intl.DateTimeFormat(v.value,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZoneName:"short"}).format(I(o[9]).toDate());return n+='<table class="raudfinn-item">',n+='<tr><th colspan=3 align="center">'+t.marker+" "+h.value.description+"</th></tr>",n+="<tr><td><b>"+s("Timepoint")+'</b></td><td colspan=2 align="right">'+me+"</td></tr>",n+="<tr><td><b>"+s("Position")+'</b></td><td colspan=2 align="right">'+N({lng:se,lat:oe}).format(f.value)+"</td></tr>",n+="<tr><td><b>"+s("Resolution")+'</b></td><td align="right">'+ie.toFixed(0)+"</td><td>m</td></tr>",n+='<tr><td colspan=3 class="raudfinn-item-td"></td></tr>',Object.values(Nt).forEach(_=>{t.dimensionNames&&(n+="<tr><td><b>"+s(t.dimensionNames[_.dimension])+'</b></td><td align="right">'+o[_.dimension].toFixed(2)+"</td><td>"+_.unit+"</td></tr>")}),n+="</table>",n}else return""}},datasetId:"cascade-dataset",progressive:1e4,progressiveChunkMode:"sequential",animation:!1}]},Ye=()=>{var t,e,a,n;(t=r.value)==null||t.setOption(Fe),(e=r.value)==null||e.setOption({legend:{id:"sparse",data:Ce.value}}),(a=r.value)==null||a.setOption({series:{name:s("Operational region"),id:"region"}}),(n=r.value)==null||n.setOption({visualMap:{id:"net-samples-visual",text:[s("Net sample"),"TBD"]},series:{name:s("Net sample",2),id:"net-samples"}}),be(),Ne(),_e()},je=()=>{xe(),De(),Ae(),Ie(),Se(),we()},M=g(!0);i(ue,()=>{M.value=!0,Z()}),i(pe,()=>{M.value=!0,Z()}),i(r,(t,e)=>{M.value=!0,Z()}),i(m,(t,e)=>{je()});const Z=()=>{setTimeout(()=>{if(M.value&&(M.value=!$t(Ze,m,r,Ue),Ye()),m.value)try{m.value.invalidateSize(),V.value.addTo(m.value),C.value=m.value.getZoom(),m.value.on("moveend",t=>{const e=m.value.getBounds(),a=e.getEast()-e.getWest(),n=e.getNorth()-e.getSouth(),o=.05;S.value={lng:[e.getWest()-o*a,e.getEast()+o*a],lat:[e.getSouth()-o*n,e.getNorth()+o*n]}}),m.value.on("zoomend",t=>{C.value=m.value.getZoom()})}catch(t){console.warn("Map does not exist yet")}},50)},Ge=t=>{te.value!=t.selected["SINMOD - FROHAVET"]&&(te.value=t.selected["SINMOD - FROHAVET"])},et=t=>{var e;t.playState&&!te.value&&($e(s("SINMOD disabled")),(e=r.value)==null||e.dispatchAction({type:"timelinePlayChange",playState:!1}))},tt=t=>{U.value=t.currentIndex},at=t=>{setTimeout(()=>{r.value&&r.value.dispatchAction({type:"hideTip"})},3e3)};return W({doPlot:Z}),(t,e)=>(ze(),Me(x(Ot),{ref_key:"theChart",ref:r,class:"chart","manual-update":!0,autoresize:!0,option:Fe,onClick:at,onLegendselectchanged:Ge,onTimelineplaychanged:et,onTimelinechanged:tt},null,512))}}),Xt=Ee(Jt,[["__scopeId","data-v-b89f4124"]]),Yt=ke({__name:"FrohavetPage",setup(Pe){const W=g({});return St(()=>{W.value.doPlot()}),(s,v)=>(ze(),Me(x(It),null,{default:F(()=>[T(x(Ct),{fullscreen:!0},{default:F(()=>[T(x(wt),{class:"raudfinn-grid"},{default:F(()=>[T(x(_t),{class:"raudfinn-col-0",size:"12",style:{display:"flex"}},{default:F(()=>[T(x(xt),{class:"raudfinn-card"},{default:F(()=>[T(x(Dt),{class:"raudfinn-card-content",style:{position:"relative"}},{default:F(()=>[T(Xt,{ref_key:"theMap",ref:W,name:"Frohavet map"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),na=Ee(Yt,[["__scopeId","data-v-1518ec8f"]]);export{na as default};
