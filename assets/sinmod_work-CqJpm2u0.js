var Ph=Object.defineProperty;var Ja=t=>{throw TypeError(t)};var Rh=(t,e,r)=>e in t?Ph(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var qh=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var vt=(t,e,r)=>Rh(t,typeof e!="symbol"?e+"":e,r),wi=(t,e,r)=>e.has(t)||Ja("Cannot "+r);var st=(t,e,r)=>(wi(t,e,"read from private field"),r?r.call(t):e.get(t)),jt=(t,e,r)=>e.has(t)?Ja("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Tt=(t,e,r,n)=>(wi(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Ai=(t,e,r)=>(wi(t,e,"access private method"),r);var sD=qh(it=>{/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tu=Symbol("Comlink.proxy"),$h=Symbol("Comlink.endpoint"),kh=Symbol("Comlink.releaseProxy"),Ei=Symbol("Comlink.finalizer"),Pn=Symbol("Comlink.thrown"),Iu=t=>typeof t=="object"&&t!==null||typeof t=="function",zh={canHandle:t=>Iu(t)&&t[Tu],serialize(t){const{port1:e,port2:r}=new MessageChannel;return la(t,e),[r,[r]]},deserialize(t){return t.start(),Vh(t)}},Lh={canHandle:t=>Iu(t)&&Pn in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},Ou=new Map([["proxy",zh],["throw",Lh]]);function Uh(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function la(t,e=globalThis,r=["*"]){e.addEventListener("message",function n(i){if(!i||!i.data)return;if(!Uh(r,i.origin)){console.warn("Invalid origin '".concat(i.origin,"' for comlink proxy"));return}const{id:a,type:s,path:u}=Object.assign({path:[]},i.data),h=(i.data.argumentList||[]).map(nr);let o;try{const f=u.slice(0,-1).reduce((c,v)=>c[v],t),l=u.reduce((c,v)=>c[v],t);switch(s){case"GET":o=l;break;case"SET":f[u.slice(-1)[0]]=nr(i.data.value),o=!0;break;case"APPLY":o=l.apply(f,h);break;case"CONSTRUCT":{const c=new l(...h);o=Hh(c)}break;case"ENDPOINT":{const{port1:c,port2:v}=new MessageChannel;la(t,v),o=ci(c,[c])}break;case"RELEASE":o=void 0;break;default:return}}catch(f){o={value:f,[Pn]:0}}Promise.resolve(o).catch(f=>({value:f,[Pn]:0})).then(f=>{const[l,c]=Gn(f);e.postMessage(Object.assign(Object.assign({},l),{id:a}),c),s==="RELEASE"&&(e.removeEventListener("message",n),Pu(e),Ei in t&&typeof t[Ei]=="function"&&t[Ei]())}).catch(f=>{const[l,c]=Gn({value:new TypeError("Unserializable return value"),[Pn]:0});e.postMessage(Object.assign(Object.assign({},l),{id:a}),c)})}),e.start&&e.start()}function jh(t){return t.constructor.name==="MessagePort"}function Pu(t){jh(t)&&t.close()}function Vh(t,e){const r=new Map;return t.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const s=r.get(a.id);if(s)try{s(a)}finally{r.delete(a.id)}}),ji(t,r,[],e)}function xn(t){if(t)throw new Error("Proxy has been released and is not useable")}function Ru(t){return mr(t,new Map,{type:"RELEASE"}).then(()=>{Pu(t)})}const jn=new WeakMap,Vn="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(jn.get(t)||0)-1;jn.set(t,e),e===0&&Ru(t)});function Gh(t,e){const r=(jn.get(e)||0)+1;jn.set(e,r),Vn&&Vn.register(t,e,t)}function Wh(t){Vn&&Vn.unregister(t)}function ji(t,e,r=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(s,u){if(xn(i),u===kh)return()=>{Wh(a),Ru(t),e.clear(),i=!0};if(u==="then"){if(r.length===0)return{then:()=>a};const h=mr(t,e,{type:"GET",path:r.map(o=>o.toString())}).then(nr);return h.then.bind(h)}return ji(t,e,[...r,u])},set(s,u,h){xn(i);const[o,f]=Gn(h);return mr(t,e,{type:"SET",path:[...r,u].map(l=>l.toString()),value:o},f).then(nr)},apply(s,u,h){xn(i);const o=r[r.length-1];if(o===$h)return mr(t,e,{type:"ENDPOINT"}).then(nr);if(o==="bind")return ji(t,e,r.slice(0,-1));const[f,l]=Qa(h);return mr(t,e,{type:"APPLY",path:r.map(c=>c.toString()),argumentList:f},l).then(nr)},construct(s,u){xn(i);const[h,o]=Qa(u);return mr(t,e,{type:"CONSTRUCT",path:r.map(f=>f.toString()),argumentList:h},o).then(nr)}});return Gh(a,t),a}function Zh(t){return Array.prototype.concat.apply([],t)}function Qa(t){const e=t.map(Gn);return[e.map(r=>r[0]),Zh(e.map(r=>r[1]))]}const qu=new WeakMap;function ci(t,e){return qu.set(t,e),t}function Hh(t){return Object.assign(t,{[Tu]:!0})}function Gn(t){for(const[e,r]of Ou)if(r.canHandle(t)){const[n,i]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},i]}return[{type:"RAW",value:t},qu.get(t)||[]]}function nr(t){switch(t.type){case"HANDLER":return Ou.get(t.name).deserialize(t.value);case"RAW":return t.value}}function mr(t,e,r,n){return new Promise(i=>{const a=Jh();e.set(a,i),t.start&&t.start(),t.postMessage(Object.assign({id:a},r),n)})}function Jh(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class mn extends Error{constructor(e,r={}){super("Node not found: ".concat(e),r),this.name="NodeNotFoundError"}}class ca extends Error{constructor(e){super("Missing key: ".concat(e)),this.name="KeyError"}}var ye;class $u{constructor(e,r,n){jt(this,ye);typeof e=="number"?Tt(this,ye,new Uint8Array(e)):e instanceof ArrayBuffer?Tt(this,ye,new Uint8Array(e,r,n)):Tt(this,ye,new Uint8Array(Array.from(e,i=>i?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return st(this,ye).byteOffset}get byteLength(){return st(this,ye).byteLength}get buffer(){return st(this,ye).buffer}get length(){return st(this,ye).length}get(e){let r=st(this,ye)[e];return typeof r=="number"?r!==0:r}set(e,r){st(this,ye)[e]=r?1:0}fill(e){st(this,ye).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}ye=new WeakMap;var Cr;class da{constructor(e,r,n,i){vt(this,"_data");vt(this,"chars");jt(this,Cr);if(this.chars=e,Tt(this,Cr,new TextEncoder),typeof r=="number")this._data=new Uint8Array(r*e);else if(r instanceof ArrayBuffer)i&&(i=i*e),this._data=new Uint8Array(r,n,i);else{let a=Array.from(r);this._data=new Uint8Array(a.length*e);for(let s=0;s<a.length;s++)this.set(s,a[s])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const r=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(r).replace(/\x00/g,"")}set(e,r){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);n.fill(0),n.set(st(this,Cr).encode(r))}fill(e){const r=st(this,Cr).encode(e);for(let n=0;n<this.length;n++)this._data.set(r,n*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Cr=new WeakMap;var ie;const Va=class Va{constructor(e,r,n,i){jt(this,ie);vt(this,"chars");if(this.chars=e,typeof r=="number")Tt(this,ie,new Int32Array(r*e));else if(r instanceof ArrayBuffer)i&&(i*=e),Tt(this,ie,new Int32Array(r,n,i));else{const a=r,s=new Va(e,1);Tt(this,ie,new Int32Array(function*(){for(let u of a)s.set(0,u),yield*st(s,ie)}()))}}get BYTES_PER_ELEMENT(){return st(this,ie).BYTES_PER_ELEMENT*this.chars}get byteLength(){return st(this,ie).byteLength}get byteOffset(){return st(this,ie).byteOffset}get buffer(){return st(this,ie).buffer}get length(){return st(this,ie).length/this.chars}get(e){const r=this.chars*e;let n="";for(let i=0;i<this.chars;i++)n+=String.fromCodePoint(st(this,ie)[r+i]);return n.replace(/\u0000/g,"")}set(e,r){var a;const n=this.chars*e,i=st(this,ie).subarray(n,n+this.chars);i.fill(0);for(let s=0;s<this.chars;s++)i[s]=(a=r.codePointAt(s))!=null?a:0}fill(e){this.set(0,e);let r=st(this,ie).subarray(0,this.chars);for(let n=1;n<this.length;n++)st(this,ie).set(r,n*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};ie=new WeakMap;let Zr=Va;function pn(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Xa(t,e){const r=e/2,n=e-1;let i=0;for(let a=0;a<t.length;a+=e)for(let s=0;s<r;s+=1)i=t[a+s],t[a+s]=t[a+n-s],t[a+n-s]=i}function ku(t){if(t==="v2:object")return globalThis.Array;let e=t.match(/v2:([US])(\d+)/);if(e){let[,n,i]=e;return(n==="U"?Zr:da).bind(null,Number(i))}let r={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float16:globalThis.Float16Array,float32:Float32Array,float64:Float64Array,bool:$u}[t];return Ht(r,"Unknown or unsupported data_type: ".concat(t)),r}function sr(t,e){const r=t.length;typeof e=="string"&&(e=e==="C"?Array.from({length:r},(a,s)=>s):Array.from({length:r},(a,s)=>r-1-s)),Ht(r===e.length,"Order length must match the number of dimensions.");let n=1,i=new Array(r);for(let a=e.length-1;a>=0;a--)i[e[a]]=n,n*=t[e[a]];return i}function Qh({name:t,configuration:e}){var r,n;if(t==="default"){const i=(r=e==null?void 0:e.separator)!=null?r:"/";return a=>["c",...a].join(i)}if(t==="v2"){const i=(n=e==null?void 0:e.separator)!=null?n:".";return a=>a.join(i)||"0"}throw new Error("Unknown chunk key encoding: ".concat(t))}function Xh(t){var a;if(t==="|O")return{data_type:"v2:object"};let e=t.match(/^([<|>])(.*)$/);Ht(e,"Invalid dtype: ".concat(t));let[,r,n]=e,i=(a={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f2:"float16",f4:"float32",f8:"float64"}[n])!=null?a:n.startsWith("S")||n.startsWith("U")?"v2:".concat(n):void 0;return Ht(i,"Unsupported or unknown dtype: ".concat(t)),r==="|"?{data_type:i}:{data_type:i,endian:r==="<"?"little":"big"}}function Yh(t,e={}){var i,a;let r=[],n=Xh(t.dtype);t.order==="F"&&r.push({name:"transpose",configuration:{order:"F"}}),"endian"in n&&n.endian==="big"&&r.push({name:"bytes",configuration:{endian:"big"}});for(let{id:s,...u}of(i=t.filters)!=null?i:[])r.push({name:s,configuration:u});if(t.compressor){let{id:s,...u}=t.compressor;r.push({name:s,configuration:u})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:n.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:(a=t.dimension_separator)!=null?a:"."}},codecs:r,fill_value:t.fill_value,attributes:e}}function Kh(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function tf(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let r=t==="bool";if(e==="boolean")return r;let n=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return n;let i=t==="int64"||t==="uint64";if(e==="bigint")return i;let a=t==="v2:object";return e==="object"?a:!n&&!i&&!r&&!a}function ef(t){return(t==null?void 0:t.name)==="sharding_indexed"}function zu(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}function Lu(t,...e){if(!e.some(r=>t instanceof r))throw t}function Ht(t,e=""){if(!t)throw new Error(e)}async function Uu(t,{format:e,signal:r}){const n=t instanceof Response?t:new Response(t);Ht(n.body,"Response does not contain body.");try{return await new Response(n.body.pipeThrough(new DecompressionStream(e),{signal:r})).arrayBuffer()}catch(i){throw r==null||r.throwIfAborted(),new Error("Failed to decode ".concat(e))}}class va{constructor(e,r){vt(this,"kind","array_to_array");Ht(e.keepbits>=0,"keepbits must be zero or positive")}static fromConfig(e,r){return new va(e,r)}encode(e){throw new Error("`BitroundCodec.encode` is not implemented. Please open an issue at https://github.com/manzt/zarrita.js/issues.")}decode(e){return e}}const Ya=rf();function rf(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function Ka(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var nn,Ve,an,sn,Fr;const Ga=class Ga{constructor(e,r){vt(this,"kind","array_to_bytes");jt(this,nn);jt(this,Ve);jt(this,an);jt(this,sn);jt(this,Fr);Tt(this,Fr,e==null?void 0:e.endian),Tt(this,Ve,ku(r.data_type)),Tt(this,sn,r.shape),Tt(this,nn,sr(r.shape,"C"));const n=new(st(this,Ve))(0);Tt(this,an,n.BYTES_PER_ELEMENT)}static fromConfig(e,r){return new Ga(e,r)}encode(e){let r=new Uint8Array(e.data.buffer);return Ya&&st(this,Fr)==="big"&&Xa(r,Ka(st(this,Ve))),r}decode(e){return Ya&&st(this,Fr)==="big"&&Xa(e,Ka(st(this,Ve))),{data:new(st(this,Ve))(e.buffer,e.byteOffset,e.byteLength/st(this,an)),shape:st(this,sn),stride:st(this,nn)}}};nn=new WeakMap,Ve=new WeakMap,an=new WeakMap,sn=new WeakMap,Fr=new WeakMap;let Wn=Ga;class ga{constructor(){vt(this,"kind","bytes_to_bytes")}static fromConfig(){return new ga}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}class ma{constructor(){vt(this,"kind","bytes_to_bytes")}static fromConfig(e){return new ma}encode(e){throw new Error("Gzip encoding is not enabled by default. Please register a custom codec with `numcodecs/gzip`.")}async decode(e){const r=await Uu(e,{format:"gzip"});return new Uint8Array(r)}}function nf(t,e){return Ht(!Number.isNaN(e),"JsonCodec allow_nan is false but NaN was encountered during encoding."),Ht(e!==Number.POSITIVE_INFINITY,"JsonCodec allow_nan is false but Infinity was encountered during encoding."),Ht(e!==Number.NEGATIVE_INFINITY,"JsonCodec allow_nan is false but -Infinity was encountered during encoding."),e}function af(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((r,n)=>(r[n]=e[n],r),{}):e}var un,on;const Wa=class Wa{constructor(e={}){vt(this,"configuration");vt(this,"kind","array_to_bytes");jt(this,un);jt(this,on);this.configuration=e;const{encoding:r="utf-8",skipkeys:n=!1,ensure_ascii:i=!0,check_circular:a=!0,allow_nan:s=!0,sort_keys:u=!0,indent:h,strict:o=!0}=e;let f=e.separators;f||(h?f=[", ",": "]:f=[",",":"]),Tt(this,un,{encoding:r,skipkeys:n,ensure_ascii:i,check_circular:a,allow_nan:s,indent:h,separators:f,sort_keys:u}),Tt(this,on,{strict:o})}static fromConfig(e){return new Wa(e)}encode(e){const{indent:r,encoding:n,ensure_ascii:i,check_circular:a,allow_nan:s,sort_keys:u}=st(this,un);Ht(n==="utf-8","JsonCodec does not yet support non-utf-8 encoding.");const h=[];Ht(a,"JsonCodec does not yet support skipping the check for circular references during encoding."),s||h.push(nf),u&&h.push(af);const o=Array.from(e.data);o.push("|O"),o.push(e.shape);let f;h.length&&(f=(c,v)=>{let g=v;for(let d of h)g=d(c,g);return g});let l=JSON.stringify(o,f,r);return i&&(l=l.replace(/[\u007F-\uFFFF]/g,c=>{const v="0000".concat(c.charCodeAt(0).toString(16)),g=v.substring(v.length-4);return"\\u".concat(g)})),new TextEncoder().encode(l)}decode(e){const{strict:r}=st(this,on);Ht(r,"JsonCodec does not yet support non-strict decoding.");const n=pn(e),i=n.pop();n.pop(),Ht(i,"0D not implemented for JsonCodec.");const a=sr(i,"C");return{data:n,shape:i,stride:a}}};un=new WeakMap,on=new WeakMap;let Vi=Wa;function ts(t){return t instanceof $u||t instanceof da||t instanceof Zr?new Proxy(t,{get(r,n){return r.get(Number(n))},set(r,n,i){return r.set(Number(n),i),!0}}):t}function sf(t,e){let r;return t.data instanceof da||t.data instanceof Zr?r=new t.constructor(t.data.length,t.data.chars):r=new t.constructor(t.data.length),{data:r,shape:t.shape,stride:sr(t.shape,e)}}function uf(t,e){let r=sf(t,e),n=t.shape.length,i=t.data.length,a=Array(n).fill(0),s=ts(t.data),u=ts(r.data);for(let h=0;h<i;h++){let o=0;for(let f=0;f<n;f++)o+=a[f]*r.stride[f];u[o]=s[h],a[0]+=1;for(let f=0;f<n;f++)if(a[f]===t.shape[f]){if(f+1===n)break;a[f]=0,a[f+1]+=1}}return r}function of(t){let e=t.shape.length;return Ht(e===t.stride.length,"Shape and stride must have the same length."),t.stride.map((r,n)=>({stride:r,index:n})).sort((r,n)=>n.stride-r.stride).map(r=>r.index)}function hf(t,e){let r=of(t);return Ht(r.length===e.length,"Orders must match"),r.every((n,i)=>n===e[i])}var hn,xr;const Za=class Za{constructor(e,r){vt(this,"kind","array_to_array");jt(this,hn);jt(this,xr);var u;let n=(u=e.order)!=null?u:"C",i=r.shape.length,a=new Array(i),s=new Array(i);if(n==="C")for(let h=0;h<i;++h)a[h]=h,s[h]=h;else if(n==="F")for(let h=0;h<i;++h)a[h]=i-h-1,s[h]=i-h-1;else a=n,a.forEach((h,o)=>{Ht(s[h]===void 0,"Invalid permutation: ".concat(JSON.stringify(n))),s[h]=o});Tt(this,hn,a),Tt(this,xr,s)}static fromConfig(e,r){return new Za(e,r)}encode(e){return hf(e,st(this,xr))?e:uf(e,st(this,xr))}decode(e){return{data:e.data,shape:e.shape,stride:sr(e.shape,st(this,hn))}}};hn=new WeakMap,xr=new WeakMap;let Gi=Za;var fn,ln;const Ha=class Ha{constructor(e){vt(this,"kind","array_to_bytes");jt(this,fn);jt(this,ln);Tt(this,fn,e),Tt(this,ln,sr(e,"C"))}static fromConfig(e,r){return new Ha(r.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let r=new TextDecoder,n=new DataView(e.buffer),i=Array(n.getUint32(0,!0)),a=4;for(let s=0;s<i.length;s++){let u=n.getUint32(a,!0);a+=4,i[s]=r.decode(e.buffer.slice(a,a+u)),a+=u}return{data:i,shape:st(this,fn),stride:st(this,ln)}}};fn=new WeakMap,ln=new WeakMap;let Wi=Ha;class pa{constructor(){vt(this,"kind","bytes_to_bytes")}static fromConfig(e){return new pa}encode(e){throw new Error("Zlib encoding is not enabled by default. Please register a codec with `numcodecs/zlib`.")}async decode(e){const r=await Uu(e,{format:"deflate"});return new Uint8Array(r)}}function ff(){return new Map().set("blosc",()=>import("./blosc-BjQ25la0.js").then(t=>t.default)).set("lz4",()=>import("./lz4-BTICsuZU.js").then(t=>t.default)).set("zstd",()=>import("./zstd-BM-Q2Kpi.js").then(t=>t.default)).set("gzip",()=>ma).set("zlib",()=>pa).set("transpose",()=>Gi).set("bytes",()=>Wn).set("crc32c",()=>ga).set("vlen-utf8",()=>Wi).set("json2",()=>Vi).set("bitround",()=>va)}const lf=ff();function Zi(t){let e;return{async encode(r){e||(e=await es(t));for(const i of e.array_to_array)r=await i.encode(r);let n=await e.array_to_bytes.encode(r);for(const i of e.bytes_to_bytes)n=await i.encode(n);return n},async decode(r){e||(e=await es(t));for(let i=e.bytes_to_bytes.length-1;i>=0;i--)r=await e.bytes_to_bytes[i].decode(r);let n=await e.array_to_bytes.decode(r);for(let i=e.array_to_array.length-1;i>=0;i--)n=await e.array_to_array[i].decode(n);return n}}}async function es(t){let e=t.codecs.map(async a=>{var u;let s=await((u=lf.get(a.name))==null?void 0:u());return Ht(s,"Unknown codec: ".concat(a.name)),{Codec:s,meta:a}}),r=[],n,i=[];for await(let{Codec:a,meta:s}of e){let u=a.fromConfig(s.configuration,t);switch(u.kind){case"array_to_array":r.push(u);break;case"array_to_bytes":n=u;break;default:i.push(u)}}return n||(Ht(cf(t),"Cannot encode ".concat(t.data_type," to bytes without a codec")),n=Wn.fromConfig({endian:"little"},t)),{array_to_array:r,array_to_bytes:n,bytes_to_bytes:i}}function cf(t){return t.data_type!=="v2:object"}const rs=BigInt("18446744073709551615");function df(t,e,r,n){Ht(t.store.getRange,"Store does not support range requests");let i=t.store.getRange.bind(t.store),a=e.map((h,o)=>h/n.chunk_shape[o]),s=Zi({data_type:"uint64",shape:[...a,2],codecs:n.index_codecs}),u={};return async h=>{let o=h.map((M,D)=>Math.floor(M/a[D])),f=t.resolve(r(o)).path,l;if(f in u)l=u[f];else{let M=4,D=16*a.reduce((y,_)=>y*_,1),A=await i(f,{suffixLength:D+M});l=u[f]=A?await s.decode(A):null}if(l===null)return;let{data:c,shape:v,stride:g}=l,d=h.map((M,D)=>M%v[D]).reduce((M,D,A)=>M+D*g[A],0),m=c[d],p=c[d+1];if(!(m===rs&&p===rs))return i(f,{offset:Number(m),length:Number(p)})}}class fr{constructor(e,r="/"){vt(this,"store");vt(this,"path");this.store=e,this.path=r}resolve(e){let r=new URL("file://".concat(this.path.endsWith("/")?this.path:"".concat(this.path,"/")));return new fr(this.store,new URL(e,r).pathname)}}function ya(t){return new fr(t!=null?t:new Map)}var cn;class Da extends fr{constructor(r,n,i){super(r,n);vt(this,"kind","group");jt(this,cn);Tt(this,cn,i)}get attrs(){return st(this,cn).attributes}}cn=new WeakMap;function ns(t){var r,n;const e=t.find(i=>i.name==="transpose");return(n=(r=e==null?void 0:e.configuration)==null?void 0:r.order)!=null?n:"C"}const $r=Symbol("zarrita.context");function vf(t){return t[$r]}function gf(t,e){var a;let{configuration:r}=(a=e.codecs.find(ef))!=null?a:{},n={encode_chunk_key:Qh(e.chunk_key_encoding),TypedArray:ku(e.data_type),fill_value:e.fill_value};if(r){let s=ns(r.codecs);return{...n,kind:"sharded",chunk_shape:r.chunk_shape,codec:Zi({data_type:e.data_type,shape:r.chunk_shape,codecs:r.codecs}),get_strides(u){return sr(u,s)},get_chunk_bytes:df(t,e.chunk_grid.configuration.chunk_shape,n.encode_chunk_key,r)}}let i=ns(e.codecs);return{...n,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:Zi({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s){return sr(s,i)},async get_chunk_bytes(s,u){let h=n.encode_chunk_key(s),o=t.resolve(h).path;return t.store.get(o,u)}}}var Nu,Bu,ar,Su;let Zn=(Su=class extends(Bu=fr,Nu=$r,Bu){constructor(r,n,i){super(r,n);vt(this,"kind","array");jt(this,ar);vt(this,Nu);Tt(this,ar,{...i,fill_value:zu(i)}),this[$r]=gf(this,i)}get attrs(){return st(this,ar).attributes}get shape(){return st(this,ar).shape}get chunks(){return this[$r].chunk_shape}get dtype(){return st(this,ar).data_type}async getChunk(r,n){let i=this[$r],a=await i.get_chunk_bytes(r,n);if(!a){let s=i.chunk_shape.reduce((h,o)=>h*o,1),u=new i.TypedArray(s);return u.fill(i.fill_value),{data:u,shape:i.chunk_shape,stride:i.get_strides(i.chunk_shape)}}return i.codec.decode(a)}is(r){return tf(this.dtype,r)}},ar=new WeakMap,Su),di=mf();function mf(){let t=new WeakMap;function e(r){var i;let n=(i=t.get(r))!=null?i:{v2:0,v3:0};return t.set(r,n),n}return{increment(r,n){e(r)[n]+=1},version_max(r){let n=e(r);return n.v3>n.v2?"v3":"v2"}}}async function pf(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?pn(e):{}}async function yf(t,e={}){var i;let r="store"in t?t:new fr(t),n={};return((i=e.attrs)==null||i)&&(n=await pf(r)),e.kind==="array"?is(r,n):e.kind==="group"?as(r,n):is(r,n).catch(a=>(Lu(a,mn),as(r,n)))}async function is(t,e){let{path:r}=t.resolve(".zarray"),n=await t.store.get(r);if(!n)throw new mn("v2 array",{cause:new ca(r)});return di.increment(t.store,"v2"),new Zn(t.store,t.path,Yh(pn(n),e))}async function as(t,e){let{path:r}=t.resolve(".zgroup"),n=await t.store.get(r);if(!n)throw new mn("v2 group",{cause:new ca(r)});return di.increment(t.store,"v2"),new Da(t.store,t.path,Kh(pn(n),e))}async function Df(t){let{store:e,path:r}=t.resolve("zarr.json"),n=await t.store.get(r);if(!n)throw new mn("v3 array or group",{cause:new ca(r)});let i=pn(n);return i.node_type==="array"&&(i.fill_value=zu(i)),i.node_type==="array"?new Zn(e,t.path,i):new Da(e,t.path,i)}async function _f(t,e={}){let r="store"in t?t:new fr(t),n=await Df(r);if(di.increment(r.store,"v3"),e.kind===void 0||e.kind==="array"&&n instanceof Zn||e.kind==="group"&&n instanceof Da)return n;let i=n instanceof Zn?"array":"group";throw new Error("Expected node of kind ".concat(e.kind,", found ").concat(i,"."))}async function Kt(t,e={}){let r="store"in t?t.store:t,n=di.version_max(r),i=n==="v2"?Kt.v2:Kt.v3,a=n==="v2"?Kt.v3:Kt.v2;return i(t,e).catch(s=>(Lu(s,mn),a(t,e)))}Kt.v2=yf;Kt.v3=_f;function*Mf(t,e,r=1){e===void 0&&(e=t,t=0);for(let n=t;n<e;n+=r)yield n}function*wf(...t){if(t.length===0)return;const e=t.map(n=>n[Symbol.iterator]()),r=e.map(n=>n.next());if(r.some(n=>n.done))throw new Error("Input contains an empty iterator.");for(let n=0;;){if(r[n].done){if(e[n]=t[n][Symbol.iterator](),r[n]=e[n].next(),++n>=e.length)return}else yield r.map(({value:i})=>i),n=0;r[n]=e[n].next()}}function Af({start:t,stop:e,step:r},n){if(r===0)throw new Error("slice step cannot be zero");r=r!=null?r:1;const i=r<0,[a,s]=i?[-1,n-1]:[0,n];return t===null?t=i?s:a:t<0?(t+=n,t<a&&(t=a)):t>s&&(t=s),e===null?e=i?a:s:e<0?(e+=n,e<a&&(e=a)):e>s&&(e=s),[t,e,r]}function Hi(t,e,r=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:r}}function Ef(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}let _a=class extends Error{constructor(e){super(e),this.name="IndexError"}};function bf(t,e){throw new _a("too many indicies for array; expected ".concat(e.length,", got ").concat(t.length))}function Cf(t){throw new _a("index out of bounds for dimension with length ".concat(t))}function Ff(){throw new _a("only slices with step >= 1 are supported")}function xf(t,e){t.length>e.length&&bf(t,e)}function Nf(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&Cf(e),t}class Bf{constructor({dim_sel:e,dim_len:r,dim_chunk_len:n}){vt(this,"dim_sel");vt(this,"dim_len");vt(this,"dim_chunk_len");vt(this,"nitems");e=Nf(e,r),this.dim_sel=e,this.dim_len=r,this.dim_chunk_len=n,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),r=e*this.dim_chunk_len,n=this.dim_sel-r;yield{dim_chunk_ix:e,dim_chunk_sel:n}}}class ss{constructor({dim_sel:e,dim_len:r,dim_chunk_len:n}){vt(this,"start");vt(this,"stop");vt(this,"step");vt(this,"dim_len");vt(this,"dim_chunk_len");vt(this,"nitems");vt(this,"nchunks");const[i,a,s]=Af(e,r);this.start=i,this.stop=a,this.step=s,this.step<1&&Ff(),this.dim_len=r,this.dim_chunk_len=n,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),r=Math.ceil(this.stop/this.dim_chunk_len);for(const n of Mf(e,r)){const i=n*this.dim_chunk_len,a=Math.min(this.dim_len,(n+1)*this.dim_chunk_len),s=a-i;let u=0,h=0;if(this.start<i){const v=(i-this.start)%this.step;v&&(h+=this.step-v),u=Math.ceil((i-this.start)/this.step)}else h=this.start-i;const o=this.stop>a?s:this.stop-i,f=[h,o,this.step],l=Math.ceil((o-h)/this.step),c=[u,u+l,1];yield{dim_chunk_ix:n,dim_chunk_sel:f,dim_out_sel:c}}}}function Sf(t,e){let r=[];return t===null?r=e.map(n=>Hi(null)):Array.isArray(t)&&(r=t.map(n=>n!=null?n:Hi(null))),xf(r,e),r}class Tf{constructor({selection:e,shape:r,chunk_shape:n}){vt(this,"dim_indexers");vt(this,"shape");this.dim_indexers=Sf(e,r).map((i,a)=>new(typeof i=="number"?Bf:ss)({dim_sel:i,dim_len:r[a],dim_chunk_len:n[a]})),this.shape=this.dim_indexers.filter(i=>i instanceof ss).map(i=>i.nitems)}*[Symbol.iterator](){for(const e of wf(...this.dim_indexers)){const r=e.map(i=>i.dim_chunk_ix),n=e.map(i=>"dim_out_sel"in i?{from:i.dim_chunk_sel,to:i.dim_out_sel}:{from:i.dim_chunk_sel,to:null});yield{chunk_coords:r,mapping:n}}}}function If(t,e){return"get"in t?t.get(e):t[e]}async function ju(t,e,r,n){var h,o;let i=vf(t),a=new Tf({selection:e,shape:t.shape,chunk_shape:t.chunks}),s=n.prepare(new i.TypedArray(a.shape.reduce((f,l)=>f*l,1)),a.shape,i.get_strides(a.shape)),u=(o=(h=r.create_queue)==null?void 0:h.call(r))!=null?o:Ef();for(const{chunk_coords:f,mapping:l}of a)u.add(async()=>{let{data:c,shape:v,stride:g}=await t.getChunk(f,r.opts),d=n.prepare(c,v,g);n.set_from_chunk(s,d,l)});return await u.onIdle(),a.shape.length===0?If(s.data,0):s}function Ma(t,e=0,r){let n=r!=null?r:t.length-e;return{length:n,subarray(i,a=n){return Ma(t,e+i,a-i)},set(i,a=0){for(let s=0;s<i.length;s++)t[e+a+s]=i.get(s)},get(i){return t[e+i]}}}function bi(t){return globalThis.Array.isArray(t.data)?{data:Ma(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function Of(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function Pf(t,e){if(globalThis.Array.isArray(t.data))return Ma([e]);let r=Of(t.data),n=new r([e]);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}const Rf={prepare(t,e,r){return{data:t,shape:e,stride:r}},set_scalar(t,e,r){let n=bi(t);Ji(n,e,Pf(t,r),n.bytes_per_element)},set_from_chunk(t,e,r){let n=bi(t);Rn(n,bi(e),n.bytes_per_element,r)}};async function us(t,e=null,r={}){return ju(t,e,r,Rf)}function Vu(t,e,r){return r<0&&e<t?Math.floor((t-e-1)/-r)+1:t<e?Math.floor((e-t-1)/r)+1:0}function Ji(t,e,r,n){if(e.length===0){t.data.set(r,0);return}const[i,...a]=e,[s,...u]=t.stride;if(typeof i=="number"){const c=t.data.subarray(s*i*n);Ji({data:c,stride:u},a,r,n);return}const[h,o,f]=i,l=Vu(h,o,f);if(a.length===0){for(let c=0;c<l;c++)t.data.set(r,s*(h+f*c)*n);return}for(let c=0;c<l;c++){const v=t.data.subarray(s*(h+f*c)*n);Ji({data:v,stride:u},a,r,n)}}function Rn(t,e,r,n){const[i,...a]=n,[s,...u]=t.stride,[h,...o]=e.stride;if(i.from===null){if(a.length===0){t.data.set(e.data.subarray(0,r),i.to*r);return}Rn({data:t.data.subarray(s*i.to*r),stride:u},e,r,a);return}if(i.to===null){if(a.length===0){let p=i.from*r;t.data.set(e.data.subarray(p,p+r),0);return}Rn(t,{data:e.data.subarray(h*i.from*r),stride:o},r,a);return}const[f,l,c]=i.to,[v,g,d]=i.from,m=Vu(f,l,c);if(a.length===0){if(c===1&&d===1&&s===1&&h===1){let p=v*r,M=m*r;t.data.set(e.data.subarray(p,p+M),f*r);return}for(let p=0;p<m;p++){let M=h*(v+d*p)*r;t.data.set(e.data.subarray(M,M+r),s*(f+c*p)*r)}return}for(let p=0;p<m;p++)Rn({data:t.data.subarray(s*(f+p*c)*r),stride:u},{data:e.data.subarray(h*(v+p*d)*r),stride:o},r,a)}function Gu(t,e,r,n={}){return e!==void 0&&r!==void 0&&(n={...n,headers:{...n.headers,Range:"bytes=".concat(e,"-").concat(e+r-1)}}),fetch(t,n)}function qf(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function os(t,e){const r=typeof t=="string"?new URL(t):t;r.pathname.endsWith("/")||(r.pathname+="/");const n=new URL(e.slice(1),r);return n.search=r.search,n}async function hs(t){if(t.status!==404){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error("Unexpected response status ".concat(t.status," ").concat(t.statusText))}}async function $f(t,e,r,n){if(n)return fetch(t,{...r,headers:{...r.headers,Range:"bytes=-".concat(e)}});let i=await fetch(t,{...r,method:"HEAD"});if(!i.ok)return i;let a=i.headers.get("Content-Length"),s=Number(a);return Gu(t,s-e,s,r)}var dn,vn,gn,Qi;class wa{constructor(e,r={}){jt(this,gn);vt(this,"url");jt(this,dn);jt(this,vn);var n,i;this.url=e,Tt(this,dn,(n=r.overrides)!=null?n:{}),Tt(this,vn,(i=r.useSuffixRequest)!=null?i:!1)}async get(e,r={}){let n=os(this.url,e).href,i=await fetch(n,Ai(this,gn,Qi).call(this,r));return hs(i)}async getRange(e,r,n={}){let i=os(this.url,e),a=Ai(this,gn,Qi).call(this,n),s;return"suffixLength"in r?s=await $f(i,r.suffixLength,a,st(this,vn)):s=await Gu(i,r.offset,r.length,a),hs(s)}}dn=new WeakMap,vn=new WeakMap,gn=new WeakSet,Qi=function(e){return qf(st(this,dn),e)};const kf=globalThis.AudioData,zf=globalThis.ImageBitmap,Lf=globalThis.VideoFrame,Uf=globalThis.OffscreenCanvas,jf=globalThis.RTCDataChannel,Vf=globalThis.MessageChannel,Gf=globalThis.ReadableStream,Wf=globalThis.WritableStream,Zf=globalThis.TransformStream,Hf="ReadableStream"in globalThis,Jf="WritableStream"in globalThis,Qf="TransformStream"in globalThis,Xf="MessageChannel"in globalThis,Yf="MessagePort"in globalThis,Kf="ArrayBuffer"in globalThis,t0="AudioData"in globalThis,e0="ImageBitmap"in globalThis,r0="VideoFrame"in globalThis,n0="OffscreenCanvas"in globalThis,i0="RTCDataChannel"in globalThis;function a0(t){return typeof t=="object"&&t!==null||typeof t=="function"}function s0(t){return ArrayBuffer.isView(t)}function fs(t){return Hf&&t instanceof Gf||Jf&&t instanceof Wf||Qf&&t instanceof Zf}function u0(t){return Xf&&t instanceof Vf}function o0(t){return Kf&&t instanceof ArrayBuffer||Yf&&t instanceof MessagePort||t0&&t instanceof kf||e0&&t instanceof zf||r0&&t instanceof Lf||n0&&t instanceof Uf||i0&&t instanceof jf}function Aa(t,e=!1,r=1e4){const n=new Set([]),i=[[t]];for(let a=0;a<i.length;a++){const s=i[a],u=s.length;for(let h=0;h<u;h++){const o=s[h];if(s0(o))n.add(o.buffer);else if(o0(o)||e&&fs(o))n.add(o);else if(u0(o))n.add(o.port1),n.add(o.port2);else if(!fs(o)&&a0(o)){const f=Array.isArray(o)?o:Object.values(o);f.length&&i.push(f)}}if(--r<=0)break}return Array.from(n)}function Wu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ci,ls;function h0(){if(ls)return Ci;ls=1;function t(e){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return r}return Ci=t,Ci}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Fi,cs;function f0(){if(cs)return Fi;cs=1,Fi=function(r){return r!=null&&(t(r)||e(r)||!!r._isBuffer)};function t(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function e(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&t(r.slice(0,0))}return Fi}var xi,ds;function l0(){if(ds)return xi;ds=1;var t=h0(),e=f0(),r=typeof Float64Array<"u";function n(o,f){return o[0]-f[0]}function i(){var o=this.stride,f=new Array(o.length),l;for(l=0;l<f.length;++l)f[l]=[Math.abs(o[l]),l];f.sort(n);var c=new Array(f.length);for(l=0;l<c.length;++l)c[l]=f[l][1];return c}function a(o,f){var l=["View",f,"d",o].join("");f<0&&(l="View_Nil"+o);var c=o==="generic";if(f===-1){var v="function "+l+"(a){this.data=a;};	var proto="+l+".prototype;	proto.dtype='"+o+"';	proto.index=function(){return -1};	proto.size=0;	proto.dimension=-1;	proto.shape=proto.stride=proto.order=[];	proto.lo=proto.hi=proto.transpose=proto.step=	function(){return new "+l+"(this.data);};	proto.get=proto.set=function(){};	proto.pick=function(){return null};	return function construct_"+l+"(a){return new "+l+"(a);}",b=new Function(v);return b()}else if(f===0){var v="function "+l+"(a,d) {	this.data = a;	this.offset = d	};	var proto="+l+".prototype;	proto.dtype='"+o+"';	proto.index=function(){return this.offset};	proto.dimension=0;	proto.size=1;	proto.shape=	proto.stride=	proto.order=[];	proto.lo=	proto.hi=	proto.transpose=	proto.step=function "+l+"_copy() {	return new "+l+"(this.data,this.offset)	};	proto.pick=function "+l+"_pick(){	return TrivialArray(this.data);	};	proto.valueOf=proto.get=function "+l+"_get(){	return "+(c?"this.data.get(this.offset)":"this.data[this.offset]")+"};	proto.set=function "+l+"_set(v){	return "+(c?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"	};	return function construct_"+l+"(a,b,c,d){return new "+l+"(a,d)}",b=new Function("TrivialArray",v);return b(u[o][0])}var v=["'use strict'"],g=t(f),d=g.map(function(E){return"i"+E}),m="this.offset+"+g.map(function(E){return"this.stride["+E+"]*i"+E}).join("+"),p=g.map(function(E){return"b"+E}).join(","),M=g.map(function(E){return"c"+E}).join(",");v.push("function "+l+"(a,"+p+","+M+",d){this.data=a","this.shape=["+p+"]","this.stride=["+M+"]","this.offset=d|0}","var proto="+l+".prototype","proto.dtype='"+o+"'","proto.dimension="+f),v.push("Object.defineProperty(proto,'size',{get:function "+l+"_size(){	return "+g.map(function(E){return"this.shape["+E+"]"}).join("*"),"}})"),f===1?v.push("proto.order=[0]"):(v.push("Object.defineProperty(proto,'order',{get:"),f<4?(v.push("function "+l+"_order(){"),f===2?v.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):f===3&&v.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);	if(s0>s1){	if(s1>s2){	return [2,1,0];	}else if(s0>s2){	return [1,2,0];	}else{	return [1,0,2];	}	}else if(s0>s2){	return [2,0,1];	}else if(s2>s1){	return [0,1,2];	}else{	return [0,2,1];	}}})")):v.push("ORDER})")),v.push("proto.set=function "+l+"_set("+d.join(",")+",v){"),c?v.push("return this.data.set("+m+",v)}"):v.push("return this.data["+m+"]=v}"),v.push("proto.get=function "+l+"_get("+d.join(",")+"){"),c?v.push("return this.data.get("+m+")}"):v.push("return this.data["+m+"]}"),v.push("proto.index=function "+l+"_index(",d.join(),"){return "+m+"}"),v.push("proto.hi=function "+l+"_hi("+d.join(",")+"){return new "+l+"(this.data,"+g.map(function(E){return["(typeof i",E,"!=='number'||i",E,"<0)?this.shape[",E,"]:i",E,"|0"].join("")}).join(",")+","+g.map(function(E){return"this.stride["+E+"]"}).join(",")+",this.offset)}");var D=g.map(function(E){return"a"+E+"=this.shape["+E+"]"}),A=g.map(function(E){return"c"+E+"=this.stride["+E+"]"});v.push("proto.lo=function "+l+"_lo("+d.join(",")+"){var b=this.offset,d=0,"+D.join(",")+","+A.join(","));for(var y=0;y<f;++y)v.push("if(typeof i"+y+"==='number'&&i"+y+">=0){	d=i"+y+"|0;	b+=c"+y+"*d;	a"+y+"-=d}");v.push("return new "+l+"(this.data,"+g.map(function(E){return"a"+E}).join(",")+","+g.map(function(E){return"c"+E}).join(",")+",b)}"),v.push("proto.step=function "+l+"_step("+d.join(",")+"){var "+g.map(function(E){return"a"+E+"=this.shape["+E+"]"}).join(",")+","+g.map(function(E){return"b"+E+"=this.stride["+E+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var y=0;y<f;++y)v.push("if(typeof i"+y+"==='number'){	d=i"+y+"|0;	if(d<0){	c+=b"+y+"*(a"+y+"-1);	a"+y+"=ceil(-a"+y+"/d)	}else{	a"+y+"=ceil(a"+y+"/d)	}	b"+y+"*=d	}");v.push("return new "+l+"(this.data,"+g.map(function(E){return"a"+E}).join(",")+","+g.map(function(E){return"b"+E}).join(",")+",c)}");for(var _=new Array(f),C=new Array(f),y=0;y<f;++y)_[y]="a[i"+y+"]",C[y]="b[i"+y+"]";v.push("proto.transpose=function "+l+"_transpose("+d+"){"+d.map(function(E,N){return E+"=("+E+"===undefined?"+N+":"+E+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+l+"(this.data,"+_.join(",")+","+C.join(",")+",this.offset)}"),v.push("proto.pick=function "+l+"_pick("+d+"){var a=[],b=[],c=this.offset");for(var y=0;y<f;++y)v.push("if(typeof i"+y+"==='number'&&i"+y+">=0){c=(c+this.stride["+y+"]*i"+y+")|0}else{a.push(this.shape["+y+"]);b.push(this.stride["+y+"])}");v.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),v.push("return function construct_"+l+"(data,shape,stride,offset){return new "+l+"(data,"+g.map(function(E){return"shape["+E+"]"}).join(",")+","+g.map(function(E){return"stride["+E+"]"}).join(",")+",offset)}");var b=new Function("CTOR_LIST","ORDER",v.join("\n"));return b(u[o],i)}function s(o){if(e(o))return"buffer";if(r)switch(Object.prototype.toString.call(o)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(o)?"array":"generic"}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function h(o,f,l,c){if(o===void 0){var M=u.array[0];return M([])}else typeof o=="number"&&(o=[o]);f===void 0&&(f=[o.length]);var v=f.length;if(l===void 0){l=new Array(v);for(var g=v-1,d=1;g>=0;--g)l[g]=d,d*=f[g]}if(c===void 0){c=0;for(var g=0;g<v;++g)l[g]<0&&(c-=(f[g]-1)*l[g])}for(var m=s(o),p=u[m];p.length<=v+1;)p.push(a(m,p.length-1));var M=p[v+1];return M(o,f,l,c)}return xi=h,xi}var c0=l0(),Le=Wu(c0),Ni={},Bi,vs;function d0(){if(vs)return Bi;vs=1;function t(n,i){for(var a=1,s=n.length,u=n[0],h=n[0],o=1;o<s;++o)if(h=u,u=n[o],i(u,h)){if(o===a){a++;continue}n[a++]=u}return n.length=a,n}function e(n){for(var i=1,a=n.length,s=n[0],u=n[0],h=1;h<a;++h,u=s)if(u=s,s=n[h],s!==u){if(h===i){i++;continue}n[i++]=s}return n.length=i,n}function r(n,i,a){return n.length===0?n:i?(a||n.sort(i),t(n,i)):(a||n.sort(),e(n))}return Bi=r,Bi}var Si,gs;function v0(){if(gs)return Si;gs=1;var t=d0();function e(u,h,o){var f=u.length,l=h.arrayArgs.length,c=h.indexArgs.length>0,v=[],g=[],d=0,m=0,p,M;for(p=0;p<f;++p)g.push(["i",p,"=0"].join(""));for(M=0;M<l;++M)for(p=0;p<f;++p)m=d,d=u[p],p===0?g.push(["d",M,"s",p,"=t",M,"p",d].join("")):g.push(["d",M,"s",p,"=(t",M,"p",d,"-s",m,"*t",M,"p",m,")"].join(""));for(g.length>0&&v.push("var "+g.join(",")),p=f-1;p>=0;--p)d=u[p],v.push(["for(i",p,"=0;i",p,"<s",d,";++i",p,"){"].join(""));for(v.push(o),p=0;p<f;++p){for(m=d,d=u[p],M=0;M<l;++M)v.push(["p",M,"+=d",M,"s",p].join(""));c&&(p>0&&v.push(["index[",m,"]-=s",m].join("")),v.push(["++index[",d,"]"].join(""))),v.push("}")}return v.join("\n")}function r(u,h,o,f){for(var l=h.length,c=o.arrayArgs.length,v=o.blockSize,g=o.indexArgs.length>0,d=[],m=0;m<c;++m)d.push(["var offset",m,"=p",m].join(""));for(var m=u;m<l;++m)d.push(["for(var j"+m+"=SS[",h[m],"]|0;j",m,">0;){"].join("")),d.push(["if(j",m,"<",v,"){"].join("")),d.push(["s",h[m],"=j",m].join("")),d.push(["j",m,"=0"].join("")),d.push(["}else{s",h[m],"=",v].join("")),d.push(["j",m,"-=",v,"}"].join("")),g&&d.push(["index[",h[m],"]=j",m].join(""));for(var m=0;m<c;++m){for(var p=["offset"+m],M=u;M<l;++M)p.push(["j",M,"*t",m,"p",h[M]].join(""));d.push(["p",m,"=(",p.join("+"),")"].join(""))}d.push(e(h,o,f));for(var m=u;m<l;++m)d.push("}");return d.join("\n")}function n(u){for(var h=0,o=u[0].length;h<o;){for(var f=1;f<u.length;++f)if(u[f][h]!==u[0][h])return h;++h}return h}function i(u,h,o){for(var f=u.body,l=[],c=[],v=0;v<u.args.length;++v){var g=u.args[v];if(!(g.count<=0)){var d=new RegExp(g.name,"g"),m="",p=h.arrayArgs.indexOf(v);switch(h.argTypes[v]){case"offset":var M=h.offsetArgIndex.indexOf(v),D=h.offsetArgs[M];p=D.array,m="+q"+M;case"array":m="p"+p+m;var A="l"+v,y="a"+p;if(h.arrayBlockIndices[p]===0)g.count===1?o[p]==="generic"?g.lvalue?(l.push(["var ",A,"=",y,".get(",m,")"].join("")),f=f.replace(d,A),c.push([y,".set(",m,",",A,")"].join(""))):f=f.replace(d,[y,".get(",m,")"].join("")):f=f.replace(d,[y,"[",m,"]"].join("")):o[p]==="generic"?(l.push(["var ",A,"=",y,".get(",m,")"].join("")),f=f.replace(d,A),g.lvalue&&c.push([y,".set(",m,",",A,")"].join(""))):(l.push(["var ",A,"=",y,"[",m,"]"].join("")),f=f.replace(d,A),g.lvalue&&c.push([y,"[",m,"]=",A].join("")));else{for(var _=[g.name],C=[m],b=0;b<Math.abs(h.arrayBlockIndices[p]);b++)_.push("\\s*\\[([^\\]]+)\\]"),C.push("$"+(b+1)+"*t"+p+"b"+b);if(d=new RegExp(_.join(""),"g"),m=C.join("+"),o[p]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");f=f.replace(d,[y,"[",m,"]"].join(""))}break;case"scalar":f=f.replace(d,"Y"+h.scalarArgs.indexOf(v));break;case"index":f=f.replace(d,"index");break;case"shape":f=f.replace(d,"shape");break}}}return[l.join("\n"),f,c.join("\n")].join("\n").trim()}function a(u){for(var h=new Array(u.length),o=!0,f=0;f<u.length;++f){var l=u[f],c=l.match(/\d+/);c?c=c[0]:c="",l.charAt(0)===0?h[f]="u"+l.charAt(1)+c:h[f]=l.charAt(0)+c,f>0&&(o=o&&h[f]===h[f-1])}return o?h[0]:h.join("")}function s(u,h){for(var o=h[1].length-Math.abs(u.arrayBlockIndices[0])|0,f=new Array(u.arrayArgs.length),l=new Array(u.arrayArgs.length),c=0;c<u.arrayArgs.length;++c)l[c]=h[2*c],f[c]=h[2*c+1];for(var v=[],g=[],d=[],m=[],p=[],c=0;c<u.arrayArgs.length;++c){u.arrayBlockIndices[c]<0?(d.push(0),m.push(o),v.push(o),g.push(o+u.arrayBlockIndices[c])):(d.push(u.arrayBlockIndices[c]),m.push(u.arrayBlockIndices[c]+o),v.push(0),g.push(u.arrayBlockIndices[c]));for(var M=[],D=0;D<f[c].length;D++)d[c]<=f[c][D]&&f[c][D]<m[c]&&M.push(f[c][D]-d[c]);p.push(M)}for(var A=["SS"],y=["'use strict'"],_=[],D=0;D<o;++D)_.push(["s",D,"=SS[",D,"]"].join(""));for(var c=0;c<u.arrayArgs.length;++c){A.push("a"+c),A.push("t"+c),A.push("p"+c);for(var D=0;D<o;++D)_.push(["t",c,"p",D,"=t",c,"[",d[c]+D,"]"].join(""));for(var D=0;D<Math.abs(u.arrayBlockIndices[c]);++D)_.push(["t",c,"b",D,"=t",c,"[",v[c]+D,"]"].join(""))}for(var c=0;c<u.scalarArgs.length;++c)A.push("Y"+c);if(u.shapeArgs.length>0&&_.push("shape=SS.slice(0)"),u.indexArgs.length>0){for(var C=new Array(o),c=0;c<o;++c)C[c]="0";_.push(["index=[",C.join(","),"]"].join(""))}for(var c=0;c<u.offsetArgs.length;++c){for(var b=u.offsetArgs[c],E=[],D=0;D<b.offset.length;++D)b.offset[D]!==0&&(b.offset[D]===1?E.push(["t",b.array,"p",D].join("")):E.push([b.offset[D],"*t",b.array,"p",D].join("")));E.length===0?_.push("q"+c+"=0"):_.push(["q",c,"=",E.join("+")].join(""))}var N=t([].concat(u.pre.thisVars).concat(u.body.thisVars).concat(u.post.thisVars));_=_.concat(N),_.length>0&&y.push("var "+_.join(","));for(var c=0;c<u.arrayArgs.length;++c)y.push("p"+c+"|=0");u.pre.body.length>3&&y.push(i(u.pre,u,l));var S=i(u.body,u,l),k=n(p);k<o?y.push(r(k,p[0],u,S)):y.push(e(p[0],u,S)),u.post.body.length>3&&y.push(i(u.post,u,l)),u.debug&&console.log("-----Generated cwise routine for ",h,":\n"+y.join("\n")+"\n----------");var J=[u.funcName||"unnamed","_cwise_loop_",f[0].join("s"),"m",k,a(l)].join(""),U=new Function(["function ",J,"(",A.join(","),"){",y.join("\n"),"} return ",J].join(""));return U()}return Si=s,Si}var Ti,ms;function g0(){if(ms)return Ti;ms=1;var t=v0();function e(r){var n=["'use strict'","var CACHED={}"],i=[],a=r.funcName+"_cwise_thunk";n.push(["return function ",a,"(",r.shimArgs.join(","),"){"].join(""));for(var s=[],u=[],h=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],o=[],f=[],l=0;l<r.arrayArgs.length;++l){var c=r.arrayArgs[l];i.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),s.push("t"+c),s.push("r"+c),u.push("t"+c),u.push("r"+c+".join()"),h.push("array"+c+".data"),h.push("array"+c+".stride"),h.push("array"+c+".offset|0"),l>0&&(o.push("array"+r.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[l]))),f.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[l])+"]"))}r.arrayArgs.length>1&&(n.push("if (!("+o.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),n.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),n.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),n.push("}"));for(var l=0;l<r.scalarArgs.length;++l)h.push("scalar"+r.scalarArgs[l]);i.push(["type=[",u.join(","),"].join()"].join("")),i.push("proc=CACHED[type]"),n.push("var "+i.join(",")),n.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",h.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+n.join("\n")+"\n----------");var v=new Function("compile",n.join("\n"));return v(t.bind(void 0,r))}return Ti=e,Ti}var Ii,ps;function m0(){if(ps)return Ii;ps=1;var t=g0();function e(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function r(n){var i=new e;i.pre=n.pre,i.body=n.body,i.post=n.post;var a=n.args.slice(0);i.argTypes=a;for(var s=0;s<a.length;++s){var u=a[s];if(u==="array"||typeof u=="object"&&u.blockIndices){if(i.argTypes[s]="array",i.arrayArgs.push(s),i.arrayBlockIndices.push(u.blockIndices?u.blockIndices:0),i.shimArgs.push("array"+s),s<i.pre.args.length&&i.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array args");if(s<i.post.args.length&&i.post.args[s].count>0)throw new Error("cwise: post() block may not reference array args")}else if(u==="scalar")i.scalarArgs.push(s),i.shimArgs.push("scalar"+s);else if(u==="index"){if(i.indexArgs.push(s),s<i.pre.args.length&&i.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array index");if(s<i.body.args.length&&i.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array index");if(s<i.post.args.length&&i.post.args[s].count>0)throw new Error("cwise: post() block may not reference array index")}else if(u==="shape"){if(i.shapeArgs.push(s),s<i.pre.args.length&&i.pre.args[s].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(s<i.body.args.length&&i.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array shape");if(s<i.post.args.length&&i.post.args[s].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof u=="object"&&u.offset)i.argTypes[s]="offset",i.offsetArgs.push({array:u.array,offset:u.offset}),i.offsetArgIndex.push(s);else throw new Error("cwise: Unknown argument type "+a[s])}if(i.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(i.pre.args.length>a.length)throw new Error("cwise: Too many arguments in pre() block");if(i.body.args.length>a.length)throw new Error("cwise: Too many arguments in body() block");if(i.post.args.length>a.length)throw new Error("cwise: Too many arguments in post() block");return i.debug=!!n.printCode||!!n.debug,i.funcName=n.funcName||"cwise",i.blockSize=n.blockSize||64,t(i)}return Ii=r,Ii}var ys;function p0(){return ys||(ys=1,function(t){var e=m0(),r={body:"",args:[],thisVars:[],localVars:[]};function n(c){if(!c)return r;for(var v=0;v<c.args.length;++v){var g=c.args[v];v===0?c.args[v]={name:g,lvalue:!0,rvalue:!!c.rvalue,count:c.count||1}:c.args[v]={name:g,lvalue:!1,rvalue:!0,count:1}}return c.thisVars||(c.thisVars=[]),c.localVars||(c.localVars=[]),c}function i(c){return e({args:c.args,pre:n(c.pre),body:n(c.body),post:n(c.proc),funcName:c.funcName})}function a(c){for(var v=[],g=0;g<c.args.length;++g)v.push("a"+g);var d=new Function("P",["return function ",c.funcName,"_ndarrayops(",v.join(","),") {P(",v.join(","),");return a0}"].join(""));return d(i(c))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var c in s){var v=s[c];t[c]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+v+"c"},funcName:c}),t[c+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+v+"=b"},funcName:c+"eq"}),t[c+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+v+"s"},funcName:c+"s"}),t[c+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+v+"=s"},funcName:c+"seq"})}})();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var c in u){var v=u[c];t[c]=a({args:["array","array"],body:{args:["a","b"],body:"a="+v+"b"},funcName:c}),t[c+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+v+"a"},funcName:c+"eq"})}})();var h={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var c in h){var v=h[c];t[c]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+v+"c"},funcName:c}),t[c+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+v+"s"},funcName:c+"s"}),t[c+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+v+"b"},funcName:c+"eq"}),t[c+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+v+"s"},funcName:c+"seq"})}})();var o=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var c=0;c<o.length;++c){var v=o[c];t[v]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:v}),t[v+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},funcName:v+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var c=0;c<f.length;++c){var v=f[c];t[v]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:v}),t[v+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:v+"s"}),t[v+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},funcName:v+"eq"}),t[v+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},funcName:v+"seq"})}})();var l=["atan2","pow"];(function(){for(var c=0;c<l.length;++c){var v=l[c];t[v+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:v+"op"}),t[v+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:v+"ops"}),t[v+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},funcName:v+"opeq"}),t[v+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},funcName:v+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}(Ni)),Ni}var y0=p0(),Ds=Wu(y0);const D0={prepare:Le,set_scalar(t,e,r){Ds.assigns(Oi(t,e),r)},set_from_chunk(t,e,r){const n=M0(r);Ds.assign(Oi(t,n.to),Oi(e,n.from))}};async function _0(t,e=null,r={}){return ju(t,e,r,D0)}function M0(t){const e=[],r=[];for(const n of t)n.to!==null&&e.push(n.to),n.from!==null&&r.push(n.from);return{to:e,from:r}}function Oi(t,e){const r=[],n=[],i=[],a=[];return e.forEach((s,u)=>{if(typeof s=="number"){r.push(0),n.push(t.shape[u]),i.push(1),a.push(s);return}r.push(s[0]),n.push(s[1]),i.push(s[2]),a.push(null)}),t.hi(...n).lo(...r).step(...i).pick(...a)}function w0(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var ur=1,or=2,Ar=3,A0=4,Xi=5,_s=6378137,E0=6356752314e-3,Ms=.0066943799901413165,Ur=484813681109536e-20,$=Math.PI/2,b0=.16666666666666666,C0=.04722222222222222,F0=.022156084656084655,Z=1e-10,Yt=.017453292519943295,Be=57.29577951308232,yt=Math.PI/4,Hr=Math.PI*2,te=3.14159265359,pe={};pe.greenwich=0;pe.lisbon=-9.131906111111;pe.paris=2.337229166667;pe.bogota=-74.080916666667;pe.madrid=-3.687938888889;pe.rome=12.452333333333;pe.bern=7.439583333333;pe.jakarta=106.807719444444;pe.ferro=-17.666666666667;pe.brussels=4.367975;pe.stockholm=18.058277777778;pe.athens=23.7163375;pe.oslo=10.722916666667;var x0={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},ws=/[\s_\-\/\(\)]/g;function Ze(t,e){if(t[e])return t[e];for(var r=Object.keys(t),n=e.toLowerCase().replace(ws,""),i=-1,a,s;++i<r.length;)if(a=r[i],s=a.toLowerCase().replace(ws,""),s===n)return t[a]}function Yi(t){var e={},r=t.split("+").map(function(u){return u.trim()}).filter(function(u){return u}).reduce(function(u,h){var o=h.split("=");return o.push(!0),u[o[0].toLowerCase()]=o[1],u},{}),n,i,a,s={proj:"projName",datum:"datumCode",rf:function(u){e.rf=parseFloat(u)},lat_0:function(u){e.lat0=u*Yt},lat_1:function(u){e.lat1=u*Yt},lat_2:function(u){e.lat2=u*Yt},lat_ts:function(u){e.lat_ts=u*Yt},lon_0:function(u){e.long0=u*Yt},lon_1:function(u){e.long1=u*Yt},lon_2:function(u){e.long2=u*Yt},alpha:function(u){e.alpha=parseFloat(u)*Yt},gamma:function(u){e.rectified_grid_angle=parseFloat(u)},lonc:function(u){e.longc=u*Yt},x_0:function(u){e.x0=parseFloat(u)},y_0:function(u){e.y0=parseFloat(u)},k_0:function(u){e.k0=parseFloat(u)},k:function(u){e.k0=parseFloat(u)},a:function(u){e.a=parseFloat(u)},b:function(u){e.b=parseFloat(u)},r:function(u){e.a=e.b=parseFloat(u)},r_a:function(){e.R_A=!0},zone:function(u){e.zone=parseInt(u,10)},south:function(){e.utmSouth=!0},towgs84:function(u){e.datum_params=u.split(",").map(function(h){return parseFloat(h)})},to_meter:function(u){e.to_meter=parseFloat(u)},units:function(u){e.units=u;var h=Ze(x0,u);h&&(e.to_meter=h.to_meter)},from_greenwich:function(u){e.from_greenwich=u*Yt},pm:function(u){var h=Ze(pe,u);e.from_greenwich=(h||parseFloat(u))*Yt},nadgrids:function(u){u==="@null"?e.datumCode="none":e.nadgrids=u},axis:function(u){var h="ewnsud";u.length===3&&h.indexOf(u.substr(0,1))!==-1&&h.indexOf(u.substr(1,1))!==-1&&h.indexOf(u.substr(2,1))!==-1&&(e.axis=u)},approx:function(){e.approx=!0}};for(n in r)i=r[n],n in s?(a=s[n],typeof a=="function"?a(i):e[a]=i):e[n]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Jr=1,Zu=2,Hu=3,Hn=4,Ju=5,Ea=-1,N0=/\s/,B0=/[A-Za-z]/,S0=/[A-Za-z84_]/,vi=/[,\]]/,Qu=/[\d\.E\-\+]/;function $e(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Jr}$e.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Hn)for(;N0.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Jr:return this.neutral(t);case Zu:return this.keyword(t);case Hn:return this.quoted(t);case Ju:return this.afterquote(t);case Hu:return this.number(t);case Ea:return}};$e.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Hn;return}if(vi.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)};$e.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Jr;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Jr,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Ea);return}};$e.prototype.number=function(t){if(Qu.test(t)){this.word+=t;return}if(vi.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)};$e.prototype.quoted=function(t){if(t==='"'){this.state=Ju;return}this.word+=t};$e.prototype.keyword=function(t){if(S0.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Jr;return}if(vi.test(t)){this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place)};$e.prototype.neutral=function(t){if(B0.test(t)){this.word=t,this.state=Zu;return}if(t==='"'){this.word="",this.state=Hn;return}if(Qu.test(t)){this.word=t,this.state=Hu;return}if(vi.test(t)){this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place)};$e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Ea)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function T0(t){var e=new $e(t);return e.output()}function Pi(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,i=r.reduce(function(a,s){return yr(s,a),a},n);e&&(t[e]=i)}function yr(t,e){if(!Array.isArray(t)){e[t]=!0;return}var r=t.shift();if(r==="PARAMETER"&&(r=t.shift()),t.length===1){if(Array.isArray(t[0])){e[r]={},yr(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=!0;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){r in e||(e[r]=[]),e[r].push(t);return}Array.isArray(r)||(e[r]={});var n;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&yr(t[2],e[r]);return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]},t.length===4&&yr(t[3],e[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],Pi(e,r,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],Pi(e,r,t),e[r].type=r;return;default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return yr(t,e[r]);return Pi(e,r,t)}}var I0=.017453292519943295,O0=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function P0(t,e){var r=e[0],n=e[1];!(r in t)&&n in t&&(t[r]=t[n],e.length===3&&(t[r]=e[2](t[r])))}function xe(t){return t*I0}function Xu(t){for(var e=Object.keys(t),r=0,n=e.length;r<n;++r){var i=e[r];O0.indexOf(i)!==-1&&R0(t[i]),typeof t[i]=="object"&&Xu(t[i])}}function R0(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var r="",n=0,i=t.AXIS.length;n<i;++n){var a=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];a[0].indexOf("north")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="north"?r+="n":a[0].indexOf("south")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="south"?r+="s":a[0].indexOf("east")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="east"?r+="e":(a[0].indexOf("west")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(t.axis=r)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;t.type==="GEOGCS"&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function u(f){var l=t.to_meter||1;return f*l}var h=function(f){return P0(t,f)},o=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",xe],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",xe],["x0","false_easting",u],["y0","false_northing",u],["long0","central_meridian",xe],["lat0","latitude_of_origin",xe],["lat0","standard_parallel_1",xe],["lat1","standard_parallel_1",xe],["lat2","standard_parallel_2",xe],["azimuth","Azimuth"],["alpha","azimuth",xe],["srsCode","name"]];o.forEach(h),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=xe(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=xe(t.lat0>0?90:-90))}function Yu(t){var e=T0(t),r=e[0],n={};return yr(e,n),Xu(n),n[r]}function ue(t){var e=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?ue[t]=Yi(arguments[1]):ue[t]=Yu(arguments[1]):ue[t]=r}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(n){Array.isArray(n)?ue.apply(e,n):ue(n)});if(typeof t=="string"){if(t in ue)return ue[t]}else"EPSG"in t?ue["EPSG:"+t.EPSG]=t:"ESRI"in t?ue["ESRI:"+t.ESRI]=t:"IAU2000"in t?ue["IAU2000:"+t.IAU2000]=t:console.log(t);return}}w0(ue);function q0(t){return typeof t=="string"}function $0(t){return t in ue}var k0=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function z0(t){return k0.some(function(e){return t.indexOf(e)>-1})}var L0=["3857","900913","3785","102113"];function U0(t){var e=Ze(t,"authority");if(e){var r=Ze(e,"epsg");return r&&L0.indexOf(r)>-1}}function j0(t){var e=Ze(t,"extension");if(e)return Ze(e,"proj4")}function V0(t){return t[0]==="+"}function G0(t){if(q0(t)){if($0(t))return ue[t];if(z0(t)){var e=Yu(t);if(U0(e))return ue["EPSG:3857"];var r=j0(e);return r?Yi(r):e}if(V0(t))return Yi(t)}else return t}function As(t,e){t=t||{};var r,n;if(!e)return t;for(n in e)r=e[n],r!==void 0&&(t[n]=r);return t}function Oe(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}function yn(t){return t<0?-1:1}function H(t){return Math.abs(t)<=te?t:t-yn(t)*Hr}function Ce(t,e,r){var n=t*r,i=.5*t;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*($-e))/n}function Qr(t,e){for(var r=.5*t,n,i,a=$-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(a),i=$-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-a,a+=i,Math.abs(i)<=1e-10)return a;return-9999}function W0(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Oe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Z0(t){var e=t.x,r=t.y;if(r*Be>90&&r*Be<-90&&e*Be>180&&e*Be<-180)return null;var n,i;if(Math.abs(Math.abs(r)-$)<=Z)return null;if(this.sphere)n=this.x0+this.a*this.k0*H(e-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(yt+.5*r));else{var a=Math.sin(r),s=Ce(this.e,r,a);n=this.x0+this.a*this.k0*H(e-this.long0),i=this.y0-this.a*this.k0*Math.log(s)}return t.x=n,t.y=i,t}function H0(t){var e=t.x-this.x0,r=t.y-this.y0,n,i;if(this.sphere)i=$-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var a=Math.exp(-r/(this.a*this.k0));if(i=Qr(this.e,a),i===-9999)return null}return n=H(this.long0+e/(this.a*this.k0)),t.x=n,t.y=i,t}var J0=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],Q0={init:W0,forward:Z0,inverse:H0,names:J0};function X0(){}function Es(t){return t}var Y0=["longlat","identity"],K0={init:X0,forward:Es,inverse:Es,names:Y0},tl=[Q0,K0],qn={},Jn=[];function Ku(t,e){var r=Jn.length;return t.names?(Jn[r]=t,t.names.forEach(function(n){qn[n.toLowerCase()]=r}),this):(console.log(e),!0)}function el(t){if(!t)return!1;var e=t.toLowerCase();if(typeof qn[e]<"u"&&Jn[qn[e]])return Jn[qn[e]]}function rl(){tl.forEach(Ku)}var nl={start:rl,add:Ku,get:el},it={};it.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};it.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};it.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};it.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};it.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};it.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};it.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};it.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};it.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};it.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};it.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};it.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};it.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};it.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};it.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};it.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};it.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};it.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};it.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};it.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};it.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};it.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};it.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};it.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};it.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};it.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};it.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};it.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};it.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};it.hough={a:6378270,rf:297,ellipseName:"Hough"};it.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};it.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};it.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};it.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};it.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};it.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};it.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};it.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};it.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};it.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};it.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};it.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var il=it.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};it.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function al(t,e,r,n){var i=t*t,a=e*e,s=(i-a)/i,u=0;n?(t*=1-s*(b0+s*(C0+s*F0)),i=t*t,s=0):u=Math.sqrt(s);var h=(i-a)/a;return{es:s,e:u,ep2:h}}function sl(t,e,r,n,i){if(!t){var a=Ze(it,n);a||(a=il),t=a.a,e=a.b,r=a.rf}return r&&!e&&(e=(1-1/r)*t),(r===0||Math.abs(t-e)<Z)&&(i=!0,e=t),{a:t,b:e,rf:r,sphere:i}}var $n={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var ul in $n){var bs=$n[ul];$n[bs.datumName]=bs}function ol(t,e,r,n,i,a,s){var u={};return t===void 0||t==="none"?u.datum_type=Xi:u.datum_type=A0,e&&(u.datum_params=e.map(parseFloat),(u.datum_params[0]!==0||u.datum_params[1]!==0||u.datum_params[2]!==0)&&(u.datum_type=ur),u.datum_params.length>3&&(u.datum_params[3]!==0||u.datum_params[4]!==0||u.datum_params[5]!==0||u.datum_params[6]!==0)&&(u.datum_type=or,u.datum_params[3]*=Ur,u.datum_params[4]*=Ur,u.datum_params[5]*=Ur,u.datum_params[6]=u.datum_params[6]/1e6+1)),s&&(u.datum_type=Ar,u.grids=s),u.a=r,u.b=n,u.es=i,u.ep2=a,u}var to={};function hl(t,e){var r=new DataView(e),n=cl(r),i=dl(r,n),a=vl(r,i,n),s={header:i,subgrids:a};return to[t]=s,s}function fl(t){if(t===void 0)return null;var e=t.split(",");return e.map(ll)}function ll(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:to[t]||null,isNull:!1}}function Dr(t){return t/3600*Math.PI/180}function cl(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function dl(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Ki(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Ki(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function vl(t,e,r){for(var n=176,i=[],a=0;a<e.nSubgrids;a++){var s=ml(t,n,r),u=pl(t,n,s,r),h=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),o=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);i.push({ll:[Dr(s.lowerLongitude),Dr(s.lowerLatitude)],del:[Dr(s.longitudeInterval),Dr(s.latitudeInterval)],lim:[h,o],count:s.gridNodeCount,cvs:gl(u)}),n+=176+s.gridNodeCount*16}return i}function gl(t){return t.map(function(e){return[Dr(e.longitudeShift),Dr(e.latitudeShift)]})}function ml(t,e,r){return{name:Ki(t,e+8,e+16).trim(),parent:Ki(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function pl(t,e,r,n){for(var i=e+176,a=16,s=[],u=0;u<r.gridNodeCount;u++){var h={latitudeShift:t.getFloat32(i+u*a,n),longitudeShift:t.getFloat32(i+u*a+4,n),latitudeAccuracy:t.getFloat32(i+u*a+8,n),longitudeAccuracy:t.getFloat32(i+u*a+12,n)};s.push(h)}return s}function Te(t,e){if(!(this instanceof Te))return new Te(t);e=e||function(o){if(o)throw o};var r=G0(t);if(typeof r!="object"){e("Could not parse to valid json: "+t);return}var n=Te.projections.get(r.projName);if(!n){e("Could not get projection name from: "+t);return}if(r.datumCode&&r.datumCode!=="none"){var i=Ze($n,r.datumCode);i&&(r.datum_params=r.datum_params||(i.towgs84?i.towgs84.split(","):null),r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var a=sl(r.a,r.b,r.rf,r.ellps,r.sphere),s=al(a.a,a.b,a.rf,r.R_A),u=fl(r.nadgrids),h=r.datum||ol(r.datumCode,r.datum_params,a.a,a.b,s.es,s.ep2,u);As(this,r),As(this,n),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=h,this.init(),e(null,this)}Te.projections=nl;Te.projections.start();function yl(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===ur?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===or?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function eo(t,e,r){var n=t.x,i=t.y,a=t.z?t.z:0,s,u,h,o;if(i<-$&&i>-1.001*$)i=-$;else if(i>$&&i<1.001*$)i=$;else{if(i<-$)return{x:-1/0,y:-1/0,z:t.z};if(i>$)return{x:1/0,y:1/0,z:t.z}}return n>Math.PI&&(n-=2*Math.PI),u=Math.sin(i),o=Math.cos(i),h=u*u,s=r/Math.sqrt(1-e*h),{x:(s+a)*o*Math.cos(n),y:(s+a)*o*Math.sin(n),z:(s*(1-e)+a)*u}}function ro(t,e,r,n){var i=1e-12,a=i*i,s=30,u,h,o,f,l,c,v,g,d,m,p,M,D,A=t.x,y=t.y,_=t.z?t.z:0,C,b,E;if(u=Math.sqrt(A*A+y*y),h=Math.sqrt(A*A+y*y+_*_),u/r<i){if(C=0,h/r<i)return b=$,E=-n,{x:t.x,y:t.y,z:t.z}}else C=Math.atan2(y,A);o=_/h,f=u/h,l=1/Math.sqrt(1-e*(2-e)*f*f),g=f*(1-e)*l,d=o*l,D=0;do D++,v=r/Math.sqrt(1-e*d*d),E=u*g+_*d-v*(1-e*d*d),c=e*v/(v+E),l=1/Math.sqrt(1-c*(2-c)*f*f),m=f*(1-c)*l,p=o*l,M=p*g-m*d,g=m,d=p;while(M*M>a&&D<s);return b=Math.atan(p/Math.abs(m)),{x:C,y:b,z:E}}function Dl(t,e,r){if(e===ur)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===or){var n=r[0],i=r[1],a=r[2],s=r[3],u=r[4],h=r[5],o=r[6];return{x:o*(t.x-h*t.y+u*t.z)+n,y:o*(h*t.x+t.y-s*t.z)+i,z:o*(-u*t.x+s*t.y+t.z)+a}}}function _l(t,e,r){if(e===ur)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===or){var n=r[0],i=r[1],a=r[2],s=r[3],u=r[4],h=r[5],o=r[6],f=(t.x-n)/o,l=(t.y-i)/o,c=(t.z-a)/o;return{x:f+h*l-u*c,y:-h*f+l+s*c,z:u*f-s*l+c}}}function Nn(t){return t===ur||t===or}function Ml(t,e,r){if(yl(t,e)||t.datum_type===Xi||e.datum_type===Xi)return r;var n=t.a,i=t.es;if(t.datum_type===Ar){var a=Cs(t,!1,r);if(a!==0)return;n=_s,i=Ms}var s=e.a,u=e.b,h=e.es;if(e.datum_type===Ar&&(s=_s,u=E0,h=Ms),i===h&&n===s&&!Nn(t.datum_type)&&!Nn(e.datum_type))return r;if(r=eo(r,i,n),Nn(t.datum_type)&&(r=Dl(r,t.datum_type,t.datum_params)),Nn(e.datum_type)&&(r=_l(r,e.datum_type,e.datum_params)),r=ro(r,h,s,u),e.datum_type===Ar){var o=Cs(e,!0,r);if(o!==0)return}return r}function Cs(t,e,r){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},a=[];t:for(var s=0;s<t.grids.length;s++){var u=t.grids[s];if(a.push(u.name),u.isNull){i=n;break}if(u.mandatory,u.grid===null){if(u.mandatory)return console.log("Unable to find mandatory grid '"+u.name+"'"),-1;continue}for(var h=u.grid.subgrids,o=0,f=h.length;o<f;o++){var l=h[o],c=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,v=l.ll[0]-c,g=l.ll[1]-c,d=l.ll[0]+(l.lim[0]-1)*l.del[0]+c,m=l.ll[1]+(l.lim[1]-1)*l.del[1]+c;if(!(g>n.y||v>n.x||m<n.y||d<n.x)&&(i=wl(n,e,l),!isNaN(i.x)))break t}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Be+" "+n.y*Be+" tried: '"+a+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function wl(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var i={x:t.x,y:t.y};i.x-=r.ll[0],i.y-=r.ll[1],i.x=H(i.x-Math.PI)+Math.PI;var a=Fs(i,r);if(e){if(isNaN(a.x))return n;a.x=i.x-a.x,a.y=i.y-a.y;var s=9,u=1e-12,h,o;do{if(o=Fs(a,r),isNaN(o.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:i.x-(o.x+a.x),y:i.y-(o.y+a.y)},a.x+=h.x,a.y+=h.y}while(s--&&Math.abs(h.x)>u&&Math.abs(h.y)>u);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=H(a.x+r.ll[0]),n.y=a.y+r.ll[1]}else isNaN(a.x)||(n.x=t.x+a.x,n.y=t.y+a.y);return n}function Fs(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]},n={x:Math.floor(r.x),y:Math.floor(r.y)},i={x:r.x-1*n.x,y:r.y-1*n.y},a={x:Number.NaN,y:Number.NaN},s;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return a;s=n.y*e.lim[0]+n.x;var u={x:e.cvs[s][0],y:e.cvs[s][1]};s++;var h={x:e.cvs[s][0],y:e.cvs[s][1]};s+=e.lim[0];var o={x:e.cvs[s][0],y:e.cvs[s][1]};s--;var f={x:e.cvs[s][0],y:e.cvs[s][1]},l=i.x*i.y,c=i.x*(1-i.y),v=(1-i.x)*(1-i.y),g=(1-i.x)*i.y;return a.x=v*u.x+c*h.x+g*f.x+l*o.x,a.y=v*u.y+c*h.y+g*f.y+l*o.y,a}function xs(t,e,r){var n=r.x,i=r.y,a=r.z||0,s,u,h,o={};for(h=0;h<3;h++)if(!(e&&h===2&&r.z===void 0))switch(h===0?(s=n,"ew".indexOf(t.axis[h])!==-1?u="x":u="y"):h===1?(s=i,"ns".indexOf(t.axis[h])!==-1?u="y":u="x"):(s=a,u="z"),t.axis[h]){case"e":o[u]=s;break;case"w":o[u]=-s;break;case"n":o[u]=s;break;case"s":o[u]=-s;break;case"u":r[u]!==void 0&&(o.z=s);break;case"d":r[u]!==void 0&&(o.z=-s);break;default:return null}return o}function no(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Al(t){Ns(t.x),Ns(t.y)}function Ns(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function El(t,e){return(t.datum.datum_type===ur||t.datum.datum_type===or||t.datum.datum_type===Ar)&&e.datumCode!=="WGS84"||(e.datum.datum_type===ur||e.datum.datum_type===or||e.datum.datum_type===Ar)&&t.datumCode!=="WGS84"}function Qn(t,e,r,n){var i;Array.isArray(r)?r=no(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var a=r.z!==void 0;if(Al(r),t.datum&&e.datum&&El(t,e)&&(i=new Te("WGS84"),r=Qn(t,i,r,n),t=i),n&&t.axis!=="enu"&&(r=xs(t,!1,r)),t.projName==="longlat")r={x:r.x*Yt,y:r.y*Yt,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),r=t.inverse(r),!r)return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=Ml(t.datum,e.datum,r),!!r)return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),e.projName==="longlat"?r={x:r.x*Be,y:r.y*Be,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&e.axis!=="enu"?xs(e,!0,r):(r&&!a&&delete r.z,r)}var Bs=Te("WGS84");function Ri(t,e,r,n){var i,a,s;return Array.isArray(r)?(i=Qn(t,e,r,n)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(r.slice(3)):[i.x,i.y,r[2]].concat(r.slice(3)):[i.x,i.y].concat(r.slice(2)):[i.x,i.y]):(a=Qn(t,e,r,n),s=Object.keys(r),s.length===2||s.forEach(function(u){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(u==="x"||u==="y"||u==="z")return}else if(u==="x"||u==="y")return;a[u]=r[u]}),a)}function Ss(t){return t instanceof Te?t:t.oProj?t.oProj:Te(t)}function ge(t,e,r){t=Ss(t);var n=!1,i;return typeof e>"u"?(e=t,t=Bs,n=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,e=t,t=Bs,n=!0),e=Ss(e),r?Ri(t,e,r):(i={forward:function(a,s){return Ri(t,e,a,s)},inverse:function(a,s){return Ri(e,t,a,s)}},n&&(i.oProj=e),i)}var Ts=6,io="AJSAJS",ao="AFAFAF",_r=65,ce=73,Me=79,kr=86,zr=90,bl={forward:so,inverse:Cl,toPoint:uo};function so(t,e){return e=e||5,Nl(Fl({lat:t[1],lon:t[0]}),e)}function Cl(t){var e=ba(ho(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function uo(t){var e=ba(ho(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function qi(t){return t*(Math.PI/180)}function Is(t){return 180*(t/Math.PI)}function Fl(t){var e=t.lat,r=t.lon,n=6378137,i=.00669438,a=.9996,s,u,h,o,f,l,c,v=qi(e),g=qi(r),d,m;m=Math.floor((r+180)/6)+1,r===180&&(m=60),e>=56&&e<64&&r>=3&&r<12&&(m=32),e>=72&&e<84&&(r>=0&&r<9?m=31:r>=9&&r<21?m=33:r>=21&&r<33?m=35:r>=33&&r<42&&(m=37)),s=(m-1)*6-180+3,d=qi(s),u=i/(1-i),h=n/Math.sqrt(1-i*Math.sin(v)*Math.sin(v)),o=Math.tan(v)*Math.tan(v),f=u*Math.cos(v)*Math.cos(v),l=Math.cos(v)*(g-d),c=n*((1-i/4-3*i*i/64-5*i*i*i/256)*v-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*v)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*v)-35*i*i*i/3072*Math.sin(6*v));var p=a*h*(l+(1-o+f)*l*l*l/6+(5-18*o+o*o+72*f-58*u)*l*l*l*l*l/120)+5e5,M=a*(c+h*Math.tan(v)*(l*l/2+(5-o+9*f+4*f*f)*l*l*l*l/24+(61-58*o+o*o+600*f-330*u)*l*l*l*l*l*l/720));return e<0&&(M+=1e7),{northing:Math.round(M),easting:Math.round(p),zoneNumber:m,zoneLetter:xl(e)}}function ba(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var a=.9996,s=6378137,u=.00669438,h,o=(1-Math.sqrt(1-u))/(1+Math.sqrt(1-u)),f,l,c,v,g,d,m,p,M,D=r-5e5,A=e;n<"N"&&(A-=1e7),m=(i-1)*6-180+3,h=u/(1-u),d=A/a,p=d/(s*(1-u/4-3*u*u/64-5*u*u*u/256)),M=p+(3*o/2-27*o*o*o/32)*Math.sin(2*p)+(21*o*o/16-55*o*o*o*o/32)*Math.sin(4*p)+151*o*o*o/96*Math.sin(6*p),f=s/Math.sqrt(1-u*Math.sin(M)*Math.sin(M)),l=Math.tan(M)*Math.tan(M),c=h*Math.cos(M)*Math.cos(M),v=s*(1-u)/Math.pow(1-u*Math.sin(M)*Math.sin(M),1.5),g=D/(f*a);var y=M-f*Math.tan(M)/v*(g*g/2-(5+3*l+10*c-4*c*c-9*h)*g*g*g*g/24+(61+90*l+298*c+45*l*l-252*h-3*c*c)*g*g*g*g*g*g/720);y=Is(y);var _=(g-(1+2*l+c)*g*g*g/6+(5-2*c+28*l-3*c*c+8*h+24*l*l)*g*g*g*g*g/120)/Math.cos(M);_=m+Is(_);var C;if(t.accuracy){var b=ba({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:b.lat,right:b.lon,bottom:y,left:_}}else C={lat:y,lon:_};return C}function xl(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Nl(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Bl(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+n.substr(n.length-5,e)}function Bl(t,e,r){var n=oo(r),i=Math.floor(t/1e5),a=Math.floor(e/1e5)%20;return Sl(i,a,n)}function oo(t){var e=t%Ts;return e===0&&(e=Ts),e}function Sl(t,e,r){var n=r-1,i=io.charCodeAt(n),a=ao.charCodeAt(n),s=i+t-1,u=a+e,h=!1;s>zr&&(s=s-zr+_r-1,h=!0),(s===ce||i<ce&&s>ce||(s>ce||i<ce)&&h)&&s++,(s===Me||i<Me&&s>Me||(s>Me||i<Me)&&h)&&(s++,s===ce&&s++),s>zr&&(s=s-zr+_r-1),u>kr?(u=u-kr+_r-1,h=!0):h=!1,(u===ce||a<ce&&u>ce||(u>ce||a<ce)&&h)&&u++,(u===Me||a<Me&&u>Me||(u>Me||a<Me)&&h)&&(u++,u===ce&&u++),u>kr&&(u=u-kr+_r-1);var o=String.fromCharCode(s)+String.fromCharCode(u);return o}function ho(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,r=null,n="",i,a=0;!/[A-Z]/.test(i=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;n+=i,a++}var s=parseInt(n,10);if(a===0||a+3>e)throw"MGRSPoint bad conversion from: "+t;var u=t.charAt(a++);if(u<="A"||u==="B"||u==="Y"||u>="Z"||u==="I"||u==="O")throw"MGRSPoint zone letter "+u+" not handled: "+t;r=t.substring(a,a+=2);for(var h=oo(s),o=Tl(r.charAt(0),h),f=Il(r.charAt(1),h);f<Ol(u);)f+=2e6;var l=e-a;if(l%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var c=l/2,v=0,g=0,d,m,p,M,D;return c>0&&(d=1e5/Math.pow(10,c),m=t.substring(a,a+c),v=parseFloat(m)*d,p=t.substring(a+c),g=parseFloat(p)*d),M=v+o,D=g+f,{easting:M,northing:D,zoneLetter:u,zoneNumber:s,accuracy:d}}function Tl(t,e){for(var r=io.charCodeAt(e-1),n=1e5,i=!1;r!==t.charCodeAt(0);){if(r++,r===ce&&r++,r===Me&&r++,r>zr){if(i)throw"Bad character: "+t;r=_r,i=!0}n+=1e5}return n}function Il(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=ao.charCodeAt(e-1),n=0,i=!1;r!==t.charCodeAt(0);){if(r++,r===ce&&r++,r===Me&&r++,r>kr){if(i)throw"Bad character: "+t;r=_r,i=!0}n+=1e5}return n}function Ol(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Nr(t,e,r){if(!(this instanceof Nr))return new Nr(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Nr.fromMGRS=function(t){return new Nr(uo(t))};Nr.prototype.toMGRS=function(t){return so([this.x,this.y],t)};var Pl=1,Rl=.25,Os=.046875,Ps=.01953125,Rs=.01068115234375,ql=.75,$l=.46875,kl=.013020833333333334,zl=.007120768229166667,Ll=.3645833333333333,Ul=.005696614583333333,jl=.3076171875;function Ca(t){var e=[];e[0]=Pl-t*(Rl+t*(Os+t*(Ps+t*Rs))),e[1]=t*(ql-t*(Os+t*(Ps+t*Rs)));var r=t*t;return e[2]=r*($l-t*(kl+t*zl)),r*=t,e[3]=r*(Ll-t*Ul),e[4]=r*t*jl,e}function Ir(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var Vl=20;function Fa(t,e,r){for(var n=1/(1-e),i=t,a=Vl;a;--a){var s=Math.sin(i),u=1-e*s*s;if(u=(Ir(i,s,Math.cos(i),r)-t)*(u*Math.sqrt(u))*n,i-=u,Math.abs(u)<Z)return i}return i}function Gl(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Ca(this.es),this.ml0=Ir(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Wl(t){var e=t.x,r=t.y,n=H(e-this.long0),i,a,s,u=Math.sin(r),h=Math.cos(r);if(this.es){var f=h*n,l=Math.pow(f,2),c=this.ep2*Math.pow(h,2),v=Math.pow(c,2),g=Math.abs(h)>Z?Math.tan(r):0,d=Math.pow(g,2),m=Math.pow(d,2);i=1-this.es*Math.pow(u,2),f=f/Math.sqrt(i);var p=Ir(r,u,h,this.en);a=this.a*(this.k0*f*(1+l/6*(1-d+c+l/20*(5-18*d+m+14*c-58*d*c+l/42*(61+179*m-m*d-479*d)))))+this.x0,s=this.a*(this.k0*(p-this.ml0+u*n*f/2*(1+l/12*(5-d+9*c+4*v+l/30*(61+m-58*d+270*c-330*d*c+l/56*(1385+543*m-m*d-3111*d))))))+this.y0}else{var o=h*Math.sin(n);if(Math.abs(Math.abs(o)-1)<Z)return 93;if(a=.5*this.a*this.k0*Math.log((1+o)/(1-o))+this.x0,s=h*Math.cos(n)/Math.sqrt(1-Math.pow(o,2)),o=Math.abs(s),o>=1){if(o-1>Z)return 93;s=0}else s=Math.acos(s);r<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return t.x=a,t.y=s,t}function Zl(t){var e,r,n,i,a=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,r=Fa(e,this.es,this.en),Math.abs(r)<$){var l=Math.sin(r),c=Math.cos(r),v=Math.abs(c)>Z?Math.tan(r):0,g=this.ep2*Math.pow(c,2),d=Math.pow(g,2),m=Math.pow(v,2),p=Math.pow(m,2);e=1-this.es*Math.pow(l,2);var M=a*Math.sqrt(e)/this.k0,D=Math.pow(M,2);e=e*v,n=r-e*D/(1-this.es)*.5*(1-D/12*(5+3*m-9*g*m+g-4*d-D/30*(61+90*m-252*g*m+45*p+46*g-D/56*(1385+3633*m+4095*p+1574*p*m)))),i=H(this.long0+M*(1-D/6*(1+2*m+g-D/20*(5+28*m+24*p+8*g*m+6*g-D/42*(61+662*m+1320*p+720*p*m))))/c)}else n=$*yn(s),i=0;else{var u=Math.exp(a/this.k0),h=.5*(u-1/u),o=this.lat0+s/this.k0,f=Math.cos(o);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(h,2))),n=Math.asin(e),s<0&&(n=-n),h===0&&f===0?i=0:i=H(Math.atan2(h,f)+this.long0)}return t.x=i,t.y=n,t}var Hl=["Fast_Transverse_Mercator","Fast Transverse Mercator"],kn={init:Gl,forward:Wl,inverse:Zl,names:Hl};function fo(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function ve(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function Jl(t){var e=1+t,r=e-1;return r===0?t:t*Math.log(e)/r}function Ql(t){var e=Math.abs(t);return e=Jl(e*(1+e/(ve(1,e)+1))),t<0?-e:e}function xa(t,e){for(var r=2*Math.cos(2*e),n=t.length-1,i=t[n],a=0,s;--n>=0;)s=-a+r*i+t[n],a=i,i=s;return e+s*Math.sin(2*e)}function Xl(t,e){for(var r=2*Math.cos(e),n=t.length-1,i=t[n],a=0,s;--n>=0;)s=-a+r*i+t[n],a=i,i=s;return Math.sin(e)*s}function Yl(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function lo(t,e,r){for(var n=Math.sin(e),i=Math.cos(e),a=fo(r),s=Yl(r),u=2*i*s,h=-2*n*a,o=t.length-1,f=t[o],l=0,c=0,v=0,g,d;--o>=0;)g=c,d=l,c=f,l=v,f=-g+u*c-h*l+t[o],v=-d+h*c+u*l;return u=n*s,h=i*a,[u*f-h*v,u*v+h*f]}function Kl(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(kn.init.apply(this),this.forward=kn.forward,this.inverse=kn.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),r=r*e,this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r=r*e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),r=r*e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175))),r=r*e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r=r*e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),r=r*e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r=r*e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r=r*e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r=r*e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var n=xa(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Xl(this.gtu,2*n))}function tc(t){var e=H(t.x-this.long0),r=t.y;r=xa(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),a=Math.sin(e),s=Math.cos(e);r=Math.atan2(n,s*i),e=Math.atan2(a*i,ve(n,i*s)),e=Ql(Math.tan(e));var u=lo(this.gtu,2*r,2*e);r=r+u[0],e=e+u[1];var h,o;return Math.abs(e)<=2.623395162778?(h=this.a*(this.Qn*e)+this.x0,o=this.a*(this.Qn*r+this.Zb)+this.y0):(h=1/0,o=1/0),t.x=h,t.y=o,t}function ec(t){var e=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,e=e/this.Qn;var n,i;if(Math.abs(e)<=2.623395162778){var a=lo(this.utg,2*r,2*e);r=r+a[0],e=e+a[1],e=Math.atan(fo(e));var s=Math.sin(r),u=Math.cos(r),h=Math.sin(e),o=Math.cos(e);r=Math.atan2(s*o,ve(h,o*u)),e=Math.atan2(h,o*u),n=H(e+this.long0),i=xa(this.cgb,r)}else n=1/0,i=1/0;return t.x=n,t.y=i,t}var rc=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],zn={init:Kl,forward:tc,inverse:ec,names:rc};function nc(t,e){if(t===void 0){if(t=Math.floor((H(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var ic="etmerc";function ac(){var t=nc(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Yt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,zn.init.apply(this),this.forward=zn.forward,this.inverse=zn.inverse}var sc=["Universal Transverse Mercator System","utm"],uc={init:ac,names:sc,dependsOn:ic};function Na(t,e){return Math.pow((1-t)/(1+t),e)}var oc=20;function hc(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+yt)/(Math.pow(Math.tan(.5*this.lat0+yt),this.C)*Na(this.e*t,this.ratexp))}function fc(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+yt),this.C)*Na(this.e*Math.sin(r),this.ratexp))-$,t.x=this.C*e,t}function lc(t){for(var e=1e-14,r=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+yt)/this.K,1/this.C),a=oc;a>0&&(n=2*Math.atan(i*Na(this.e*Math.sin(t.y),-.5*this.e))-$,!(Math.abs(n-t.y)<e));--a)t.y=n;return a?(t.x=r,t.y=n,t):null}var Ba={init:hc,forward:fc,inverse:lc};function cc(){Ba.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function dc(t){var e,r,n,i;return t.x=H(t.x-this.long0),Ba.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=i*r*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function vc(t){var e,r,n,i,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=ve(t.x,t.y)){var s=2*Math.atan2(a,this.R2);e=Math.sin(s),r=Math.cos(s),i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/a),n=Math.atan2(t.x*e,a*this.cosc0*r-t.y*this.sinc0*e)}else i=this.phic0,n=0;return t.x=n,t.y=i,Ba.inverse.apply(this,[t]),t.x=H(t.x+this.long0),t}var gc=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],mc={init:cc,forward:dc,inverse:vc,names:gc};function pc(t,e,r){return e*=r,Math.tan(.5*($+t))*Math.pow((1-e)/(1+e),.5*r)}function yc(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Z&&(this.k0=.5*(1+yn(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Z&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Z&&Math.abs(Math.cos(this.lat_ts))>Z&&(this.k0=.5*this.cons*Oe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ce(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Oe(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-$,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Dc(t){var e=t.x,r=t.y,n=Math.sin(r),i=Math.cos(r),a,s,u,h,o,f,l=H(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Z&&Math.abs(r+this.lat0)<=Z?(t.x=NaN,t.y=NaN,t):this.sphere?(a=2*this.k0/(1+this.sinlat0*n+this.coslat0*i*Math.cos(l)),t.x=this.a*a*i*Math.sin(l)+this.x0,t.y=this.a*a*(this.coslat0*n-this.sinlat0*i*Math.cos(l))+this.y0,t):(s=2*Math.atan(this.ssfn_(r,n,this.e))-$,h=Math.cos(s),u=Math.sin(s),Math.abs(this.coslat0)<=Z?(o=Ce(this.e,r*this.con,this.con*n),f=2*this.a*this.k0*o/this.cons,t.x=this.x0+f*Math.sin(e-this.long0),t.y=this.y0-this.con*f*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Z?(a=2*this.a*this.k0/(1+h*Math.cos(l)),t.y=a*u):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*u+this.cosX0*h*Math.cos(l))),t.y=a*(this.cosX0*u-this.sinX0*h*Math.cos(l))+this.y0),t.x=a*h*Math.sin(l)+this.x0,t))}function _c(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,i,a,s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,r=this.lat0,s<=Z?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/s),Math.abs(this.coslat0)<Z?this.lat0>0?e=H(this.long0+Math.atan2(t.x,-1*t.y)):e=H(this.long0+Math.atan2(t.x,t.y)):e=H(this.long0+Math.atan2(t.x*Math.sin(u),s*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u))),t.x=e,t.y=r,t)}else if(Math.abs(this.coslat0)<=Z){if(s<=Z)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=s*this.cons/(2*this.a*this.k0),r=this.con*Qr(this.e,n),e=this.con*H(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=Z?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/s),e=H(this.long0+Math.atan2(t.x*Math.sin(i),s*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),r=-1*Qr(this.e,Math.tan(.5*($+a)));return t.x=e,t.y=r,t}var Mc=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],wc={init:yc,forward:Dc,inverse:_c,names:Mc,ssfn_:pc};function Ac(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=this.rf,i=1/n,a=2*i-Math.pow(i,2),s=this.e=Math.sqrt(a);this.R=this.k0*r*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var u=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),o=Math.log((1+s*e)/(1-s*e));this.K=u-this.alpha*h+this.alpha*s/2*o}function Ec(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),u=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(u))/(1-Math.sin(u)))+this.y0,t.x=this.R*s+this.x0,t}function bc(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),u=this.lambda0+s/this.alpha,h=0,o=a,f=-1e3,l=0;Math.abs(o-f)>1e-7;){if(++l>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(o))/2)),f=o,o=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=u,t.y=o,t}var Cc=["somerc"],Fc={init:Ac,forward:Ec,inverse:bc,names:Cc},pr=1e-7;function xc(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1}function Nc(){var t,e,r,n,i,a,s,u,h,o,f=0,l,c=0,v=0,g=0,d=0,m=0,p=0;this.no_off=xc(this),this.no_rot="no_rot"in this;var M=!1;"alpha"in this&&(M=!0);var D=!1;if("rectified_grid_angle"in this&&(D=!0),M&&(p=this.alpha),D&&(f=this.rectified_grid_angle*Yt),M||D)c=this.longc;else if(v=this.long1,d=this.lat1,g=this.long2,m=this.lat2,Math.abs(d-m)<=pr||(t=Math.abs(d))<=pr||Math.abs(t-$)<=pr||Math.abs(Math.abs(this.lat0)-$)<=pr||Math.abs(Math.abs(m)-$)<=pr)throw new Error;var A=1-this.es;e=Math.sqrt(A),Math.abs(this.lat0)>Z?(u=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*u*u,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/A),this.A=this.B*this.k0*e/t,n=this.B*e/(r*Math.sqrt(t)),i=n*n-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(Ce(this.e,this.lat0,u),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=i=1),M||D?(M?(l=Math.asin(Math.sin(p)/n),D||(f=p)):(l=f,p=Math.asin(n*Math.sin(l))),this.lam0=c-Math.asin(.5*(i-1/i)*Math.tan(l))/this.B):(a=Math.pow(Ce(this.e,d,Math.sin(d)),this.B),s=Math.pow(Ce(this.e,m,Math.sin(m)),this.B),i=this.E/a,h=(s-a)/(s+a),o=this.E*this.E,o=(o-s*a)/(o+s*a),t=v-g,t<-Math.pi?g-=Hr:t>Math.pi&&(g+=Hr),this.lam0=H(.5*(v+g)-Math.atan(o*Math.tan(.5*this.B*(v-g))/h)/this.B),l=Math.atan(2*Math.sin(this.B*H(v-this.lam0))/(i-1/i)),f=p=Math.asin(n*Math.sin(l))),this.singam=Math.sin(l),this.cosgam=Math.cos(l),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(p))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*l,this.v_pole_n=this.ArB*Math.log(Math.tan(yt-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(yt+i))}function Bc(t){var e={},r,n,i,a,s,u,h,o;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-$)>Z){if(s=this.E/Math.pow(Ce(this.e,t.y,Math.sin(t.y)),this.B),u=1/s,r=.5*(s-u),n=.5*(s+u),a=Math.sin(this.B*t.x),i=(r*this.singam-a*this.cosgam)/n,Math.abs(Math.abs(i)-1)<Z)throw new Error;o=.5*this.ArB*Math.log((1-i)/(1+i)),u=Math.cos(this.B*t.x),Math.abs(u)<pr?h=this.A*t.x:h=this.ArB*Math.atan2(r*this.cosgam+a*this.singam,u)}else o=t.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*t.y;return this.no_rot?(e.x=h,e.y=o):(h-=this.u_0,e.x=o*this.cosrot+h*this.sinrot,e.y=h*this.cosrot-o*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Sc(t){var e,r,n,i,a,s,u,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*r),i=.5*(n-1/n),a=.5*(n+1/n),s=Math.sin(this.BrA*e),u=(s*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(u)-1)<Z)h.x=0,h.y=u<0?-$:$;else{if(h.y=this.E/Math.sqrt((1+u)/(1-u)),h.y=Qr(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(i*this.cosgam-s*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h}var Tc=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],Ic={init:Nc,forward:Bc,inverse:Sc,names:Tc};function Oc(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Z)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=Oe(this.e,e,r),i=Ce(this.e,this.lat1,e),a=Math.sin(this.lat2),s=Math.cos(this.lat2),u=Oe(this.e,a,s),h=Ce(this.e,this.lat2,a),o=Ce(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Z?this.ns=Math.log(n/u)/Math.log(i/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(o,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Pc(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=Z&&(r=yn(r)*($-2*Z));var n=Math.abs(Math.abs(r)-$),i,a;if(n>Z)i=Ce(this.e,r,Math.sin(r)),a=this.a*this.f0*Math.pow(i,this.ns);else{if(n=r*this.ns,n<=0)return null;a=0}var s=this.ns*H(e-this.long0);return t.x=this.k0*(a*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-a*Math.cos(s))+this.y0,t}function Rc(t){var e,r,n,i,a,s=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+u*u),r=1):(e=-Math.sqrt(s*s+u*u),r=-1);var h=0;if(e!==0&&(h=Math.atan2(r*s,r*u)),e!==0||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),i=Qr(this.e,n),i===-9999)return null}else i=-$;return a=H(h/this.ns+this.long0),t.x=a,t.y=i,t}var qc=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],$c={init:Oc,forward:Pc,inverse:Rc,names:qc};function kc(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function zc(t){var e,r,n,i,a,s,u,h=t.x,o=t.y,f=H(h-this.long0);return e=Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(o/2+this.s45),this.alfa)/e)-this.s45),n=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),a=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),s=this.n*a,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=u*Math.cos(s)/1,t.x=u*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Lc(t){var e,r,n,i,a,s,u,h,o=t.x;t.x=t.y,t.y=o,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x),i=a/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,u=e,h=0;var f=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.e/2))-this.s45),Math.abs(u-t.y)<1e-10&&(h=1),u=t.y,f+=1;while(h===0&&f<15);return f>=15?null:t}var Uc=["Krovak","krovak"],jc={init:kc,forward:zc,inverse:Lc,names:Uc};function oe(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)}function Dn(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function _n(t){return .375*t*(1+.25*t*(1+.46875*t))}function Mn(t){return .05859375*t*t*(1+.75*t)}function wn(t){return t*t*t*(35/3072)}function Br(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}function Xe(t){return Math.abs(t)<$?t:t-yn(t)*Math.PI}function Xn(t,e,r,n,i){var a,s;a=t/e;for(var u=0;u<15;u++)if(s=(t-(e*a-r*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)))/(e-2*r*Math.cos(2*a)+4*n*Math.cos(4*a)-6*i*Math.cos(6*a)),a+=s,Math.abs(s)<=1e-10)return a;return NaN}function Vc(){this.sphere||(this.e0=Dn(this.es),this.e1=_n(this.es),this.e2=Mn(this.es),this.e3=wn(this.es),this.ml0=this.a*oe(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Gc(t){var e,r,n=t.x,i=t.y;if(n=H(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var a=Math.sin(i),s=Math.cos(i),u=Br(this.a,this.e,a),h=Math.tan(i)*Math.tan(i),o=n*Math.cos(i),f=o*o,l=this.es*s*s/(1-this.es),c=this.a*oe(this.e0,this.e1,this.e2,this.e3,i);e=u*o*(1-f*h*(1/6-(8-h+8*l)*f/120)),r=c-this.ml0+u*a/s*f*(.5+(5-h+6*l)*f/24)}return t.x=e+this.x0,t.y=r+this.y0,t}function Wc(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,n,i;if(this.sphere){var a=r+this.lat0;n=Math.asin(Math.sin(a)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(a))}else{var s=this.ml0/this.a+r,u=Xn(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(u)-$)<=Z)return t.x=this.long0,t.y=$,r<0&&(t.y*=-1),t;var h=Br(this.a,this.e,Math.sin(u)),o=h*h*h/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(u),2),l=e*this.a/h,c=l*l;n=u-h*Math.tan(u)/o*l*l*(.5-(1+3*f)*l*l/24),i=l*(1-c*(f/3+(1+3*f)*f*c/15))/Math.cos(u)}return t.x=H(i+this.long0),t.y=Xe(n),t}var Zc=["Cassini","Cassini_Soldner","cass"],Hc={init:Vc,forward:Gc,inverse:Wc,names:Zc};function We(t,e){var r;return t>1e-7?(r=t*e,(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))):2*e}var Jc=1,Qc=2,Xc=3,Yc=4;function Kc(){var t=Math.abs(this.lat0);if(Math.abs(t-$)<Z?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Z?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=We(this.e,1),this.mmf=.5/(1-this.es),this.apa=o1(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=We(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function t1(t){var e,r,n,i,a,s,u,h,o,f,l=t.x,c=t.y;if(l=H(l-this.long0),this.sphere){if(a=Math.sin(c),f=Math.cos(c),n=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+f*n:1+this.sinph0*a+this.cosph0*f*n,r<=Z)return null;r=Math.sqrt(2/r),e=r*f*Math.sin(l),r*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*f*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(c+this.lat0)<Z)return null;r=yt-c*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),e=r*Math.sin(l),r*=n}}else{switch(u=0,h=0,o=0,n=Math.cos(l),i=Math.sin(l),a=Math.sin(c),s=We(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(u=s/this.qp,h=Math.sqrt(1-u*u)),this.mode){case this.OBLIQ:o=1+this.sinb1*u+this.cosb1*h*n;break;case this.EQUIT:o=1+h*n;break;case this.N_POLE:o=$+c,s=this.qp-s;break;case this.S_POLE:o=c-$,s=this.qp+s;break}if(Math.abs(o)<Z)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:o=Math.sqrt(2/o),this.mode===this.OBLIQ?r=this.ymf*o*(this.cosb1*u-this.sinb1*h*n):r=(o=Math.sqrt(2/(1+h*n)))*u*this.ymf,e=this.xmf*o*h*i;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(o=Math.sqrt(s))*i,r=n*(this.mode===this.S_POLE?o:-o)):e=r=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t}function e1(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,n,i,a,s,u,h,o;if(this.sphere){var f=0,l,c=0;if(l=Math.sqrt(e*e+r*r),i=l*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(c=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(l)<=Z?0:Math.asin(r*c/l),e*=c,r=f*l;break;case this.OBLIQ:i=Math.abs(l)<=Z?this.lat0:Math.asin(f*this.sinph0+r*c*this.cosph0/l),e*=c*this.cosph0,r=(f-Math.sin(i)*this.sinph0)*l;break;case this.N_POLE:r=-r,i=$-i;break;case this.S_POLE:i-=$;break}n=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,h=Math.sqrt(e*e+r*r),h<Z)return t.x=this.long0,t.y=this.lat0,t;s=2*Math.asin(.5*h/this.rq),a=Math.cos(s),e*=s=Math.sin(s),this.mode===this.OBLIQ?(o=a*this.sinb1+r*s*this.cosb1/h,u=this.qp*o,r=h*this.cosb1*a-r*this.sinb1*s):(o=r*s/h,u=this.qp*o,r=h*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),u=e*e+r*r,!u)return t.x=this.long0,t.y=this.lat0,t;o=1-u/this.qp,this.mode===this.S_POLE&&(o=-o)}n=Math.atan2(e,r),i=h1(Math.asin(o),this.apa)}return t.x=H(this.long0+n),t.y=i,t}var r1=.3333333333333333,n1=.17222222222222222,i1=.10257936507936508,a1=.06388888888888888,s1=.0664021164021164,u1=.016415012942191543;function o1(t){var e,r=[];return r[0]=t*r1,e=t*t,r[0]+=e*n1,r[1]=e*a1,e*=t,r[0]+=e*i1,r[1]+=e*s1,r[2]=e*u1,r}function h1(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var f1=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],l1={init:Kc,forward:t1,inverse:e1,names:f1,S_POLE:Jc,N_POLE:Qc,EQUIT:Xc,OBLIQ:Yc};function He(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function c1(){Math.abs(this.lat1+this.lat2)<Z||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Oe(this.e3,this.sin_po,this.cos_po),this.qs1=We(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Oe(this.e3,this.sin_po,this.cos_po),this.qs2=We(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=We(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Z?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function d1(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=We(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*H(e-this.long0),s=i*Math.sin(a)+this.x0,u=this.rh-i*Math.cos(a)+this.y0;return t.x=s,t.y=u,t}function v1(t){var e,r,n,i,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,e!==0&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,r)),a=H(i/this.ns0+this.long0),t.x=a,t.y=s,t}function g1(t,e){var r,n,i,a,s,u=He(.5*e);if(t<Z)return u;for(var h=t*t,o=1;o<=25;o++)if(r=Math.sin(u),n=Math.cos(u),i=t*r,a=1-i*i,s=.5*a*a/n*(e/(1-h)-r/a+.5/t*Math.log((1-i)/(1+i))),u=u+s,Math.abs(s)<=1e-7)return u;return null}var m1=["Albers_Conic_Equal_Area","Albers","aea"],p1={init:c1,forward:d1,inverse:v1,names:m1,phi1z:g1};function y1(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function D1(t){var e,r,n,i,a,s,u,h,o=t.x,f=t.y;return n=H(o-this.long0),e=Math.sin(f),r=Math.cos(f),i=Math.cos(n),s=this.sin_p14*e+this.cos_p14*r*i,a=1,s>0||Math.abs(s)<=Z?(u=this.x0+this.a*a*r*Math.sin(n)/s,h=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*r*i)/s):(u=this.x0+this.infinity_dist*r*Math.sin(n),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)),t.x=u,t.y=h,t}function _1(t){var e,r,n,i,a,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),r=Math.sin(i),n=Math.cos(i),s=He(n*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),a=H(this.long0+a)):(s=this.phic0,a=0),t.x=a,t.y=s,t}var M1=["gnom"],w1={init:y1,forward:D1,inverse:_1,names:M1};function A1(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*$:$;for(var n=Math.asin(.5*e),i,a,s,u,h=0;h<30;h++)if(a=Math.sin(n),s=Math.cos(n),u=t*a,i=Math.pow(1-u*u,2)/(2*s)*(e/(1-t*t)-a/(1-u*u)+.5/t*Math.log((1-u)/(1+u))),n+=i,Math.abs(i)<=1e-10)return n;return NaN}function E1(){this.sphere||(this.k0=Oe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function b1(t){var e=t.x,r=t.y,n,i,a=H(e-this.long0);if(this.sphere)n=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var s=We(this.e,Math.sin(r));n=this.x0+this.a*this.k0*a,i=this.y0+this.a*s*.5/this.k0}return t.x=n,t.y=i,t}function C1(t){t.x-=this.x0,t.y-=this.y0;var e,r;return this.sphere?(e=H(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=A1(this.e,2*t.y*this.k0/this.a),e=H(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t}var F1=["cea"],x1={init:E1,forward:b1,inverse:C1,names:F1};function N1(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function B1(t){var e=t.x,r=t.y,n=H(e-this.long0),i=Xe(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*i,t}function S1(t){var e=t.x,r=t.y;return t.x=H(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Xe(this.lat0+(r-this.y0)/this.a),t}var T1=["Equirectangular","Equidistant_Cylindrical","eqc"],I1={init:N1,forward:B1,inverse:S1,names:T1},qs=20;function O1(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Dn(this.es),this.e1=_n(this.es),this.e2=Mn(this.es),this.e3=wn(this.es),this.ml0=this.a*oe(this.e0,this.e1,this.e2,this.e3,this.lat0)}function P1(t){var e=t.x,r=t.y,n,i,a,s=H(e-this.long0);if(a=s*Math.sin(r),this.sphere)Math.abs(r)<=Z?(n=this.a*s,i=-1*this.a*this.lat0):(n=this.a*Math.sin(a)/Math.tan(r),i=this.a*(Xe(r-this.lat0)+(1-Math.cos(a))/Math.tan(r)));else if(Math.abs(r)<=Z)n=this.a*s,i=-1*this.ml0;else{var u=Br(this.a,this.e,Math.sin(r))/Math.tan(r);n=u*Math.sin(a),i=this.a*oe(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+u*(1-Math.cos(a))}return t.x=n+this.x0,t.y=i+this.y0,t}function R1(t){var e,r,n,i,a,s,u,h,o;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Z)e=H(n/this.a+this.long0),r=0;else{s=this.lat0+i/this.a,u=n*n/this.a/this.a+s*s,h=s;var f;for(a=qs;a;--a)if(f=Math.tan(h),o=-1*(s*(h*f+1)-h-.5*(h*h+u)*f)/((h-s)/f-1),h+=o,Math.abs(o)<=Z){r=h;break}e=H(this.long0+Math.asin(n*Math.tan(h)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=Z)r=0,e=H(this.long0+n/this.a);else{s=(this.ml0+i)/this.a,u=n*n/this.a/this.a+s*s,h=s;var l,c,v,g,d;for(a=qs;a;--a)if(d=this.e*Math.sin(h),l=Math.sqrt(1-d*d)*Math.tan(h),c=this.a*oe(this.e0,this.e1,this.e2,this.e3,h),v=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),g=c/this.a,o=(s*(l*g+1)-g-.5*l*(g*g+u))/(this.es*Math.sin(2*h)*(g*g+u-2*s*g)/(4*l)+(s-g)*(l*v-2/Math.sin(2*h))-v),h-=o,Math.abs(o)<=Z){r=h;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=H(this.long0+Math.asin(n*l/this.a)/Math.sin(r))}return t.x=e,t.y=r,t}var q1=["Polyconic","poly"],$1={init:O1,forward:P1,inverse:R1,names:q1};function k1(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function z1(t){var e,r=t.x,n=t.y,i=n-this.lat0,a=r-this.long0,s=i/Ur*1e-5,u=a,h=1,o=0;for(e=1;e<=10;e++)h=h*s,o=o+this.A[e]*h;var f=o,l=u,c=1,v=0,g,d,m=0,p=0;for(e=1;e<=6;e++)g=c*f-v*l,d=v*f+c*l,c=g,v=d,m=m+this.B_re[e]*c-this.B_im[e]*v,p=p+this.B_im[e]*c+this.B_re[e]*v;return t.x=p*this.a+this.x0,t.y=m*this.a+this.y0,t}function L1(t){var e,r=t.x,n=t.y,i=r-this.x0,a=n-this.y0,s=a/this.a,u=i/this.a,h=1,o=0,f,l,c=0,v=0;for(e=1;e<=6;e++)f=h*s-o*u,l=o*s+h*u,h=f,o=l,c=c+this.C_re[e]*h-this.C_im[e]*o,v=v+this.C_im[e]*h+this.C_re[e]*o;for(var g=0;g<this.iterations;g++){var d=c,m=v,p,M,D=s,A=u;for(e=2;e<=6;e++)p=d*c-m*v,M=m*c+d*v,d=p,m=M,D=D+(e-1)*(this.B_re[e]*d-this.B_im[e]*m),A=A+(e-1)*(this.B_im[e]*d+this.B_re[e]*m);d=1,m=0;var y=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=d*c-m*v,M=m*c+d*v,d=p,m=M,y=y+e*(this.B_re[e]*d-this.B_im[e]*m),_=_+e*(this.B_im[e]*d+this.B_re[e]*m);var C=y*y+_*_;c=(D*y+A*_)/C,v=(A*y-D*_)/C}var b=c,E=v,N=1,S=0;for(e=1;e<=9;e++)N=N*b,S=S+this.D[e]*N;var k=this.lat0+S*Ur*1e5,J=this.long0+E;return t.x=J,t.y=k,t}var U1=["New_Zealand_Map_Grid","nzmg"],j1={init:k1,forward:z1,inverse:L1,names:U1};function V1(){}function G1(t){var e=t.x,r=t.y,n=H(e-this.long0),i=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=i,t.y=a,t}function W1(t){t.x-=this.x0,t.y-=this.y0;var e=H(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t}var Z1=["Miller_Cylindrical","mill"],H1={init:V1,forward:G1,inverse:W1,names:Z1},J1=20;function Q1(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Ca(this.es)}function X1(t){var e,r,n=t.x,i=t.y;if(n=H(n-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var a=this.n*Math.sin(i),s=J1;s;--s){var u=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=u,Math.abs(u)<Z)break}e=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var h=Math.sin(i),o=Math.cos(i);r=this.a*Ir(i,h,o,this.en),e=this.a*n*o/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=r,t}function Y1(t){var e,r,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(e))),this.m?e=He((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=He(Math.sin(e)/this.n)),n=H(n+this.long0),e=Xe(e)):(e=Fa(t.y/this.a,this.es,this.en),i=Math.abs(e),i<$?(i=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),n=H(r)):i-Z<$&&(n=this.long0)),t.x=n,t.y=e,t}var K1=["Sinusoidal","sinu"],td={init:Q1,forward:X1,inverse:Y1,names:K1};function ed(){}function rd(t){for(var e=t.x,r=t.y,n=H(e-this.long0),i=r,a=Math.PI*Math.sin(r);;){var s=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=s,Math.abs(s)<Z)break}i/=2,Math.PI/2-Math.abs(r)<Z&&(n=0);var u=.900316316158*this.a*n*Math.cos(i)+this.x0,h=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=u,t.y=h,t}function nd(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=H(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return t.x=n,t.y=i,t}var id=["Mollweide","moll"],ad={init:ed,forward:rd,inverse:nd,names:id};function sd(){Math.abs(this.lat1+this.lat2)<Z||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Dn(this.es),this.e1=_n(this.es),this.e2=Mn(this.es),this.e3=wn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Oe(this.e,this.sinphi,this.cosphi),this.ml1=oe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Z?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Oe(this.e,this.sinphi,this.cosphi),this.ml2=oe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=oe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function ud(t){var e=t.x,r=t.y,n;if(this.sphere)n=this.a*(this.g-r);else{var i=oe(this.e0,this.e1,this.e2,this.e3,r);n=this.a*(this.g-i)}var a=this.ns*H(e-this.long0),s=this.x0+n*Math.sin(a),u=this.y0+this.rh-n*Math.cos(a);return t.x=s,t.y=u,t}function od(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,r,n,i;this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;if(r!==0&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=H(this.long0+a/this.ns),n=Xe(this.g-r/this.a),t.x=i,t.y=n,t;var s=this.g-r/this.a;return n=Xn(s,this.e0,this.e1,this.e2,this.e3),i=H(this.long0+a/this.ns),t.x=i,t.y=n,t}var hd=["Equidistant_Conic","eqdc"],fd={init:sd,forward:ud,inverse:od,names:hd};function ld(){this.R=this.a}function cd(t){var e=t.x,r=t.y,n=H(e-this.long0),i,a;Math.abs(r)<=Z&&(i=this.x0+this.R*n,a=this.y0);var s=He(2*Math.abs(r/Math.PI));(Math.abs(n)<=Z||Math.abs(Math.abs(r)-$)<=Z)&&(i=this.x0,r>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*s):a=this.y0+Math.PI*this.R*-Math.tan(.5*s));var u=.5*Math.abs(Math.PI/n-n/Math.PI),h=u*u,o=Math.sin(s),f=Math.cos(s),l=f/(o+f-1),c=l*l,v=l*(2/o-1),g=v*v,d=Math.PI*this.R*(u*(l-g)+Math.sqrt(h*(l-g)*(l-g)-(g+h)*(c-g)))/(g+h);n<0&&(d=-d),i=this.x0+d;var m=h+l;return d=Math.PI*this.R*(v*m-u*Math.sqrt((g+h)*(h+1)-m*m))/(g+h),r>=0?a=this.y0+d:a=this.y0-d,t.x=i,t.y=a,t}function dd(t){var e,r,n,i,a,s,u,h,o,f,l,c,v;return t.x-=this.x0,t.y-=this.y0,l=Math.PI*this.R,n=t.x/l,i=t.y/l,a=n*n+i*i,s=-Math.abs(i)*(1+a),u=s-2*i*i+n*n,h=-2*s+1+2*i*i+a*a,v=i*i/h+(2*u*u*u/h/h/h-9*s*u/h/h)/27,o=(s-u*u/3/h)/h,f=2*Math.sqrt(-o/3),l=3*v/o/f,Math.abs(l)>1&&(l>=0?l=1:l=-1),c=Math.acos(l)/3,t.y>=0?r=(-f*Math.cos(c+Math.PI/3)-u/3/h)*Math.PI:r=-(-f*Math.cos(c+Math.PI/3)-u/3/h)*Math.PI,Math.abs(n)<Z?e=this.long0:e=H(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-i*i)+a*a))/2/n),t.x=e,t.y=r,t}var vd=["Van_der_Grinten_I","VanDerGrinten","vandg"],gd={init:ld,forward:cd,inverse:dd,names:vd};function md(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function pd(t){var e=t.x,r=t.y,n=Math.sin(t.y),i=Math.cos(t.y),a=H(e-this.long0),s,u,h,o,f,l,c,v,g,d,m,p,M,D,A,y,_,C,b,E,N,S,k;return this.sphere?Math.abs(this.sin_p12-1)<=Z?(t.x=this.x0+this.a*($-r)*Math.sin(a),t.y=this.y0-this.a*($-r)*Math.cos(a),t):Math.abs(this.sin_p12+1)<=Z?(t.x=this.x0+this.a*($+r)*Math.sin(a),t.y=this.y0+this.a*($+r)*Math.cos(a),t):(C=this.sin_p12*n+this.cos_p12*i*Math.cos(a),y=Math.acos(C),_=y?y/Math.sin(y):1,t.x=this.x0+this.a*_*i*Math.sin(a),t.y=this.y0+this.a*_*(this.cos_p12*n-this.sin_p12*i*Math.cos(a)),t):(s=Dn(this.es),u=_n(this.es),h=Mn(this.es),o=wn(this.es),Math.abs(this.sin_p12-1)<=Z?(f=this.a*oe(s,u,h,o,$),l=this.a*oe(s,u,h,o,r),t.x=this.x0+(f-l)*Math.sin(a),t.y=this.y0-(f-l)*Math.cos(a),t):Math.abs(this.sin_p12+1)<=Z?(f=this.a*oe(s,u,h,o,$),l=this.a*oe(s,u,h,o,r),t.x=this.x0+(f+l)*Math.sin(a),t.y=this.y0+(f+l)*Math.cos(a),t):(c=n/i,v=Br(this.a,this.e,this.sin_p12),g=Br(this.a,this.e,n),d=Math.atan((1-this.es)*c+this.es*v*this.sin_p12/(g*i)),m=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(d)-this.sin_p12*Math.cos(a)),m===0?b=Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.abs(Math.abs(m)-Math.PI)<=Z?b=-Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):b=Math.asin(Math.sin(a)*Math.cos(d)/Math.sin(m)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),M=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es),D=p*M,A=M*M,E=b*b,N=E*b,S=N*b,k=S*b,y=v*b*(1-E*A*(1-A)/6+N/8*D*(1-2*A)+S/120*(A*(4-7*A)-3*p*p*(1-7*A))-k/48*D),t.x=this.x0+y*Math.sin(m),t.y=this.y0+y*Math.cos(m),t))}function yd(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,i,a,s,u,h,o,f,l,c,v,g,d,m,p,M,D,A,y,_,C,b;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*$*this.a?void 0:(r=e/this.a,n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(e)<=Z?s=this.lat0:(s=He(i*this.sin_p12+t.y*n*this.cos_p12/e),u=Math.abs(this.lat0)-$,Math.abs(u)<=Z?this.lat0>=0?a=H(this.long0+Math.atan2(t.x,-t.y)):a=H(this.long0-Math.atan2(-t.x,t.y)):a=H(this.long0+Math.atan2(t.x*n,e*this.cos_p12*i-t.y*this.sin_p12*n))),t.x=a,t.y=s,t)):(h=Dn(this.es),o=_n(this.es),f=Mn(this.es),l=wn(this.es),Math.abs(this.sin_p12-1)<=Z?(c=this.a*oe(h,o,f,l,$),e=Math.sqrt(t.x*t.x+t.y*t.y),v=c-e,s=Xn(v/this.a,h,o,f,l),a=H(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=s,t):Math.abs(this.sin_p12+1)<=Z?(c=this.a*oe(h,o,f,l,$),e=Math.sqrt(t.x*t.x+t.y*t.y),v=e-c,s=Xn(v/this.a,h,o,f,l),a=H(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),g=Br(this.a,this.e,this.sin_p12),p=Math.cos(m),M=this.e*this.cos_p12*p,D=-M*M/(1-this.es),A=3*this.es*(1-D)*this.sin_p12*this.cos_p12*p/(1-this.es),y=e/g,_=y-D*(1+D)*Math.pow(y,3)/6-A*(1+3*D)*Math.pow(y,4)/24,C=1-D*_*_/2-y*_*_*_/6,d=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*p),a=H(this.long0+Math.asin(Math.sin(m)*Math.sin(_)/Math.cos(d))),b=Math.sin(d),s=Math.atan2((b-this.es*C*this.sin_p12)*Math.tan(d),b*(1-this.es)),t.x=a,t.y=s,t))}var Dd=["Azimuthal_Equidistant","aeqd"],_d={init:md,forward:pd,inverse:yd,names:Dd};function Md(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function wd(t){var e,r,n,i,a,s,u,h,o=t.x,f=t.y;return n=H(o-this.long0),e=Math.sin(f),r=Math.cos(f),i=Math.cos(n),s=this.sin_p14*e+this.cos_p14*r*i,a=1,(s>0||Math.abs(s)<=Z)&&(u=this.a*a*r*Math.sin(n),h=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*r*i)),t.x=u,t.y=h,t}function Ad(t){var e,r,n,i,a,s,u;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=He(e/this.a),n=Math.sin(r),i=Math.cos(r),s=this.long0,Math.abs(e)<=Z?(u=this.lat0,t.x=s,t.y=u,t):(u=He(i*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.abs(this.lat0)-$,Math.abs(a)<=Z?(this.lat0>=0?s=H(this.long0+Math.atan2(t.x,-t.y)):s=H(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=u,t):(s=H(this.long0+Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n)),t.x=s,t.y=u,t))}var Ed=["ortho"],bd={init:Md,forward:wd,inverse:Ad,names:Ed},It={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Dt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Cd(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=$-yt/2?this.face=It.TOP:this.lat0<=-($-yt/2)?this.face=It.BOTTOM:Math.abs(this.long0)<=yt?this.face=It.FRONT:Math.abs(this.long0)<=$+yt?this.face=this.long0>0?It.RIGHT:It.LEFT:this.face=It.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Fd(t){var e={x:0,y:0},r,n,i,a,s,u,h={value:0};if(t.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):r=t.y,n=t.x,this.face===It.TOP)a=$-r,n>=yt&&n<=$+yt?(h.value=Dt.AREA_0,i=n-$):n>$+yt||n<=-($+yt)?(h.value=Dt.AREA_1,i=n>0?n-te:n+te):n>-($+yt)&&n<=-yt?(h.value=Dt.AREA_2,i=n+$):(h.value=Dt.AREA_3,i=n);else if(this.face===It.BOTTOM)a=$+r,n>=yt&&n<=$+yt?(h.value=Dt.AREA_0,i=-n+$):n<yt&&n>=-yt?(h.value=Dt.AREA_1,i=-n):n<-yt&&n>=-($+yt)?(h.value=Dt.AREA_2,i=-n-$):(h.value=Dt.AREA_3,i=n>0?-n+te:-n-te);else{var o,f,l,c,v,g,d;this.face===It.RIGHT?n=Er(n,+$):this.face===It.BACK?n=Er(n,3.14159265359):this.face===It.LEFT&&(n=Er(n,-$)),c=Math.sin(r),v=Math.cos(r),g=Math.sin(n),d=Math.cos(n),o=v*d,f=v*g,l=c,this.face===It.FRONT?(a=Math.acos(o),i=Bn(a,l,f,h)):this.face===It.RIGHT?(a=Math.acos(f),i=Bn(a,l,-o,h)):this.face===It.BACK?(a=Math.acos(-o),i=Bn(a,l,-f,h)):this.face===It.LEFT?(a=Math.acos(-f),i=Bn(a,l,o,h)):(a=i=0,h.value=Dt.AREA_0)}return u=Math.atan(12/te*(i+Math.acos(Math.sin(i)*Math.cos(yt))-$)),s=Math.sqrt((1-Math.cos(a))/(Math.cos(u)*Math.cos(u))/(1-Math.cos(Math.atan(1/Math.cos(i))))),h.value===Dt.AREA_1?u+=$:h.value===Dt.AREA_2?u+=te:h.value===Dt.AREA_3&&(u+=1.5*te),e.x=s*Math.cos(u),e.y=s*Math.sin(u),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function xd(t){var e={lam:0,phi:0},r,n,i,a,s,u,h,o,f,l={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?l.value=Dt.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(l.value=Dt.AREA_1,r-=$):t.x<0&&-t.x>=Math.abs(t.y)?(l.value=Dt.AREA_2,r=r<0?r+te:r-te):(l.value=Dt.AREA_3,r+=$),f=te/12*Math.tan(r),s=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),u=Math.atan(s),i=Math.cos(r),a=Math.tan(n),h=1-i*i*a*a*(1-Math.cos(Math.atan(1/Math.cos(u)))),h<-1?h=-1:h>1&&(h=1),this.face===It.TOP)o=Math.acos(h),e.phi=$-o,l.value===Dt.AREA_0?e.lam=u+$:l.value===Dt.AREA_1?e.lam=u<0?u+te:u-te:l.value===Dt.AREA_2?e.lam=u-$:e.lam=u;else if(this.face===It.BOTTOM)o=Math.acos(h),e.phi=o-$,l.value===Dt.AREA_0?e.lam=-u+$:l.value===Dt.AREA_1?e.lam=-u:l.value===Dt.AREA_2?e.lam=-u-$:e.lam=u<0?-u-te:-u+te;else{var c,v,g;c=h,f=c*c,f>=1?g=0:g=Math.sqrt(1-f)*Math.sin(u),f+=g*g,f>=1?v=0:v=Math.sqrt(1-f),l.value===Dt.AREA_1?(f=v,v=-g,g=f):l.value===Dt.AREA_2?(v=-v,g=-g):l.value===Dt.AREA_3&&(f=v,v=g,g=-f),this.face===It.RIGHT?(f=c,c=-v,v=f):this.face===It.BACK?(c=-c,v=-v):this.face===It.LEFT&&(f=c,c=v,v=-f),e.phi=Math.acos(-g)-$,e.lam=Math.atan2(v,c),this.face===It.RIGHT?e.lam=Er(e.lam,-$):this.face===It.BACK?e.lam=Er(e.lam,-3.14159265359):this.face===It.LEFT&&(e.lam=Er(e.lam,+$))}if(this.es!==0){var d,m,p;d=e.phi<0?1:0,m=Math.tan(e.phi),p=this.b/Math.sqrt(m*m+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),d&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Bn(t,e,r,n){var i;return t<Z?(n.value=Dt.AREA_0,i=0):(i=Math.atan2(e,r),Math.abs(i)<=yt?n.value=Dt.AREA_0:i>yt&&i<=$+yt?(n.value=Dt.AREA_1,i-=$):i>$+yt||i<=-($+yt)?(n.value=Dt.AREA_2,i=i>=0?i-te:i+te):(n.value=Dt.AREA_3,i+=$)),i}function Er(t,e){var r=t+e;return r<-3.14159265359?r+=Hr:r>3.14159265359&&(r-=Hr),r}var Nd=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],Bd={init:Cd,forward:Fd,inverse:xd,names:Nd},ta=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Lr=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],co=.8487,vo=1.3523,go=Be/5,Sd=1/go,Mr=18,Yn=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Td=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function Id(t,e,r,n){for(var i=e;n;--n){var a=t(i);if(i-=a,Math.abs(a)<r)break}return i}function Od(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Pd(t){var e=H(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*go);n<0?n=0:n>=Mr&&(n=Mr-1),r=Be*(r-Sd*n);var i={x:Yn(ta[n],r)*e,y:Yn(Lr[n],r)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*co+this.x0,i.y=i.y*this.a*vo+this.y0,i}function Rd(t){var e={x:(t.x-this.x0)/(this.a*co),y:Math.abs(t.y-this.y0)/(this.a*vo)};if(e.y>=1)e.x/=ta[Mr][0],e.y=t.y<0?-$:$;else{var r=Math.floor(e.y*Mr);for(r<0?r=0:r>=Mr&&(r=Mr-1);;)if(Lr[r][0]>e.y)--r;else if(Lr[r+1][0]<=e.y)++r;else break;var n=Lr[r],i=5*(e.y-n[0])/(Lr[r+1][0]-n[0]);i=Id(function(a){return(Yn(n,a)-e.y)/Td(n,a)},i,Z,100),e.x/=Yn(ta[r],i),e.y=(5*r+i)*Yt,t.y<0&&(e.y=-e.y)}return e.x=H(e.x+this.long0),e}var qd=["Robinson","robin"],$d={init:Od,forward:Pd,inverse:Rd,names:qd};function kd(){this.name="geocent"}function zd(t){var e=eo(t,this.es,this.a);return e}function Ld(t){var e=ro(t,this.es,this.a,this.b);return e}var Ud=["Geocentric","geocentric","geocent","Geocent"],jd={init:kd,forward:zd,inverse:Ld,names:Ud},ae={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},qr={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Vd(){if(Object.keys(qr).forEach((function(r){if(typeof this[r]>"u")this[r]=qr[r].def;else{if(qr[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);qr[r].num&&(this[r]=parseFloat(this[r]))}qr[r].degrees&&(this[r]=this[r]*Yt)}).bind(this)),Math.abs(Math.abs(this.lat0)-$)<Z?this.mode=this.lat0<0?ae.S_POLE:ae.N_POLE:Math.abs(this.lat0)<Z?this.mode=ae.EQUIT:(this.mode=ae.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Gd(t){t.x-=this.long0;var e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i,a;switch(this.mode){case ae.OBLIQ:a=this.sinph0*e+this.cosph0*r*n;break;case ae.EQUIT:a=r*n;break;case ae.S_POLE:a=-e;break;case ae.N_POLE:a=e;break}switch(a=this.pn1/(this.p-a),i=a*r*Math.sin(t.x),this.mode){case ae.OBLIQ:a*=this.cosph0*e-this.sinph0*r*n;break;case ae.EQUIT:a*=e;break;case ae.N_POLE:a*=-(r*n);break;case ae.S_POLE:a*=r*n;break}var s,u;return s=a*this.cg+i*this.sg,u=1/(s*this.sw*this.h1+this.cw),i=(i*this.cg-a*this.sg)*this.cw*u,a=s*u,t.x=i*this.a,t.y=a*this.a,t}function Wd(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},r,n,i;i=1/(this.pn1-t.y*this.sw),r=this.pn1*t.x*i,n=this.pn1*t.y*this.cw*i,t.x=r*this.cg+n*this.sg,t.y=n*this.cg-r*this.sg;var a=ve(t.x,t.y);if(Math.abs(a)<Z)e.x=0,e.y=t.y;else{var s,u;switch(u=1-a*a*this.pfact,u=(this.p-Math.sqrt(u))/(this.pn1/a+a/this.pn1),s=Math.sqrt(1-u*u),this.mode){case ae.OBLIQ:e.y=Math.asin(s*this.sinph0+t.y*u*this.cosph0/a),t.y=(s-this.sinph0*Math.sin(e.y))*a,t.x*=u*this.cosph0;break;case ae.EQUIT:e.y=Math.asin(t.y*u/a),t.y=s*a,t.x*=u;break;case ae.N_POLE:e.y=Math.asin(s),t.y=-t.y;break;case ae.S_POLE:e.y=-Math.asin(s);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Zd=["Tilted_Perspective","tpers"],Hd={init:Vd,forward:Gd,inverse:Wd,names:Zd};function Jd(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Qd(t){var e=t.x,r=t.y,n,i,a,s;if(e=e-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var u=this.radius_p/ve(this.radius_p*Math.cos(r),Math.sin(r));if(i=u*Math.cos(e)*Math.cos(r),a=u*Math.sin(e)*Math.cos(r),s=u*Math.sin(r),(this.radius_g-i)*i-a*a-s*s*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/ve(s,n)),t.y=this.radius_g_1*Math.atan(s/n)):(t.x=this.radius_g_1*Math.atan(a/n),t.y=this.radius_g_1*Math.atan(s/ve(a,n)))}else this.shape==="sphere"&&(n=Math.cos(r),i=Math.cos(e)*n,a=Math.sin(e)*n,s=Math.sin(r),n=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/ve(s,n)),t.y=this.radius_g_1*Math.atan(s/n)):(t.x=this.radius_g_1*Math.atan(a/n),t.y=this.radius_g_1*Math.atan(s/ve(a,n))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Xd(t){var e=-1,r=0,n=0,i,a,s,u;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*ve(1,n)):(r=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*ve(1,r));var h=n/this.radius_p;if(i=r*r+h*h+e*e,a=2*this.radius_g*e,s=a*a-4*i*this.C,s<0)return t.x=Number.NaN,t.y=Number.NaN,t;u=(-a-Math.sqrt(s))/(2*i),e=this.radius_g+u*e,r*=u,n*=u,t.x=Math.atan2(r,e),t.y=Math.atan(n*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+n*n)):(r=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),i=r*r+n*n+e*e,a=2*this.radius_g*e,s=a*a-4*i*this.C,s<0)return t.x=Number.NaN,t.y=Number.NaN,t;u=(-a-Math.sqrt(s))/(2*i),e=this.radius_g+u*e,r*=u,n*=u,t.x=Math.atan2(r,e),t.y=Math.atan(n*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var Yd=["Geostationary Satellite View","Geostationary_Satellite","geos"],Kd={init:Jd,forward:Qd,inverse:Xd,names:Yd},jr=1.340264,Vr=-.081106,Gr=893e-6,Wr=.003796,Kn=Math.sqrt(3)/2;function tv(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function ev(t){var e=H(t.x-this.long0),r=t.y,n=Math.asin(Kn*Math.sin(r)),i=n*n,a=i*i*i;return t.x=e*Math.cos(n)/(Kn*(jr+3*Vr*i+a*(7*Gr+9*Wr*i))),t.y=n*(jr+Vr*i+a*(Gr+Wr*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function rv(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,r=12,n=t.y,i,a,s,u,h,o;for(o=0;o<r&&(i=n*n,a=i*i*i,s=n*(jr+Vr*i+a*(Gr+Wr*i))-t.y,u=jr+3*Vr*i+a*(7*Gr+9*Wr*i),n-=h=s/u,!(Math.abs(h)<e));++o);return i=n*n,a=i*i*i,t.x=Kn*t.x*(jr+3*Vr*i+a*(7*Gr+9*Wr*i))/Math.cos(n),t.y=Math.asin(Math.sin(n)/Kn),t.x=H(t.x+this.long0),t}var nv=["eqearth","Equal Earth","Equal_Earth"],iv={init:tv,forward:ev,inverse:rv,names:nv},Xr=1e-10;function av(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Xr)throw new Error;this.es?(this.en=Ca(this.es),this.m1=Ir(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=uv,this.forward=sv):(Math.abs(this.phi1)+Xr>=$?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=hv,this.forward=ov)}function sv(t){var e=H(t.x-(this.long0||0)),r=t.y,n,i,a;return n=this.am1+this.m1-Ir(r,i=Math.sin(r),a=Math.cos(r),this.en),i=a*e/(n*Math.sqrt(1-this.es*i*i)),t.x=n*Math.sin(i),t.y=this.am1-n*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function uv(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,n,i;if(r=ve(t.x,t.y=this.am1-t.y),i=Fa(this.am1+this.m1-r,this.es,this.en),(e=Math.abs(i))<$)e=Math.sin(i),n=r*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-$)<=Xr)n=0;else throw new Error;return t.x=H(n+(this.long0||0)),t.y=Xe(i),t}function ov(t){var e=H(t.x-(this.long0||0)),r=t.y,n,i;return i=this.cphi1+this.phi1-r,Math.abs(i)>Xr?(t.x=i*Math.sin(n=e*Math.cos(r)/i),t.y=this.cphi1-i*Math.cos(n)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function hv(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,n=ve(t.x,t.y=this.cphi1-t.y);if(r=this.cphi1+this.phi1-n,Math.abs(r)>$)throw new Error;return Math.abs(Math.abs(r)-$)<=Xr?e=0:e=n*Math.atan2(t.x,t.y)/Math.cos(r),t.x=H(e+(this.long0||0)),t.y=Xe(r),t}var fv=["bonne","Bonne (Werner lat_1=90)"],lv={init:av,names:fv};function cv(t){t.Proj.projections.add(kn),t.Proj.projections.add(zn),t.Proj.projections.add(uc),t.Proj.projections.add(mc),t.Proj.projections.add(wc),t.Proj.projections.add(Fc),t.Proj.projections.add(Ic),t.Proj.projections.add($c),t.Proj.projections.add(jc),t.Proj.projections.add(Hc),t.Proj.projections.add(l1),t.Proj.projections.add(p1),t.Proj.projections.add(w1),t.Proj.projections.add(x1),t.Proj.projections.add(I1),t.Proj.projections.add($1),t.Proj.projections.add(j1),t.Proj.projections.add(H1),t.Proj.projections.add(td),t.Proj.projections.add(ad),t.Proj.projections.add(fd),t.Proj.projections.add(gd),t.Proj.projections.add(_d),t.Proj.projections.add(bd),t.Proj.projections.add(Bd),t.Proj.projections.add($d),t.Proj.projections.add(jd),t.Proj.projections.add(Hd),t.Proj.projections.add(Kd),t.Proj.projections.add(iv),t.Proj.projections.add(lv)}ge.defaultDatum="WGS84";ge.Proj=Te;ge.WGS84=new ge.Proj("WGS84");ge.Point=Nr;ge.toPoint=no;ge.defs=ue;ge.nadgrid=hl;ge.transform=Qn;ge.mgrs=bl;ge.version="__VERSION__";cv(ge);function ti(){return ti=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ti.apply(null,arguments)}var mo={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function dv(t,e){if(ei(t,e))return t[e];throw typeof t[e]=="function"&&gv(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function vv(t,e,r){if(ei(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function ei(t,e){return!mv(t)&&!Array.isArray(t)?!1:Kr(pv,e)?!0:!(e in Object.prototype||e in Function.prototype)}function gv(t,e){return t==null||typeof t[e]!="function"||Kr(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Kr(yv,e)?!0:!(e in Object.prototype||e in Function.prototype)}function mv(t){return typeof t=="object"&&t&&t.constructor===Object}var pv={length:!0,name:!0},yv={toString:!0,valueOf:!0,toLocaleString:!0};class Dv{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return dv(this.wrappedObject,e)}set(e,r){return vv(this.wrappedObject,e,r),this}has(e){return ei(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return _v(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){ei(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function _v(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function Ft(t){return typeof t=="number"}function Pt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Mv(t){return typeof t=="bigint"}function po(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function yo(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Do(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Ne(t){return typeof t=="string"}var Wt=Array.isArray;function Nt(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Yr(t){return Array.isArray(t)||Nt(t)}function wv(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Av(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ev(t){return t&&t.constructor.prototype.isRange===!0||!1}function Sa(t){return t&&t.constructor.prototype.isIndex===!0||!1}function bv(t){return typeof t=="boolean"}function Cv(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Fv(t){return t&&t.constructor.prototype.isHelp===!0||!1}function xv(t){return typeof t=="function"}function Nv(t){return t instanceof Date}function Bv(t){return t instanceof RegExp}function Ta(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!po(t)&&!yo(t))}function Sv(t){return t?t instanceof Map||t instanceof Dv||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function Tv(t){return t===null}function Iv(t){return t===void 0}function Ov(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Pv(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Rv(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function qv(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function $v(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function kv(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function zv(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Lv(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Uv(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function jv(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Vv(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Gv(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Wv(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Zv(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Hv(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jv(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qv(t){return t&&t.constructor.prototype.isChain===!0||!1}function Ie(t){var e=typeof t;return e==="object"?t===null?"null":Pt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function xt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return xt(r)});if(t instanceof Date)return new Date(t.valueOf());if(Pt(t))return t;if(Ta(t))return Xv(t,xt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function Xv(t,e){var r={};for(var n in t)Kr(t,n)&&(r[n]=e(t[n]));return r}function _o(t,e){for(var r in e)Kr(e,r)&&(t[r]=e[r]);return t}function Je(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Je(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Je(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function Kr(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Yv(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var Kv=["Matrix","Array"],tg=["number","BigNumber","Fraction"],lr=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(mo)};ti(lr,mo,{MATRIX_OPTIONS:Kv,NUMBER_OPTIONS:tg});function $s(){return!0}function De(){return!1}function dr(){}const ks="Argument is not a typed-function.";function Mo(){function t(w){return typeof w=="object"&&w!==null&&w.constructor===Object}const e=[{name:"number",test:function(w){return typeof w=="number"}},{name:"string",test:function(w){return typeof w=="string"}},{name:"boolean",test:function(w){return typeof w=="boolean"}},{name:"Function",test:function(w){return typeof w=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(w){return w instanceof Date}},{name:"RegExp",test:function(w){return w instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(w){return w===null}},{name:"undefined",test:function(w){return w===void 0}}],r={name:"any",test:$s,isAny:!0};let n,i,a=0,s={createCount:0};function u(w){const F=n.get(w);if(F)return F;let x='Unknown type "'+w+'"';const I=w.toLowerCase();let R;for(R of i)if(R.toLowerCase()===I){x+='. Did you mean "'+R+'" ?';break}throw new TypeError(x)}function h(w){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const x=F?u(F).index:i.length,I=[];for(let T=0;T<w.length;++T){if(!w[T]||typeof w[T].name!="string"||typeof w[T].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const G=w[T].name;if(n.has(G))throw new TypeError('Duplicate type name "'+G+'"');I.push(G),n.set(G,{name:G,test:w[T].test,isAny:w[T].isAny,index:x+T,conversionsTo:[]})}const R=i.slice(x);i=i.slice(0,x).concat(I).concat(R);for(let T=x+I.length;T<i.length;++T)n.get(i[T]).index=T}function o(){n=new Map,i=[],a=0,h([r],!1)}o(),h(e);function f(){let w;for(w of i)n.get(w).conversionsTo=[];a=0}function l(w){const F=i.filter(x=>{const I=n.get(x);return!I.isAny&&I.test(w)});return F.length?F:["any"]}function c(w){return w&&typeof w=="function"&&"_typedFunctionData"in w}function v(w,F,x){if(!c(w))throw new TypeError(ks);const I=x&&x.exact,R=Array.isArray(F)?F.join(","):F,T=A(R),G=m(T);if(!I||G in w.signatures){const ot=w._typedFunctionData.signatureMap.get(G);if(ot)return ot}const z=T.length;let W;if(I){W=[];let ot;for(ot in w.signatures)W.push(w._typedFunctionData.signatureMap.get(ot))}else W=w._typedFunctionData.signatures;for(let ot=0;ot<z;++ot){const dt=T[ot],Ct=[];let Ut;for(Ut of W){const zt=b(Ut.params,ot);if(!(!zt||dt.restParam&&!zt.restParam)){if(!zt.hasAny){const Xt=D(zt);if(dt.types.some(Gt=>!Xt.has(Gt.name)))continue}Ct.push(Ut)}}if(W=Ct,W.length===0)break}let O;for(O of W)if(O.params.length<=z)return O;throw new TypeError("Signature not found (signature: "+(w.name||"unnamed")+"("+m(T,", ")+"))")}function g(w,F,x){return v(w,F,x).implementation}function d(w,F){const x=u(F);if(x.test(w))return w;const I=x.conversionsTo;if(I.length===0)throw new Error("There are no conversions to "+F+" defined.");for(let R=0;R<I.length;R++)if(u(I[R].from).test(w))return I[R].convert(w);throw new Error("Cannot convert "+w+" to "+F)}function m(w){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return w.map(x=>x.name).join(F)}function p(w){const F=w.indexOf("...")===0,I=(F?w.length>3?w.slice(3):"any":w).split("|").map(z=>u(z.trim()));let R=!1,T=F?"...":"";return{types:I.map(function(z){return R=z.isAny||R,T+=z.name+"|",{name:z.name,typeIndex:z.index,test:z.test,isAny:z.isAny,conversion:null,conversionIndex:-1}}),name:T.slice(0,-1),hasAny:R,hasConversion:!1,restParam:F}}function M(w){const F=w.types.map(G=>G.name),x=X(F);let I=w.hasAny,R=w.name;const T=x.map(function(G){const z=u(G.from);return I=z.isAny||I,R+="|"+G.from,{name:G.from,typeIndex:z.index,test:z.test,isAny:z.isAny,conversion:G,conversionIndex:G.index}});return{types:w.types.concat(T),name:R,hasAny:I,hasConversion:T.length>0,restParam:w.restParam}}function D(w){return w.typeSet||(w.typeSet=new Set,w.types.forEach(F=>w.typeSet.add(F.name))),w.typeSet}function A(w){const F=[];if(typeof w!="string")throw new TypeError("Signatures must be strings");const x=w.trim();if(x==="")return F;const I=x.split(",");for(let R=0;R<I.length;++R){const T=p(I[R].trim());if(T.restParam&&R!==I.length-1)throw new SyntaxError('Unexpected rest parameter "'+I[R]+'": only allowed for the last parameter');if(T.types.length===0)return null;F.push(T)}return F}function y(w){const F=mt(w);return F?F.restParam:!1}function _(w){if(!w||w.types.length===0)return $s;if(w.types.length===1)return u(w.types[0].name).test;if(w.types.length===2){const F=u(w.types[0].name).test,x=u(w.types[1].name).test;return function(R){return F(R)||x(R)}}else{const F=w.types.map(function(x){return u(x.name).test});return function(I){for(let R=0;R<F.length;R++)if(F[R](I))return!0;return!1}}}function C(w){let F,x,I;if(y(w)){F=Vt(w).map(_);const R=F.length,T=_(mt(w)),G=function(z){for(let W=R;W<z.length;W++)if(!T(z[W]))return!1;return!0};return function(W){for(let O=0;O<F.length;O++)if(!F[O](W[O]))return!1;return G(W)&&W.length>=R+1}}else return w.length===0?function(T){return T.length===0}:w.length===1?(x=_(w[0]),function(T){return x(T[0])&&T.length===1}):w.length===2?(x=_(w[0]),I=_(w[1]),function(T){return x(T[0])&&I(T[1])&&T.length===2}):(F=w.map(_),function(T){for(let G=0;G<F.length;G++)if(!F[G](T[G]))return!1;return T.length===F.length})}function b(w,F){return F<w.length?w[F]:y(w)?mt(w):null}function E(w,F){const x=b(w,F);return x?D(x):new Set}function N(w){return w.conversion===null||w.conversion===void 0}function S(w,F){const x=new Set;return w.forEach(I=>{const R=E(I.params,F);let T;for(T of R)x.add(T)}),x.has("any")?["any"]:Array.from(x)}function k(w,F,x){let I,R;const T=w||"unnamed";let G=x,z;for(z=0;z<F.length;z++){const dt=[];if(G.forEach(Ct=>{const Ut=b(Ct.params,z),zt=_(Ut);(z<Ct.params.length||y(Ct.params))&&zt(F[z])&&dt.push(Ct)}),dt.length===0){if(R=S(G,z),R.length>0){const Ct=l(F[z]);return I=new TypeError("Unexpected type of argument in function "+T+" (expected: "+R.join(" or ")+", actual: "+Ct.join(" | ")+", index: "+z+")"),I.data={category:"wrongType",fn:T,index:z,actual:Ct,expected:R},I}}else G=dt}const W=G.map(function(dt){return y(dt.params)?1/0:dt.params.length});if(F.length<Math.min.apply(null,W))return R=S(G,z),I=new TypeError("Too few arguments in function "+T+" (expected: "+R.join(" or ")+", index: "+F.length+")"),I.data={category:"tooFewArgs",fn:T,index:F.length,expected:R},I;const O=Math.max.apply(null,W);if(F.length>O)return I=new TypeError("Too many arguments in function "+T+" (expected: "+O+", actual: "+F.length+")"),I.data={category:"tooManyArgs",fn:T,index:F.length,expectedLength:O},I;const ot=[];for(let dt=0;dt<F.length;++dt)ot.push(l(F[dt]).join("|"));return I=new TypeError('Arguments of type "'+ot.join(", ")+'" do not match any of the defined signatures of function '+T+"."),I.data={category:"mismatch",actual:ot},I}function J(w){let F=i.length+1;for(let x=0;x<w.types.length;x++)N(w.types[x])&&(F=Math.min(F,w.types[x].typeIndex));return F}function U(w){let F=a+1;for(let x=0;x<w.types.length;x++)N(w.types[x])||(F=Math.min(F,w.types[x].conversionIndex));return F}function V(w,F){if(w.hasAny){if(!F.hasAny)return 1}else if(F.hasAny)return-1;if(w.restParam){if(!F.restParam)return 1}else if(F.restParam)return-1;if(w.hasConversion){if(!F.hasConversion)return 1}else if(F.hasConversion)return-1;const x=J(w)-J(F);if(x<0)return-1;if(x>0)return 1;const I=U(w)-U(F);return I<0?-1:I>0?1:0}function P(w,F){const x=w.params,I=F.params,R=mt(x),T=mt(I),G=y(x),z=y(I);if(G&&R.hasAny){if(!z||!T.hasAny)return 1}else if(z&&T.hasAny)return-1;let W=0,O=0,ot;for(ot of x)ot.hasAny&&++W,ot.hasConversion&&++O;let dt=0,Ct=0;for(ot of I)ot.hasAny&&++dt,ot.hasConversion&&++Ct;if(W!==dt)return W-dt;if(G&&R.hasConversion){if(!z||!T.hasConversion)return 1}else if(z&&T.hasConversion)return-1;if(O!==Ct)return O-Ct;if(G){if(!z)return 1}else if(z)return-1;const Ut=(x.length-I.length)*(G?-1:1);if(Ut!==0)return Ut;const zt=[];let Xt=0;for(let fe=0;fe<x.length;++fe){const cr=V(x[fe],I[fe]);zt.push(cr),Xt+=cr}if(Xt!==0)return Xt;let Gt;for(Gt of zt)if(Gt!==0)return Gt;return 0}function X(w){if(w.length===0)return[];const F=w.map(u);w.length>1&&F.sort((R,T)=>R.index-T.index);let x=F[0].conversionsTo;if(w.length===1)return x;x=x.concat([]);const I=new Set(w);for(let R=1;R<F.length;++R){let T;for(T of F[R].conversionsTo)I.has(T.from)||(x.push(T),I.add(T.from))}return x}function Q(w,F){let x=F;if(w.some(R=>R.hasConversion)){const R=y(w),T=w.map(j);x=function(){const z=[],W=R?arguments.length-1:arguments.length;for(let O=0;O<W;O++)z[O]=T[O](arguments[O]);return R&&(z[W]=arguments[W].map(T[W])),F.apply(this,z)}}let I=x;if(y(w)){const R=w.length-1;I=function(){return x.apply(this,ct(arguments,0,R).concat([ct(arguments,R)]))}}return I}function j(w){let F,x,I,R;const T=[],G=[];switch(w.types.forEach(function(z){z.conversion&&(T.push(u(z.conversion.from).test),G.push(z.conversion.convert))}),G.length){case 0:return function(W){return W};case 1:return F=T[0],I=G[0],function(W){return F(W)?I(W):W};case 2:return F=T[0],x=T[1],I=G[0],R=G[1],function(W){return F(W)?I(W):x(W)?R(W):W};default:return function(W){for(let O=0;O<G.length;O++)if(T[O](W))return G[O](W);return W}}}function rt(w){function F(x,I,R){if(I<x.length){const T=x[I];let G=[];if(T.restParam){const z=T.types.filter(N);z.length<T.types.length&&G.push({types:z,name:"..."+z.map(W=>W.name).join("|"),hasAny:z.some(W=>W.isAny),hasConversion:!1,restParam:!0}),G.push(T)}else G=T.types.map(function(z){return{types:[z],name:z.name,hasAny:z.isAny,hasConversion:z.conversion,restParam:!1}});return kt(G,function(z){return F(x,I+1,R.concat([z]))})}else return[R]}return F(w,0,[])}function ft(w,F){const x=Math.max(w.length,F.length);for(let z=0;z<x;z++){const W=E(w,z),O=E(F,z);let ot=!1,dt;for(dt of O)if(W.has(dt)){ot=!0;break}if(!ot)return!1}const I=w.length,R=F.length,T=y(w),G=y(F);return T?G?I===R:R>=I:G?I>=R:I===R}function ht(w){return w.map(F=>Ee(F)?he(F.referToSelf.callback):Ae(F)?Rt(F.referTo.references,F.referTo.callback):F)}function nt(w,F,x){const I=[];let R;for(R of w){let T=x[R];if(typeof T!="number")throw new TypeError('No definition for referenced signature "'+R+'"');if(T=F[T],typeof T!="function")return!1;I.push(T)}return I}function St(w,F,x){const I=ht(w),R=new Array(I.length).fill(!1);let T=!0;for(;T;){T=!1;let G=!0;for(let z=0;z<I.length;++z){if(R[z])continue;const W=I[z];if(Ee(W))I[z]=W.referToSelf.callback(x),I[z].referToSelf=W.referToSelf,R[z]=!0,G=!1;else if(Ae(W)){const O=nt(W.referTo.references,I,F);O?(I[z]=W.referTo.callback.apply(this,O),I[z].referTo=W.referTo,R[z]=!0,G=!1):T=!0}}if(G&&T)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return I}function bt(w){const F=/\bthis(\(|\.signatures\b)/;Object.keys(w).forEach(x=>{const I=w[x];if(F.test(I.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function gt(w,F){if(s.createCount++,Object.keys(F).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&bt(F);const x=[],I=[],R={},T=[];let G;for(G in F){if(!Object.prototype.hasOwnProperty.call(F,G))continue;const _t=A(G);if(!_t)continue;x.forEach(function(Rr){if(ft(Rr,_t))throw new TypeError('Conflicting signatures "'+m(Rr)+'" and "'+m(_t)+'".')}),x.push(_t);const le=I.length;I.push(F[G]);const Ih=_t.map(M);let Fn;for(Fn of rt(Ih)){const Rr=m(Fn);T.push({params:Fn,name:Rr,fn:le}),Fn.every(Oh=>!Oh.hasConversion)&&(R[Rr]=le)}}T.sort(P);const z=St(I,R,Pr);let W;for(W in R)Object.prototype.hasOwnProperty.call(R,W)&&(R[W]=z[R[W]]);const O=[],ot=new Map;for(W of T)ot.has(W.name)||(W.fn=z[W.fn],O.push(W),ot.set(W.name,W));const dt=O[0]&&O[0].params.length<=2&&!y(O[0].params),Ct=O[1]&&O[1].params.length<=2&&!y(O[1].params),Ut=O[2]&&O[2].params.length<=2&&!y(O[2].params),zt=O[3]&&O[3].params.length<=2&&!y(O[3].params),Xt=O[4]&&O[4].params.length<=2&&!y(O[4].params),Gt=O[5]&&O[5].params.length<=2&&!y(O[5].params),fe=dt&&Ct&&Ut&&zt&&Xt&&Gt;for(let _t=0;_t<O.length;++_t)O[_t].test=C(O[_t].params);const cr=dt?_(O[0].params[0]):De,ah=Ct?_(O[1].params[0]):De,sh=Ut?_(O[2].params[0]):De,uh=zt?_(O[3].params[0]):De,oh=Xt?_(O[4].params[0]):De,hh=Gt?_(O[5].params[0]):De,fh=dt?_(O[0].params[1]):De,lh=Ct?_(O[1].params[1]):De,ch=Ut?_(O[2].params[1]):De,dh=zt?_(O[3].params[1]):De,vh=Xt?_(O[4].params[1]):De,gh=Gt?_(O[5].params[1]):De;for(let _t=0;_t<O.length;++_t)O[_t].implementation=Q(O[_t].params,O[_t].fn);const mh=dt?O[0].implementation:dr,ph=Ct?O[1].implementation:dr,yh=Ut?O[2].implementation:dr,Dh=zt?O[3].implementation:dr,_h=Xt?O[4].implementation:dr,Mh=Gt?O[5].implementation:dr,wh=dt?O[0].params.length:-1,Ah=Ct?O[1].params.length:-1,Eh=Ut?O[2].params.length:-1,bh=zt?O[3].params.length:-1,Ch=Xt?O[4].params.length:-1,Fh=Gt?O[5].params.length:-1,xh=fe?6:0,Nh=O.length,Bh=O.map(_t=>_t.test),Sh=O.map(_t=>_t.implementation),Th=function(){for(let le=xh;le<Nh;le++)if(Bh[le](arguments))return Sh[le].apply(this,arguments);return s.onMismatch(w,arguments,O)};function Pr(_t,le){return arguments.length===wh&&cr(_t)&&fh(le)?mh.apply(this,arguments):arguments.length===Ah&&ah(_t)&&lh(le)?ph.apply(this,arguments):arguments.length===Eh&&sh(_t)&&ch(le)?yh.apply(this,arguments):arguments.length===bh&&uh(_t)&&dh(le)?Dh.apply(this,arguments):arguments.length===Ch&&oh(_t)&&vh(le)?_h.apply(this,arguments):arguments.length===Fh&&hh(_t)&&gh(le)?Mh.apply(this,arguments):Th.apply(this,arguments)}try{Object.defineProperty(Pr,"name",{value:w})}catch(_t){}return Pr.signatures=R,Pr._typedFunctionData={signatures:O,signatureMap:ot},Pr}function Mt(w,F,x){throw k(w,F,x)}function Vt(w){return ct(w,0,w.length-1)}function mt(w){return w[w.length-1]}function ct(w,F,x){return Array.prototype.slice.call(w,F,x)}function re(w,F){for(let x=0;x<w.length;x++)if(F(w[x]))return w[x]}function kt(w,F){return Array.prototype.concat.apply([],w.map(F))}function pt(){const w=Vt(arguments).map(x=>m(A(x))),F=mt(arguments);if(typeof F!="function")throw new TypeError("Callback function expected as last argument");return Rt(w,F)}function Rt(w,F){return{referTo:{references:w,callback:F}}}function he(w){if(typeof w!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:w}}}function Ae(w){return w&&typeof w.referTo=="object"&&Array.isArray(w.referTo.references)&&typeof w.referTo.callback=="function"}function Ee(w){return w&&typeof w.referToSelf=="object"&&typeof w.referToSelf.callback=="function"}function ke(w,F){if(!w)return F;if(F&&F!==w){const x=new Error("Function names do not match (expected: "+w+", actual: "+F+")");throw x.data={actual:F,expected:w},x}return w}function ze(w){let F;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&(c(w[x])||typeof w[x].signature=="string")&&(F=ke(F,w[x].name));return F}function Or(w,F){let x;for(x in F)if(Object.prototype.hasOwnProperty.call(F,x)){if(x in w&&F[x]!==w[x]){const I=new Error('Signature "'+x+'" is defined twice');throw I.data={signature:x,sourceFunction:F[x],destFunction:w[x]},I}w[x]=F[x]}}const Mi=s;s=function(w){const F=typeof w=="string",x=F?1:0;let I=F?w:"";const R={};for(let T=x;T<arguments.length;++T){const G=arguments[T];let z={},W;if(typeof G=="function"?(W=G.name,typeof G.signature=="string"?z[G.signature]=G:c(G)&&(z=G.signatures)):t(G)&&(z=G,F||(W=ze(G))),Object.keys(z).length===0){const O=new TypeError("Argument to 'typed' at index "+T+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw O.data={index:T,argument:G},O}F||(I=ke(I,W)),Or(R,z)}return gt(I||"",R)},s.create=Mo,s.createCount=Mi.createCount,s.onMismatch=Mt,s.throwMismatchError=Mt,s.createError=k,s.clear=o,s.clearConversions=f,s.addTypes=h,s._findType=u,s.referTo=pt,s.referToSelf=he,s.convert=d,s.findSignature=v,s.find=g,s.isTypedFunction=c,s.warnAgainstDeprecatedThis=!0,s.addType=function(w,F){let x="any";F!==!1&&n.has("Object")&&(x="Object"),s.addTypes([w],x)};function er(w){if(!w||typeof w.from!="string"||typeof w.to!="string"||typeof w.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(w.to===w.from)throw new SyntaxError('Illegal to define conversion from "'+w.from+'" to itself.')}return s.addConversion=function(w){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};er(w);const x=u(w.to),I=x.conversionsTo.find(R=>R.from===w.from);if(I)if(F&&F.override)s.removeConversion({from:I.from,to:w.to,convert:I.convert});else throw new Error('There is already a conversion from "'+w.from+'" to "'+x.name+'"');x.conversionsTo.push({from:w.from,convert:w.convert,index:a++})},s.addConversions=function(w,F){w.forEach(x=>s.addConversion(x,F))},s.removeConversion=function(w){er(w);const F=u(w.to),x=re(F.conversionsTo,R=>R.from===w.from);if(!x)throw new Error("Attempt to remove nonexistent conversion from "+w.from+" to "+w.to);if(x.convert!==w.convert)throw new Error("Conversion to remove does not match existing conversion");const I=F.conversionsTo.indexOf(x);F.conversionsTo.splice(I,1)},s.resolve=function(w,F){if(!c(w))throw new TypeError(ks);const x=w._typedFunctionData.signatures;for(let I=0;I<x.length;++I)if(x[I].test(F))return x[I];return null},s}var ri=Mo();function et(t,e,r,n){function i(a){var s=Yv(a,e.map(ng));return eg(t,e,a),r(s)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function eg(t,e,r){var n=e.filter(a=>!rg(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function rg(t){return t&&t[0]==="?"}function ng(t){return t&&t[0]==="?"?t.slice(1):t}function Ot(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function $i(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ot(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Ot(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(i).concat(t.toString(e)).concat(a)}function ea(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:i}=wo(e);switch(r){case"fixed":return ag(t,n);case"exponential":return Ao(t,n);case"engineering":return ig(t,n);case"bin":return $i(t,2,i);case"oct":return $i(t,8,i);case"hex":return $i(t,16,i);case"auto":return sg(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function wo(t){var e="auto",r,n;if(t!==void 0)if(Ft(t))r=t;else if(Pt(t))r=t.toNumber();else if(Ta(t))t.precision!==void 0&&(r=zs(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=zs(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:r,wordSize:n}}function gi(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(u){return i-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return s.length===0&&(s.push(0),i++),{sign:r,coefficients:s,exponent:i}}function ig(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=gi(t),n=mi(r,e),i=n.exponent,a=n.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Ft(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var u=Math.abs(i-s)-(a.length-1),h=0;h<u;h++)a.push(0);for(var o=Math.abs(i-s),f=1;o>0;)f++,o--;var l=a.slice(f).join(""),c=Ft(e)&&l.length||l.match(/[1-9]/)?"."+l:"",v=a.slice(0,f).join("")+c+"e"+(i>=0?"+":"")+s.toString();return n.sign+v}function ag(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=gi(t),n=typeof e=="number"?mi(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(br(s-i.length))),a<0&&(i=br(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Ao(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=gi(t),n=e?mi(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(br(e-i.length)));var s=i.shift();return n.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function sg(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=Ls(r==null?void 0:r.lowerExp,-3),i=Ls(r==null?void 0:r.upperExp,5),a=gi(t),s=e?mi(a,e):a;if(s.exponent<n||s.exponent>=i)return Ao(t,e);var u=s.coefficients,h=s.exponent;u.length<e&&(u=u.concat(br(e-u.length))),u=u.concat(br(h-u.length+1+(u.length<e?e-u.length:0))),u=br(-h).concat(u);var o=h>0?h:0;return o<u.length-1&&u.splice(o+1,0,"."),s.sign+u.join("")}function mi(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function br(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function ug(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function ni(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(r*Math.max(Math.abs(t),Math.abs(e)),n)}function zs(t,e){if(Ft(t))return t;if(Pt(t))return t.toNumber();e()}function Ls(t,e){return Ft(t)?t:Pt(t)?t.toNumber():e}var Eo=function(){return Eo=ri.create,ri},og=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],hg=et("typed",og,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,s=Eo();return s.clear(),s.addTypes([{name:"number",test:Ft},{name:"Complex",test:po},{name:"BigNumber",test:Pt},{name:"bigint",test:Mv},{name:"Fraction",test:yo},{name:"Unit",test:Do},{name:"identifier",test:u=>Ne&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(u)},{name:"string",test:Ne},{name:"Chain",test:Qv},{name:"Array",test:Wt},{name:"Matrix",test:Nt},{name:"DenseMatrix",test:wv},{name:"SparseMatrix",test:Av},{name:"Range",test:Ev},{name:"Index",test:Sa},{name:"boolean",test:bv},{name:"ResultSet",test:Cv},{name:"Help",test:Fv},{name:"function",test:xv},{name:"Date",test:Nv},{name:"RegExp",test:Bv},{name:"null",test:Tv},{name:"undefined",test:Iv},{name:"AccessorNode",test:Ov},{name:"ArrayNode",test:Pv},{name:"AssignmentNode",test:Rv},{name:"BlockNode",test:qv},{name:"ConditionalNode",test:$v},{name:"ConstantNode",test:kv},{name:"FunctionNode",test:Lv},{name:"FunctionAssignmentNode",test:zv},{name:"IndexNode",test:Uv},{name:"Node",test:jv},{name:"ObjectNode",test:Vv},{name:"OperatorNode",test:Gv},{name:"ParenthesisNode",test:Wv},{name:"RangeNode",test:Zv},{name:"RelationalNode",test:Hv},{name:"SymbolNode",test:Jv},{name:"Map",test:Sv},{name:"Object",test:Ta}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(h){if(r||Sn(h),ug(h)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+h+"). Use function bignumber(x) to convert to BigNumber.");return new r(h)}},{from:"number",to:"Complex",convert:function(h){return n||Tn(h),new n(h,0)}},{from:"BigNumber",to:"Complex",convert:function(h){return n||Tn(h),new n(h.toNumber(),0)}},{from:"bigint",to:"number",convert:function(h){if(h>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+h+")");return Number(h)}},{from:"bigint",to:"BigNumber",convert:function(h){return r||Sn(h),new r(h.toString())}},{from:"bigint",to:"Fraction",convert:function(h){return a||In(h),new a(h)}},{from:"Fraction",to:"BigNumber",convert:function(h){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(h){return n||Tn(h),new n(h.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(h){a||In(h);var o=new a(h);if(o.valueOf()!==h)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+h+"). Use function fraction(x) to convert to Fraction.");return o}},{from:"string",to:"number",convert:function(h){var o=Number(h);if(isNaN(o))throw new Error('Cannot convert "'+h+'" to a number');return o}},{from:"string",to:"BigNumber",convert:function(h){r||Sn(h);try{return new r(h)}catch(o){throw new Error('Cannot convert "'+h+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(h){try{return BigInt(h)}catch(o){throw new Error('Cannot convert "'+h+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(h){a||In(h);try{return new a(h)}catch(o){throw new Error('Cannot convert "'+h+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(h){n||Tn(h);try{return new n(h)}catch(o){throw new Error('Cannot convert "'+h+'" to Complex')}}},{from:"boolean",to:"number",convert:function(h){return+h}},{from:"boolean",to:"BigNumber",convert:function(h){return r||Sn(h),new r(+h)}},{from:"boolean",to:"bigint",convert:function(h){return BigInt(+h)}},{from:"boolean",to:"Fraction",convert:function(h){return a||In(h),new a(+h)}},{from:"boolean",to:"string",convert:function(h){return String(h)}},{from:"Array",to:"Matrix",convert:function(h){return i||fg(),new i(h)}},{from:"Matrix",to:"Array",convert:function(h){return h.valueOf()}}]),s.onMismatch=(u,h,o)=>{var f=s.createError(u,h,o);if(["wrongType","mismatch"].includes(f.data.category)&&h.length===1&&Yr(h[0])&&o.some(c=>!c.params.includes(","))){var l=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw l.data=f.data,l}throw f},s.onMismatch=(u,h,o)=>{var f=s.createError(u,h,o);if(["wrongType","mismatch"].includes(f.data.category)&&h.length===1&&Yr(h[0])&&o.some(c=>!c.params.includes(","))){var l=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw l.data=f.data,l}throw f},s});function Sn(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Tn(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function fg(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function In(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var ra=9e15,Ye=1e9,na="0123456789abcdef",ii="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ai="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ia={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:ra,crypto:!1},bo,qe,at=!0,pi="[DecimalError] ",Qe=pi+"Invalid argument: ",Co=pi+"Precision limit exceeded",Fo=pi+"crypto unavailable",xo="[object Decimal]",se=Math.floor,Zt=Math.pow,lg=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,cg=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,dg=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,No=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fe=1e7,tt=7,vg=9007199254740991,gg=ii.length-1,aa=ai.length-1,q={toStringTag:xo};q.absoluteValue=q.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),K(t)};q.ceil=function(){return K(new this.constructor(this),this.e+1,2)};q.clampedTo=q.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Qe+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};q.comparedTo=q.cmp=function(t){var e,r,n,i,a=this,s=a.d,u=(t=new a.constructor(t)).d,h=a.s,o=t.s;if(!s||!u)return!h||!o?NaN:h!==o?h:s===u?0:!s^h<0?1:-1;if(!s[0]||!u[0])return s[0]?h:u[0]?-o:0;if(h!==o)return h;if(a.e!==t.e)return a.e>t.e^h<0?1:-1;for(n=s.length,i=u.length,e=0,r=n<i?n:i;e<r;++e)if(s[e]!==u[e])return s[e]>u[e]^h<0?1:-1;return n===i?0:n>i^h<0?1:-1};q.cosine=q.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+tt,n.rounding=1,r=mg(n,Oo(n,r)),n.precision=t,n.rounding=e,K(qe==2||qe==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};q.cubeRoot=q.cbrt=function(){var t,e,r,n,i,a,s,u,h,o,f=this,l=f.constructor;if(!f.isFinite()||f.isZero())return new l(f);for(at=!1,a=f.s*Zt(f.s*f,1/3),!a||Math.abs(a)==1/0?(r=ee(f.d),t=f.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=Zt(r,1/3),t=se((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new l(r),n.s=f.s):n=new l(a.toString()),s=(t=l.precision)+3;;)if(u=n,h=u.times(u).times(u),o=h.plus(f),n=Et(o.plus(f).times(u),o.plus(h),s+2,1),ee(u.d).slice(0,s)===(r=ee(n.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!i&&r=="4999"){if(!i&&(K(u,t+1,0),u.times(u).times(u).eq(f))){n=u;break}s+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(K(n,t+1,1),e=!n.times(n).times(n).eq(f));break}return at=!0,K(n,t,l.rounding,e)};q.decimalPlaces=q.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-se(this.e/tt))*tt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};q.dividedBy=q.div=function(t){return Et(this,new this.constructor(t))};q.dividedToIntegerBy=q.divToInt=function(t){var e=this,r=e.constructor;return K(Et(e,new r(t),0,1,1),r.precision,r.rounding)};q.equals=q.eq=function(t){return this.cmp(t)===0};q.floor=function(){return K(new this.constructor(this),this.e+1,3)};q.greaterThan=q.gt=function(t){return this.cmp(t)>0};q.greaterThanOrEqualTo=q.gte=function(t){var e=this.cmp(t);return e==1||e===0};q.hyperbolicCosine=q.cosh=function(){var t,e,r,n,i,a=this,s=a.constructor,u=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return u;r=s.precision,n=s.rounding,s.precision=r+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/Di(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Sr(s,1,a.times(e),new s(1),!0);for(var h,o=t,f=new s(8);o--;)h=a.times(a),a=u.minus(h.times(f.minus(h.times(f))));return K(a,s.precision=r,s.rounding=n,!0)};q.hyperbolicSine=q.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Sr(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/Di(5,t)),i=Sr(a,2,i,i,!0);for(var s,u=new a(5),h=new a(16),o=new a(20);t--;)s=i.times(i),i=i.times(u.plus(s.times(h.times(s).plus(o))))}return a.precision=e,a.rounding=r,K(i,e,r,!0)};q.hyperbolicTangent=q.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Et(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};q.inverseCosine=q.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,i=e.rounding;return r!==-1?r===0?t.isNeg()?Se(e,n,i):new e(0):new e(NaN):t.isZero()?Se(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,t.times(2))};q.inverseHyperbolicCosine=q.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,at=!1,r=r.times(r).minus(1).sqrt().plus(r),at=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};q.inverseHyperbolicSine=q.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,at=!1,r=r.times(r).plus(1).sqrt().plus(r),at=!0,n.precision=t,n.rounding=e,r.ln())};q.inverseHyperbolicTangent=q.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?K(new a(i),t,e,!0):(a.precision=r=n-i.e,i=Et(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};q.inverseSine=q.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=Se(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};q.inverseTangent=q.atan=function(){var t,e,r,n,i,a,s,u,h,o=this,f=o.constructor,l=f.precision,c=f.rounding;if(o.isFinite()){if(o.isZero())return new f(o);if(o.abs().eq(1)&&l+4<=aa)return s=Se(f,l+4,c).times(.25),s.s=o.s,s}else{if(!o.s)return new f(NaN);if(l+4<=aa)return s=Se(f,l+4,c).times(.5),s.s=o.s,s}for(f.precision=u=l+10,f.rounding=1,r=Math.min(28,u/tt+2|0),t=r;t;--t)o=o.div(o.times(o).plus(1).sqrt().plus(1));for(at=!1,e=Math.ceil(u/tt),n=1,h=o.times(o),s=new f(o),i=o;t!==-1;)if(i=i.times(h),a=s.minus(i.div(n+=2)),i=i.times(h),s=a.plus(i.div(n+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===a.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),at=!0,K(s,f.precision=l,f.rounding=c,!0)};q.isFinite=function(){return!!this.d};q.isInteger=q.isInt=function(){return!!this.d&&se(this.e/tt)>this.d.length-2};q.isNaN=function(){return!this.s};q.isNegative=q.isNeg=function(){return this.s<0};q.isPositive=q.isPos=function(){return this.s>0};q.isZero=function(){return!!this.d&&this.d[0]===0};q.lessThan=q.lt=function(t){return this.cmp(t)<0};q.lessThanOrEqualTo=q.lte=function(t){return this.cmp(t)<1};q.logarithm=q.log=function(t){var e,r,n,i,a,s,u,h,o=this,f=o.constructor,l=f.precision,c=f.rounding,v=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(r=o.d,o.s<0||!r||!r[0]||o.eq(1))return new f(r&&!r[0]?-1/0:o.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(at=!1,u=l+v,s=Ge(o,u),n=e?si(f,u+10):Ge(t,u),h=Et(s,n,u,1),tn(h.d,i=l,c))do if(u+=10,s=Ge(o,u),n=e?si(f,u+10):Ge(t,u),h=Et(s,n,u,1),!a){+ee(h.d).slice(i+1,i+15)+1==1e14&&(h=K(h,l+1,0));break}while(tn(h.d,i+=10,c));return at=!0,K(h,l,c)};q.minus=q.sub=function(t){var e,r,n,i,a,s,u,h,o,f,l,c,v=this,g=v.constructor;if(t=new g(t),!v.d||!t.d)return!v.s||!t.s?t=new g(NaN):v.d?t.s=-t.s:t=new g(t.d||v.s!==t.s?v:NaN),t;if(v.s!=t.s)return t.s=-t.s,v.plus(t);if(o=v.d,c=t.d,u=g.precision,h=g.rounding,!o[0]||!c[0]){if(c[0])t.s=-t.s;else if(o[0])t=new g(v);else return new g(h===3?-0:0);return at?K(t,u,h):t}if(r=se(t.e/tt),f=se(v.e/tt),o=o.slice(),a=f-r,a){for(l=a<0,l?(e=o,a=-a,s=c.length):(e=c,r=f,s=o.length),n=Math.max(Math.ceil(u/tt),s)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=o.length,s=c.length,l=n<s,l&&(s=n),n=0;n<s;n++)if(o[n]!=c[n]){l=o[n]<c[n];break}a=0}for(l&&(e=o,o=c,c=e,t.s=-t.s),s=o.length,n=c.length-s;n>0;--n)o[s++]=0;for(n=c.length;n>a;){if(o[--n]<c[n]){for(i=n;i&&o[--i]===0;)o[i]=Fe-1;--o[i],o[n]+=Fe}o[n]-=c[n]}for(;o[--s]===0;)o.pop();for(;o[0]===0;o.shift())--r;return o[0]?(t.d=o,t.e=yi(o,r),at?K(t,u,h):t):new g(h===3?-0:0)};q.modulo=q.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?K(new n(r),n.precision,n.rounding):(at=!1,n.modulo==9?(e=Et(r,t.abs(),0,3,1),e.s*=t.s):e=Et(r,t,0,n.modulo,1),e=e.times(t),at=!0,r.minus(e))};q.naturalExponential=q.exp=function(){return sa(this)};q.naturalLogarithm=q.ln=function(){return Ge(this)};q.negated=q.neg=function(){var t=new this.constructor(this);return t.s=-t.s,K(t)};q.plus=q.add=function(t){var e,r,n,i,a,s,u,h,o,f,l=this,c=l.constructor;if(t=new c(t),!l.d||!t.d)return!l.s||!t.s?t=new c(NaN):l.d||(t=new c(t.d||l.s===t.s?l:NaN)),t;if(l.s!=t.s)return t.s=-t.s,l.minus(t);if(o=l.d,f=t.d,u=c.precision,h=c.rounding,!o[0]||!f[0])return f[0]||(t=new c(l)),at?K(t,u,h):t;if(a=se(l.e/tt),n=se(t.e/tt),o=o.slice(),i=a-n,i){for(i<0?(r=o,i=-i,s=f.length):(r=f,n=a,s=o.length),a=Math.ceil(u/tt),s=a>s?a+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=o.length,i=f.length,s-i<0&&(i=s,r=f,f=o,o=r),e=0;i;)e=(o[--i]=o[i]+f[i]+e)/Fe|0,o[i]%=Fe;for(e&&(o.unshift(e),++n),s=o.length;o[--s]==0;)o.pop();return t.d=o,t.e=yi(o,n),at?K(t,u,h):t};q.precision=q.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Qe+t);return r.d?(e=Bo(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};q.round=function(){var t=this,e=t.constructor;return K(new e(t),t.e+1,e.rounding)};q.sine=q.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+tt,n.rounding=1,r=yg(n,Oo(n,r)),n.precision=t,n.rounding=e,K(qe>2?r.neg():r,t,e,!0)):new n(NaN)};q.squareRoot=q.sqrt=function(){var t,e,r,n,i,a,s=this,u=s.d,h=s.e,o=s.s,f=s.constructor;if(o!==1||!u||!u[0])return new f(!o||o<0&&(!u||u[0])?NaN:u?s:1/0);for(at=!1,o=Math.sqrt(+s),o==0||o==1/0?(e=ee(u),(e.length+h)%2==0&&(e+="0"),o=Math.sqrt(e),h=se((h+1)/2)-(h<0||h%2),o==1/0?e="5e"+h:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+h),n=new f(e)):n=new f(o.toString()),r=(h=f.precision)+3;;)if(a=n,n=a.plus(Et(s,a,r+2,1)).times(.5),ee(a.d).slice(0,r)===(e=ee(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(K(a,h+1,0),a.times(a).eq(s))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(K(n,h+1,1),t=!n.times(n).eq(s));break}return at=!0,K(n,h,f.rounding,t)};q.tangent=q.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Et(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,K(qe==2||qe==4?r.neg():r,t,e,!0)):new n(NaN)};q.times=q.mul=function(t){var e,r,n,i,a,s,u,h,o,f=this,l=f.constructor,c=f.d,v=(t=new l(t)).d;if(t.s*=f.s,!c||!c[0]||!v||!v[0])return new l(!t.s||c&&!c[0]&&!v||v&&!v[0]&&!c?NaN:!c||!v?t.s/0:t.s*0);for(r=se(f.e/tt)+se(t.e/tt),h=c.length,o=v.length,h<o&&(a=c,c=v,v=a,s=h,h=o,o=s),a=[],s=h+o,n=s;n--;)a.push(0);for(n=o;--n>=0;){for(e=0,i=h+n;i>n;)u=a[i]+v[n]*c[i-n-1]+e,a[i--]=u%Fe|0,e=u/Fe|0;a[i]=(a[i]+e)%Fe|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=yi(a,r),at?K(t,l.precision,l.rounding):t};q.toBinary=function(t,e){return Ia(this,2,t,e)};q.toDecimalPlaces=q.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(me(t,0,Ye),e===void 0?e=n.rounding:me(e,0,8),K(r,t+r.e+1,e))};q.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Pe(n,!0):(me(t,0,Ye),e===void 0?e=i.rounding:me(e,0,8),n=K(new i(n),t+1,e),r=Pe(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};q.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Pe(i):(me(t,0,Ye),e===void 0?e=a.rounding:me(e,0,8),n=K(new a(i),t+i.e+1,e),r=Pe(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};q.toFraction=function(t){var e,r,n,i,a,s,u,h,o,f,l,c,v=this,g=v.d,d=v.constructor;if(!g)return new d(v);if(o=r=new d(1),n=h=new d(0),e=new d(n),a=e.e=Bo(g)-v.e-1,s=a%tt,e.d[0]=Zt(10,s<0?tt+s:s),t==null)t=a>0?e:o;else{if(u=new d(t),!u.isInt()||u.lt(o))throw Error(Qe+u);t=u.gt(e)?a>0?e:o:u}for(at=!1,u=new d(ee(g)),f=d.precision,d.precision=a=g.length*tt*2;l=Et(u,e,0,1,1),i=r.plus(l.times(n)),i.cmp(t)!=1;)r=n,n=i,i=o,o=h.plus(l.times(i)),h=i,i=e,e=u.minus(l.times(i)),u=i;return i=Et(t.minus(r),n,0,1,1),h=h.plus(i.times(o)),r=r.plus(i.times(n)),h.s=o.s=v.s,c=Et(o,n,a,1).minus(v).abs().cmp(Et(h,r,a,1).minus(v).abs())<1?[o,n]:[h,r],d.precision=f,at=!0,c};q.toHexadecimal=q.toHex=function(t,e){return Ia(this,16,t,e)};q.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:me(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(at=!1,r=Et(r,t,0,e,1).times(t),at=!0,K(r)):(t.s=r.s,r=t),r};q.toNumber=function(){return+this};q.toOctal=function(t,e){return Ia(this,8,t,e)};q.toPower=q.pow=function(t){var e,r,n,i,a,s,u=this,h=u.constructor,o=+(t=new h(t));if(!u.d||!t.d||!u.d[0]||!t.d[0])return new h(Zt(+u,o));if(u=new h(u),u.eq(1))return u;if(n=h.precision,a=h.rounding,t.eq(1))return K(u,n,a);if(e=se(t.e/tt),e>=t.d.length-1&&(r=o<0?-o:o)<=vg)return i=So(h,u,r,n),t.s<0?new h(1).div(i):K(i,n,a);if(s=u.s,s<0){if(e<t.d.length-1)return new h(NaN);if((t.d[e]&1)==0&&(s=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=s,u}return r=Zt(+u,o),e=r==0||!isFinite(r)?se(o*(Math.log("0."+ee(u.d))/Math.LN10+u.e+1)):new h(r+"").e,e>h.maxE+1||e<h.minE-1?new h(e>0?s/0:0):(at=!1,h.rounding=u.s=1,r=Math.min(12,(e+"").length),i=sa(t.times(Ge(u,n+r)),n),i.d&&(i=K(i,n+5,1),tn(i.d,n,a)&&(e=n+10,i=K(sa(t.times(Ge(u,e+r)),e),e+5,1),+ee(i.d).slice(n+1,n+15)+1==1e14&&(i=K(i,n+1,0)))),i.s=s,at=!0,h.rounding=a,K(i,n,a))};q.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Pe(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(me(t,1,Ye),e===void 0?e=i.rounding:me(e,0,8),n=K(new i(n),t,e),r=Pe(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};q.toSignificantDigits=q.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(me(t,1,Ye),e===void 0?e=n.rounding:me(e,0,8)),K(new n(r),t,e)};q.toString=function(){var t=this,e=t.constructor,r=Pe(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};q.truncated=q.trunc=function(){return K(new this.constructor(this),this.e+1,1)};q.valueOf=q.toJSON=function(){var t=this,e=t.constructor,r=Pe(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function ee(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=tt-n.length,r&&(a+=je(r)),a+=n;s=t[e],n=s+"",r=tt-n.length,r&&(a+=je(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function me(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Qe+t)}function tn(t,e,r,n){var i,a,s,u;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=tt,i=0):(i=Math.ceil((e+1)/tt),e%=tt),a=Zt(10,tt-e),u=t[i]%a|0,n==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),s=r<4&&u==99999||r>3&&u==49999||u==5e4||u==0):s=(r<4&&u+1==a||r>3&&u+1==a/2)&&(t[i+1]/a/100|0)==Zt(10,e-2)-1||(u==a/2||u==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),s=(n||r<4)&&u==9999||!n&&r>3&&u==4999):s=((n||r<4)&&u+1==a||!n&&r>3&&u+1==a/2)&&(t[i+1]/a/1e3|0)==Zt(10,e-3)-1,s}function Ln(t,e,r){for(var n,i=[0],a,s=0,u=t.length;s<u;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=na.indexOf(t.charAt(s++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function mg(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/Di(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Sr(t,1,e.times(i),new t(1));for(var a=r;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}var Et=function(){function t(n,i,a){var s,u=0,h=n.length;for(n=n.slice();h--;)s=n[h]*i+u,n[h]=s%a|0,u=s/a|0;return u&&n.unshift(u),n}function e(n,i,a,s){var u,h;if(a!=s)h=a>s?1:-1;else for(u=h=0;u<a;u++)if(n[u]!=i[u]){h=n[u]>i[u]?1:-1;break}return h}function r(n,i,a,s){for(var u=0;a--;)n[a]-=u,u=n[a]<i[a]?1:0,n[a]=u*s+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s,u,h){var o,f,l,c,v,g,d,m,p,M,D,A,y,_,C,b,E,N,S,k,J=n.constructor,U=n.s==i.s?1:-1,V=n.d,P=i.d;if(!V||!V[0]||!P||!P[0])return new J(!n.s||!i.s||(V?P&&V[0]==P[0]:!P)?NaN:V&&V[0]==0||!P?U*0:U/0);for(h?(v=1,f=n.e-i.e):(h=Fe,v=tt,f=se(n.e/v)-se(i.e/v)),S=P.length,E=V.length,p=new J(U),M=p.d=[],l=0;P[l]==(V[l]||0);l++);if(P[l]>(V[l]||0)&&f--,a==null?(_=a=J.precision,s=J.rounding):u?_=a+(n.e-i.e)+1:_=a,_<0)M.push(1),g=!0;else{if(_=_/v+2|0,l=0,S==1){for(c=0,P=P[0],_++;(l<E||c)&&_--;l++)C=c*h+(V[l]||0),M[l]=C/P|0,c=C%P|0;g=c||l<E}else{for(c=h/(P[0]+1)|0,c>1&&(P=t(P,c,h),V=t(V,c,h),S=P.length,E=V.length),b=S,D=V.slice(0,S),A=D.length;A<S;)D[A++]=0;k=P.slice(),k.unshift(0),N=P[0],P[1]>=h/2&&++N;do c=0,o=e(P,D,S,A),o<0?(y=D[0],S!=A&&(y=y*h+(D[1]||0)),c=y/N|0,c>1?(c>=h&&(c=h-1),d=t(P,c,h),m=d.length,A=D.length,o=e(d,D,m,A),o==1&&(c--,r(d,S<m?k:P,m,h))):(c==0&&(o=c=1),d=P.slice()),m=d.length,m<A&&d.unshift(0),r(D,d,A,h),o==-1&&(A=D.length,o=e(P,D,S,A),o<1&&(c++,r(D,S<A?k:P,A,h))),A=D.length):o===0&&(c++,D=[0]),M[l++]=c,o&&D[0]?D[A++]=V[b]||0:(D=[V[b]],A=1);while((b++<E||D[0]!==void 0)&&_--);g=D[0]!==void 0}M[0]||M.shift()}if(v==1)p.e=f,bo=g;else{for(l=1,c=M[0];c>=10;c/=10)l++;p.e=l+f*v-1,K(p,u?a+p.e+1:a,s,g)}return p}}();function K(t,e,r,n){var i,a,s,u,h,o,f,l,c,v=t.constructor;t:if(e!=null){if(l=t.d,!l)return t;for(i=1,u=l[0];u>=10;u/=10)i++;if(a=e-i,a<0)a+=tt,s=e,f=l[c=0],h=f/Zt(10,i-s-1)%10|0;else if(c=Math.ceil((a+1)/tt),u=l.length,c>=u)if(n){for(;u++<=c;)l.push(0);f=h=0,i=1,a%=tt,s=a-tt+1}else break t;else{for(f=u=l[c],i=1;u>=10;u/=10)i++;a%=tt,s=a-tt+i,h=s<0?0:f/Zt(10,i-s-1)%10|0}if(n=n||e<0||l[c+1]!==void 0||(s<0?f:f%Zt(10,i-s-1)),o=r<4?(h||n)&&(r==0||r==(t.s<0?3:2)):h>5||h==5&&(r==4||n||r==6&&(a>0?s>0?f/Zt(10,i-s):0:l[c-1])%10&1||r==(t.s<0?8:7)),e<1||!l[0])return l.length=0,o?(e-=t.e+1,l[0]=Zt(10,(tt-e%tt)%tt),t.e=-e||0):l[0]=t.e=0,t;if(a==0?(l.length=c,u=1,c--):(l.length=c+1,u=Zt(10,tt-a),l[c]=s>0?(f/Zt(10,i-s)%Zt(10,s)|0)*u:0),o)for(;;)if(c==0){for(a=1,s=l[0];s>=10;s/=10)a++;for(s=l[0]+=u,u=1;s>=10;s/=10)u++;a!=u&&(t.e++,l[0]==Fe&&(l[0]=1));break}else{if(l[c]+=u,l[c]!=Fe)break;l[c--]=0,u=1}for(a=l.length;l[--a]===0;)l.pop()}return at&&(t.e>v.maxE?(t.d=null,t.e=NaN):t.e<v.minE&&(t.e=0,t.d=[0])),t}function Pe(t,e,r){if(!t.isFinite())return Io(t);var n,i=t.e,a=ee(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+je(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+je(-i-1)+a,r&&(n=r-s)>0&&(a+=je(n))):i>=s?(a+=je(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+je(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=je(n))),a}function yi(t,e){var r=t[0];for(e*=tt;r>=10;r/=10)e++;return e}function si(t,e,r){if(e>gg)throw at=!0,r&&(t.precision=r),Error(Co);return K(new t(ii),e,1,!0)}function Se(t,e,r){if(e>aa)throw Error(Co);return K(new t(ai),e,r,!0)}function Bo(t){var e=t.length-1,r=e*tt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function je(t){for(var e="";t--;)e+="0";return e}function So(t,e,r,n){var i,a=new t(1),s=Math.ceil(n/tt+4);for(at=!1;;){if(r%2&&(a=a.times(e),js(a.d,s)&&(i=!0)),r=se(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),js(e.d,s)}return at=!0,a}function Us(t){return t.d[t.d.length-1]&1}function To(t,e,r){for(var n,i,a=new t(e[0]),s=0;++s<e.length;){if(i=new t(e[s]),!i.s){a=i;break}n=a.cmp(i),(n===r||n===0&&a.s===r)&&(a=i)}return a}function sa(t,e){var r,n,i,a,s,u,h,o=0,f=0,l=0,c=t.constructor,v=c.rounding,g=c.precision;if(!t.d||!t.d[0]||t.e>17)return new c(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(at=!1,h=g):h=e,u=new c(.03125);t.e>-2;)t=t.times(u),l+=5;for(n=Math.log(Zt(2,l))/Math.LN10*2+5|0,h+=n,r=a=s=new c(1),c.precision=h;;){if(a=K(a.times(t),h,1),r=r.times(++f),u=s.plus(Et(a,r,h,1)),ee(u.d).slice(0,h)===ee(s.d).slice(0,h)){for(i=l;i--;)s=K(s.times(s),h,1);if(e==null)if(o<3&&tn(s.d,h-n,v,o))c.precision=h+=10,r=a=u=new c(1),f=0,o++;else return K(s,c.precision=g,v,at=!0);else return c.precision=g,s}s=u}}function Ge(t,e){var r,n,i,a,s,u,h,o,f,l,c,v=1,g=10,d=t,m=d.d,p=d.constructor,M=p.rounding,D=p.precision;if(d.s<0||!m||!m[0]||!d.e&&m[0]==1&&m.length==1)return new p(m&&!m[0]?-1/0:d.s!=1?NaN:m?0:d);if(e==null?(at=!1,f=D):f=e,p.precision=f+=g,r=ee(m),n=r.charAt(0),Math.abs(a=d.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)d=d.times(t),r=ee(d.d),n=r.charAt(0),v++;a=d.e,n>1?(d=new p("0."+r),a++):d=new p(n+"."+r.slice(1))}else return o=si(p,f+2,D).times(a+""),d=Ge(new p(n+"."+r.slice(1)),f-g).plus(o),p.precision=D,e==null?K(d,D,M,at=!0):d;for(l=d,h=s=d=Et(d.minus(1),d.plus(1),f,1),c=K(d.times(d),f,1),i=3;;){if(s=K(s.times(c),f,1),o=h.plus(Et(s,new p(i),f,1)),ee(o.d).slice(0,f)===ee(h.d).slice(0,f))if(h=h.times(2),a!==0&&(h=h.plus(si(p,f+2,D).times(a+""))),h=Et(h,new p(v),f,1),e==null)if(tn(h.d,f-g,M,u))p.precision=f+=g,o=s=d=Et(l.minus(1),l.plus(1),f,1),c=K(d.times(d),f,1),i=u=1;else return K(h,p.precision=D,M,at=!0);else return p.precision=D,h;h=o,i+=2}}function Io(t){return String(t.s*t.s/0)}function Un(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%tt,r<0&&(n+=tt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=tt;n<i;)t.d.push(+e.slice(n,n+=tt));e=e.slice(n),n=tt-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),at&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function pg(t,e){var r,n,i,a,s,u,h,o,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),No.test(e))return Un(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(cg.test(e))r=16,e=e.toLowerCase();else if(lg.test(e))r=2;else if(dg.test(e))r=8;else throw Error(Qe+e);for(a=e.search(/p/i),a>0?(h=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,n=t.constructor,s&&(e=e.replace(".",""),u=e.length,a=u-a,i=So(n,new n(r),a,a*2)),o=Ln(e,r,Fe),f=o.length-1,a=f;o[a]===0;--a)o.pop();return a<0?new n(t.s*0):(t.e=yi(o,f),t.d=o,at=!1,s&&(t=Et(t,i,u*4)),h&&(t=t.times(Math.abs(h)<54?Zt(2,h):Tr.pow(2,h))),at=!0,t)}function yg(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Sr(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/Di(5,r)),e=Sr(t,2,e,e);for(var i,a=new t(5),s=new t(16),u=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(u))));return e}function Sr(t,e,r,n,i){var a,s,u,h,o=t.precision,f=Math.ceil(o/tt);for(at=!1,h=r.times(r),u=new t(n);;){if(s=Et(u.times(h),new t(e++*e++),o,1),u=i?n.plus(s):n.minus(s),n=Et(s.times(h),new t(e++*e++),o,1),s=u.plus(n),s.d[f]!==void 0){for(a=f;s.d[a]===u.d[a]&&a--;);if(a==-1)break}a=u,u=n,n=s,s=a}return at=!0,s.d.length=f+1,s}function Di(t,e){for(var r=t;--e;)r*=t;return r}function Oo(t,e){var r,n=e.s<0,i=Se(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return qe=n?4:1,e;if(r=e.divToInt(i),r.isZero())qe=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return qe=Us(r)?n?2:3:n?4:1,e;qe=Us(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Ia(t,e,r,n){var i,a,s,u,h,o,f,l,c,v=t.constructor,g=r!==void 0;if(g?(me(r,1,Ye),n===void 0?n=v.rounding:me(n,0,8)):(r=v.precision,n=v.rounding),!t.isFinite())f=Io(t);else{for(f=Pe(t),s=f.indexOf("."),g?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,s>=0&&(f=f.replace(".",""),c=new v(1),c.e=f.length-s,c.d=Ln(Pe(c),10,i),c.e=c.d.length),l=Ln(f,10,i),a=h=l.length;l[--h]==0;)l.pop();if(!l[0])f=g?"0p+0":"0";else{if(s<0?a--:(t=new v(t),t.d=l,t.e=a,t=Et(t,c,r,n,0,i),l=t.d,a=t.e,o=bo),s=l[r],u=i/2,o=o||l[r+1]!==void 0,o=n<4?(s!==void 0||o)&&(n===0||n===(t.s<0?3:2)):s>u||s===u&&(n===4||o||n===6&&l[r-1]&1||n===(t.s<0?8:7)),l.length=r,o)for(;++l[--r]>i-1;)l[r]=0,r||(++a,l.unshift(1));for(h=l.length;!l[h-1];--h);for(s=0,f="";s<h;s++)f+=na.charAt(l[s]);if(g){if(h>1)if(e==16||e==8){for(s=e==16?4:3,--h;h%s;h++)f+="0";for(l=Ln(f,i,e),h=l.length;!l[h-1];--h);for(s=1,f="1.";s<h;s++)f+=na.charAt(l[s])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>h)for(a-=h;a--;)f+="0";else a<h&&(f=f.slice(0,a)+"."+f.slice(a))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}function js(t,e){if(t.length>e)return t.length=e,!0}function Dg(t){return new this(t).abs()}function _g(t){return new this(t).acos()}function Mg(t){return new this(t).acosh()}function wg(t,e){return new this(t).plus(e)}function Ag(t){return new this(t).asin()}function Eg(t){return new this(t).asinh()}function bg(t){return new this(t).atan()}function Cg(t){return new this(t).atanh()}function Fg(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Se(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Se(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Se(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(Et(t,e,a,1)),e=Se(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Et(t,e,a,1)),r}function xg(t){return new this(t).cbrt()}function Ng(t){return K(t=new this(t),t.e+1,2)}function Bg(t,e,r){return new this(t).clamp(e,r)}function Sg(t){if(!t||typeof t!="object")throw Error(pi+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Ye,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,ra,"maxE",0,ra,"minE",-9e15,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=ia[r]),(n=t[r])!==void 0)if(se(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Qe+r+": "+n);if(r="crypto",i&&(this[r]=ia[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Fo);else this[r]=!1;else throw Error(Qe+r+": "+n);return this}function Tg(t){return new this(t).cos()}function Ig(t){return new this(t).cosh()}function Po(t){var e,r,n;function i(a){var s,u,h,o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,Vs(a)){o.s=a.s,at?!a.d||a.e>i.maxE?(o.e=NaN,o.d=null):a.e<i.minE?(o.e=0,o.d=[0]):(o.e=a.e,o.d=a.d.slice()):(o.e=a.e,o.d=a.d?a.d.slice():a.d);return}if(h=typeof a,h==="number"){if(a===0){o.s=1/a<0?-1:1,o.e=0,o.d=[0];return}if(a<0?(a=-a,o.s=-1):o.s=1,a===~~a&&a<1e7){for(s=0,u=a;u>=10;u/=10)s++;at?s>i.maxE?(o.e=NaN,o.d=null):s<i.minE?(o.e=0,o.d=[0]):(o.e=s,o.d=[a]):(o.e=s,o.d=[a]);return}if(a*0!==0){a||(o.s=NaN),o.e=NaN,o.d=null;return}return Un(o,a.toString())}if(h==="string")return(u=a.charCodeAt(0))===45?(a=a.slice(1),o.s=-1):(u===43&&(a=a.slice(1)),o.s=1),No.test(a)?Un(o,a):pg(o,a);if(h==="bigint")return a<0?(a=-a,o.s=-1):o.s=1,Un(o,a.toString());throw Error(Qe+a)}if(i.prototype=q,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Sg,i.clone=Po,i.isDecimal=Vs,i.abs=Dg,i.acos=_g,i.acosh=Mg,i.add=wg,i.asin=Ag,i.asinh=Eg,i.atan=bg,i.atanh=Cg,i.atan2=Fg,i.cbrt=xg,i.ceil=Ng,i.clamp=Bg,i.cos=Tg,i.cosh=Ig,i.div=Og,i.exp=Pg,i.floor=Rg,i.hypot=qg,i.ln=$g,i.log=kg,i.log10=Lg,i.log2=zg,i.max=Ug,i.min=jg,i.mod=Vg,i.mul=Gg,i.pow=Wg,i.random=Zg,i.round=Hg,i.sign=Jg,i.sin=Qg,i.sinh=Xg,i.sqrt=Yg,i.sub=Kg,i.sum=tm,i.tan=em,i.tanh=rm,i.trunc=nm,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function Og(t,e){return new this(t).div(e)}function Pg(t){return new this(t).exp()}function Rg(t){return K(t=new this(t),t.e+1,3)}function qg(){var t,e,r=new this(0);for(at=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return at=!0,new this(1/0);r=e}return at=!0,r.sqrt()}function Vs(t){return t instanceof Tr||t&&t.toStringTag===xo||!1}function $g(t){return new this(t).ln()}function kg(t,e){return new this(t).log(e)}function zg(t){return new this(t).log(2)}function Lg(t){return new this(t).log(10)}function Ug(){return To(this,arguments,-1)}function jg(){return To(this,arguments,1)}function Vg(t,e){return new this(t).mod(e)}function Gg(t,e){return new this(t).mul(e)}function Wg(t,e){return new this(t).pow(e)}function Zg(t){var e,r,n,i,a=0,s=new this(1),u=[];if(t===void 0?t=this.precision:me(t,1,Ye),n=Math.ceil(t/tt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:u[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(u.push(i%1e7),a+=4);a=n/4}else throw Error(Fo);else for(;a<n;)u[a++]=Math.random()*1e7|0;for(n=u[--a],t%=tt,n&&t&&(i=Zt(10,tt-t),u[a]=(n/i|0)*i);u[a]===0;a--)u.pop();if(a<0)r=0,u=[0];else{for(r=-1;u[0]===0;r-=tt)u.shift();for(n=1,i=u[0];i>=10;i/=10)n++;n<tt&&(r-=tt-n)}return s.e=r,s.d=u,s}function Hg(t){return K(t=new this(t),t.e+1,this.rounding)}function Jg(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Qg(t){return new this(t).sin()}function Xg(t){return new this(t).sinh()}function Yg(t){return new this(t).sqrt()}function Kg(t,e){return new this(t).sub(e)}function tm(){var t=0,e=arguments,r=new this(e[t]);for(at=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return at=!0,K(r,this.precision,this.rounding)}function em(t){return new this(t).tan()}function rm(t){return new this(t).tanh()}function nm(t){return K(t=new this(t),t.e+1,1)}q[Symbol.for("nodejs.util.inspect.custom")]=q.toString;q[Symbol.toStringTag]="Decimal";var Tr=q.constructor=Po(ia);ii=new Tr(ii);ai=new Tr(ai);var im="BigNumber",am=["?on","config"],sm=et(im,am,t=>{var{on:e,config:r}=t,n=Tr.clone({precision:r.precision,modulo:Tr.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const ne=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},_e=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},um=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},ki=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},vr=function(){throw SyntaxError("Invalid Param")};function zi(t,e){const r=Math.abs(t),n=Math.abs(e);return t===0?Math.log(n):e===0?Math.log(r):r<3e3&&n<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const om={re:0,im:0},rr=function(t,e){const r=om;if(t==null)r.re=r.im=0;else if(e!==void 0)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return B.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return B.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else t.length===2?(r.re=t[0],r.im=t[1]):vr();break;case"string":r.im=r.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;n===null&&vr();for(let s=0;s<n.length;s++){const u=n[s];u===" "||u==="	"||u==="\n"||(u==="+"?i++:u==="-"?a++:u==="i"||u==="I"?(i+a===0&&vr(),n[s+1]!==" "&&!isNaN(n[s+1])?(r.im+=parseFloat((a%2?"-":"")+n[s+1]),s++):r.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(u))&&vr(),n[s+1]==="i"||n[s+1]==="I"?(r.im+=parseFloat((a%2?"-":"")+u),s++):r.re+=parseFloat((a%2?"-":"")+u),i=a=0))}i+a>0&&vr();break;case"number":r.im=0,r.re=t;break;default:vr()}return isNaN(r.re)||isNaN(r.im),r};function B(t,e){if(!(this instanceof B))return new B(t,e);const r=rr(t,e);this.re=r.re,this.im=r.im}B.prototype={re:0,im:0,sign:function(){const t=ki(this.re,this.im);return new B(this.re/t,this.im/t)},add:function(t,e){const r=rr(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?B.NAN:B.INFINITY:new B(this.re+r.re,this.im+r.im)},sub:function(t,e){const r=rr(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?B.NAN:B.INFINITY:new B(this.re-r.re,this.im-r.im)},mul:function(t,e){const r=rr(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),a=this.re===0&&this.im===0,s=r.re===0&&r.im===0;return n&&s||i&&a?B.NAN:n||i?B.INFINITY:r.im===0&&this.im===0?new B(this.re*r.re,0):new B(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){const r=rr(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),a=this.re===0&&this.im===0,s=r.re===0&&r.im===0;if(a&&s||n&&i)return B.NAN;if(s||n)return B.INFINITY;if(a||i)return B.ZERO;if(r.im===0)return new B(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const u=r.re/r.im,h=r.re*u+r.im;return new B((this.re*u+this.im)/h,(this.im*u-this.re)/h)}else{const u=r.im/r.re,h=r.im*u+r.re;return new B((this.re+this.im*u)/h,(this.im-this.re*u)/h)}},pow:function(t,e){const r=rr(t,e),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return B.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new B(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new B(Math.pow(this.im,r.re),0);case 1:return new B(0,Math.pow(this.im,r.re));case 2:return new B(-Math.pow(this.im,r.re),0);case 3:return new B(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return B.ZERO;const a=Math.atan2(this.im,this.re),s=zi(this.re,this.im);let u=Math.exp(r.re*s-r.im*a),h=r.im*s+r.re*a;return new B(u*Math.cos(h),u*Math.sin(h))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new B(Math.sqrt(t),0):new B(0,Math.sqrt(-t));const r=ki(t,e);let n=Math.sqrt(.5*(r+Math.abs(t))),i=Math.abs(e)/(2*n);return t>=0?new B(n,e<0?-i:i):new B(i,e<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new B(t,0):new B(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new B(Math.expm1(t)*Math.cos(e)+um(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new B(Math.log(t),0):new B(zi(t,e),Math.atan2(e,t))},abs:function(){return ki(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new B(Math.sin(t)*ne(e),Math.cos(t)*_e(e))},cos:function(){const t=this.re,e=this.im;return new B(Math.cos(t)*ne(e),-Math.sin(t)*_e(e))},tan:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)+ne(e);return new B(Math.sin(t)/r,_e(e)/r)},cot:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)-ne(e);return new B(-Math.sin(t)/r,_e(e)/r)},sec:function(){const t=this.re,e=this.im,r=.5*ne(2*e)+.5*Math.cos(2*t);return new B(Math.cos(t)*ne(e)/r,Math.sin(t)*_e(e)/r)},csc:function(){const t=this.re,e=this.im,r=.5*ne(2*e)-.5*Math.cos(2*t);return new B(Math.sin(t)*ne(e)/r,-Math.cos(t)*_e(e)/r)},asin:function(){const t=this.re,e=this.im,r=new B(e*e-t*t+1,-2*t*e).sqrt(),n=new B(r.re-e,r.im+t).log();return new B(n.im,-n.re)},acos:function(){const t=this.re,e=this.im,r=new B(e*e-t*t+1,-2*t*e).sqrt(),n=new B(r.re-e,r.im+t).log();return new B(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new B(0,1/0);if(e===-1)return new B(0,-1/0)}const r=t*t+(1-e)*(1-e),n=new B((1-e*e-t*t)/r,-2*t/r).log();return new B(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new B(Math.atan2(1,t),0);const r=t*t+e*e;return r!==0?new B(t/r,-e/r).atan():new B(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(0,1/0);const r=t*t+e*e;return r!==0?new B(t/r,-e/r).acos():new B(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(Math.PI/2,1/0);const r=t*t+e*e;return r!==0?new B(t/r,-e/r).asin():new B(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new B(_e(t)*Math.cos(e),ne(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new B(ne(t)*Math.cos(e),_e(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,r=ne(t)+Math.cos(e);return new B(_e(t)/r,Math.sin(e)/r)},coth:function(){const t=2*this.re,e=2*this.im,r=ne(t)-Math.cos(e);return new B(_e(t)/r,-Math.sin(e)/r)},csch:function(){const t=this.re,e=this.im,r=Math.cos(2*e)-ne(2*t);return new B(-2*_e(t)*Math.cos(e)/r,2*ne(t)*Math.sin(e)/r)},sech:function(){const t=this.re,e=this.im,r=Math.cos(2*e)+ne(2*t);return new B(2*ne(t)*Math.cos(e)/r,-2*_e(t)*Math.sin(e)/r)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,r=t>1&&e===0,n=1-t,i=1+t,a=n*n+e*e,s=a!==0?new B((i*n-e*e)/a,(e*n+i*e)/a):new B(t!==-1?t/0:0,e!==0?e/0:0),u=s.re;return s.re=zi(s.re,s.im)/2,s.im=Math.atan2(s.im,u)/2,r&&(s.im=-s.im),s},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(0,Math.PI/2);const r=t*t+e*e;return r!==0?new B(t/r,-e/r).atanh():new B(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new B(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const r=t*t+e*e;return r!==0?new B(t/r,-e/r).asinh():new B(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return B.INFINITY;const r=t*t+e*e;return r!==0?new B(t/r,-e/r).acosh():new B(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return B.INFINITY;if(this.isInfinite())return B.ZERO;const t=this.re,e=this.im,r=t*t+e*e;return new B(t/r,-e/r)},conjugate:function(){return new B(this.re,-this.im)},neg:function(){return new B(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new B(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new B(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new B(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const r=rr(t,e);return Math.abs(r.re-this.re)<=B.EPSILON&&Math.abs(r.im-this.im)<=B.EPSILON},clone:function(){return new B(this.re,this.im)},toString:function(){let t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<B.EPSILON&&(t=0),Math.abs(e)<B.EPSILON&&(e=0),e===0?r+t:(t!==0?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),e!==1&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};B.ZERO=new B(0,0);B.ONE=new B(1,0);B.I=new B(0,1);B.PI=new B(Math.PI,0);B.E=new B(Math.E,0);B.INFINITY=new B(1/0,1/0);B.NAN=new B(NaN,NaN);B.EPSILON=1e-15;var hm="Complex",fm=[],lm=et(hm,fm,()=>(Object.defineProperty(B,"name",{value:"Complex"}),B.prototype.constructor=B,B.prototype.type="Complex",B.prototype.isComplex=!0,B.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},B.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},B.prototype.format=function(t){var e="",r=this.im,n=this.re,i=ea(this.re,t),a=ea(this.im,t),s=Ft(t)?t:t?t.precision:null;if(s!==null){var u=Math.pow(10,-s);Math.abs(n/r)<u&&(n=0),Math.abs(r/n)<u&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},B.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return B(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(Ft(r)){if(Do(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Ft(n))return new B({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},B.prototype.valueOf=B.prototype.toString,B.fromJSON=function(t){return new B(t)},B.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},B),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Y=BigInt(0),ut=BigInt(1),en=BigInt(2),ua=BigInt(5),de=BigInt(10),cm=2e3,L={s:ut,n:Y,d:ut};function Re(t,e){try{t=BigInt(t)}catch(r){throw Ue()}return t*e}function be(t){return typeof t=="bigint"?t:Math.floor(t)}function Bt(t,e){if(e===Y)throw Oa();const r=Object.create(we.prototype);r.s=t<Y?-ut:ut,t=t<Y?-t:t;const n=ir(t,e);return r.n=t/n,r.d=e/n,r}function gr(t){const e={};let r=t,n=en,i=ua-ut;for(;i<=r;){for(;r%n===Y;)r/=n,e[n]=(e[n]||Y)+ut;i+=ut+en*n++}return r!==t?r>1&&(e[r]=(e[r]||Y)+ut):e[t]=(e[t]||Y)+ut,e}const Qt=function(t,e){let r=Y,n=ut,i=ut;if(t!=null)if(e!==void 0){if(typeof t=="bigint")r=t;else{if(isNaN(t))throw Ue();if(t%1!==0)throw Gs();r=BigInt(t)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Ue();if(e%1!==0)throw Gs();n=BigInt(e)}i=r*n}else if(typeof t=="object"){if("d"in t&&"n"in t)r=BigInt(t.n),n=BigInt(t.d),"s"in t&&(r*=BigInt(t.s));else if(0 in t)r=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")r=t;else throw Ue();i=r*n}else if(typeof t=="number"){if(isNaN(t))throw Ue();if(t<0&&(i=-ut,t=-t),t%1===0)r=BigInt(t);else{let a=1,s=0,u=1,h=1,o=1,f=1e7;for(t>=1&&(a=10**Math.floor(1+Math.log10(t)),t/=a);u<=f&&o<=f;){let l=(s+h)/(u+o);if(t===l){u+o<=f?(r=s+h,n=u+o):o>u?(r=h,n=o):(r=s,n=u);break}else t>l?(s+=h,u+=o):(h+=s,o+=u),u>f?(r=h,n=o):(r=s,n=u)}r=BigInt(r)*BigInt(a),n=BigInt(n)}}else if(typeof t=="string"){let a=0,s=Y,u=Y,h=Y,o=ut,f=ut,l=t.replace(/_/g,"").match(/\d+|./g);if(l===null)throw Ue();if(l[a]==="-"?(i=-ut,a++):l[a]==="+"&&a++,l.length===a+1?u=Re(l[a++],i):l[a+1]==="."||l[a]==="."?(l[a]!=="."&&(s=Re(l[a++],i)),a++,(a+1===l.length||l[a+1]==="("&&l[a+3]===")"||l[a+1]==="'"&&l[a+3]==="'")&&(u=Re(l[a],i),o=de**BigInt(l[a].length),a++),(l[a]==="("&&l[a+2]===")"||l[a]==="'"&&l[a+2]==="'")&&(h=Re(l[a+1],i),f=de**BigInt(l[a+1].length)-ut,a+=3)):l[a+1]==="/"||l[a+1]===":"?(u=Re(l[a],i),o=Re(l[a+2],ut),a+=3):l[a+3]==="/"&&l[a+1]===" "&&(s=Re(l[a],i),u=Re(l[a+2],i),o=Re(l[a+4],ut),a+=5),l.length<=a)n=o*f,i=r=h+n*s+f*u;else throw Ue()}else if(typeof t=="bigint")r=t,i=t,n=ut;else throw Ue();if(n===Y)throw Oa();L.s=i<Y?-ut:ut,L.n=r<Y?-r:r,L.d=n<Y?-n:n};function dm(t,e,r){let n=ut;for(;e>Y;t=t*t%r,e>>=ut)e&ut&&(n=n*t%r);return n}function vm(t,e){for(;e%en===Y;e/=en);for(;e%ua===Y;e/=ua);if(e===ut)return Y;let r=de%e,n=1;for(;r!==ut;n++)if(r=r*de%e,n>cm)return Y;return BigInt(n)}function gm(t,e,r){let n=ut,i=dm(de,r,e);for(let a=0;a<300;a++){if(n===i)return BigInt(a);n=n*de%e,i=i*de%e}return 0}function ir(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function we(t,e){if(Qt(t,e),this instanceof we)t=ir(L.d,L.n),this.s=L.s,this.n=L.n/t,this.d=L.d/t;else return Bt(L.s*L.n,L.d)}var Oa=function(){return new Error("Division by Zero")},Ue=function(){return new Error("Invalid argument")},Gs=function(){return new Error("Parameters must be integer")};we.prototype={s:ut,n:Y,d:ut,abs:function(){return Bt(this.n,this.d)},neg:function(){return Bt(-this.s*this.n,this.d)},add:function(t,e){return Qt(t,e),Bt(this.s*this.n*L.d+L.s*this.d*L.n,this.d*L.d)},sub:function(t,e){return Qt(t,e),Bt(this.s*this.n*L.d-L.s*this.d*L.n,this.d*L.d)},mul:function(t,e){return Qt(t,e),Bt(this.s*L.s*this.n*L.n,this.d*L.d)},div:function(t,e){return Qt(t,e),Bt(this.s*L.s*this.n*L.d,this.d*L.n)},clone:function(){return Bt(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return Bt(this.s*this.n%this.d,ut);if(Qt(t,e),Y===L.n*this.d)throw Oa();return Bt(this.s*(L.d*this.n)%(L.n*this.d),L.d*this.d)},gcd:function(t,e){return Qt(t,e),Bt(ir(L.n,this.n)*ir(L.d,this.d),L.d*this.d)},lcm:function(t,e){return Qt(t,e),L.n===Y&&this.n===Y?Bt(Y,ut):Bt(L.n*this.n,ir(L.n,this.n)*ir(L.d,this.d))},inverse:function(){return Bt(this.s*this.d,this.n)},pow:function(t,e){if(Qt(t,e),L.d===ut)return L.s<Y?Bt((this.s*this.d)**L.n,this.n**L.n):Bt((this.s*this.n)**L.n,this.d**L.n);if(this.s<Y)return null;let r=gr(this.n),n=gr(this.d),i=ut,a=ut;for(let s in r)if(s!=="1"){if(s==="0"){i=Y;break}if(r[s]*=L.n,r[s]%L.d===Y)r[s]/=L.d;else return null;i*=BigInt(s)**r[s]}for(let s in n)if(s!=="1"){if(n[s]*=L.n,n[s]%L.d===Y)n[s]/=L.d;else return null;a*=BigInt(s)**n[s]}return L.s<Y?Bt(a,i):Bt(i,a)},log:function(t,e){if(Qt(t,e),this.s<=Y||L.s<=Y)return null;const r={},n=gr(L.n),i=gr(L.d),a=gr(this.n),s=gr(this.d);for(const o in i)n[o]=(n[o]||Y)-i[o];for(const o in s)a[o]=(a[o]||Y)-s[o];for(const o in n)o!=="1"&&(r[o]=!0);for(const o in a)o!=="1"&&(r[o]=!0);let u=null,h=null;for(const o in r){const f=n[o]||Y,l=a[o]||Y;if(f===Y){if(l!==Y)return null;continue}let c=l,v=f;const g=ir(c,v);if(c/=g,v/=g,u===null&&h===null)u=c,h=v;else if(c*h!==u*v)return null}return u!==null&&h!==null?Bt(u,h):null},equals:function(t,e){return Qt(t,e),this.s*this.n*L.d===L.s*L.n*this.d},lt:function(t,e){return Qt(t,e),this.s*this.n*L.d<L.s*L.n*this.d},lte:function(t,e){return Qt(t,e),this.s*this.n*L.d<=L.s*L.n*this.d},gt:function(t,e){return Qt(t,e),this.s*this.n*L.d>L.s*L.n*this.d},gte:function(t,e){return Qt(t,e),this.s*this.n*L.d>=L.s*L.n*this.d},compare:function(t,e){Qt(t,e);let r=this.s*this.n*L.d-L.s*L.n*this.d;return(Y<r)-(r<Y)},ceil:function(t){return t=de**BigInt(t||0),Bt(be(this.s*t*this.n/this.d)+(t*this.n%this.d>Y&&this.s>=Y?ut:Y),t)},floor:function(t){return t=de**BigInt(t||0),Bt(be(this.s*t*this.n/this.d)-(t*this.n%this.d>Y&&this.s<Y?ut:Y),t)},round:function(t){return t=de**BigInt(t||0),Bt(be(this.s*t*this.n/this.d)+this.s*((this.s>=Y?ut:Y)+en*(t*this.n%this.d)>this.d?ut:Y),t)},roundTo:function(t,e){Qt(t,e);const r=this.n*L.d,n=this.d*L.n,i=r%n;let a=be(r/n);return i+i>=n&&a++,Bt(this.s*a*L.n,L.d)},divisible:function(t,e){return Qt(t,e),!(!(L.n*this.d)||this.n*L.d%(L.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,r=this.d;t=t||15;let n=vm(e,r),i=gm(e,r,n),a=this.s<Y?"-":"";if(a+=be(e/r),e%=r,e*=de,e&&(a+="."),n){for(let s=i;s--;)a+=be(e/r),e%=r,e*=de;a+="(";for(let s=n;s--;)a+=be(e/r),e%=r,e*=de;a+=")"}else for(let s=t;e&&s--;)a+=be(e/r),e%=r,e*=de;return a},toFraction:function(t){let e=this.n,r=this.d,n=this.s<Y?"-":"";if(r===ut)n+=e;else{let i=be(e/r);t&&i>Y&&(n+=i,n+=" ",e%=r),n+=e,n+="/",n+=r}return n},toLatex:function(t){let e=this.n,r=this.d,n=this.s<Y?"-":"";if(r===ut)n+=e;else{let i=be(e/r);t&&i>Y&&(n+=i,e%=r),n+="\\frac{",n+=e,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let t=this.n,e=this.d,r=[];do{r.push(be(t/e));let n=t%e;t=e,e=n}while(t!==ut);return r},simplify:function(t){const e=BigInt(1/(t||.001)|0),r=this.abs(),n=r.toContinued();for(let i=1;i<n.length;i++){let a=Bt(n[i-1],ut);for(let u=i-2;u>=0;u--)a=a.inverse().add(n[u]);let s=a.sub(r);if(s.n*e<s.d)return a.mul(this.s)}return this}};var mm="Fraction",pm=[],ym=et(mm,pm,()=>(Object.defineProperty(we,"name",{value:"Fraction"}),we.prototype.constructor=we,we.prototype.type="Fraction",we.prototype.isFraction=!0,we.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},we.fromJSON=function(t){return new we(t)},we),{isClass:!0}),Dm="Matrix",_m=[],Mm=et(Dm,_m,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Li(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ot(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function wm(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=wo(e);switch(r){case"fixed":return Em(t,n);case"exponential":return Ws(t,n);case"engineering":return Am(t,n);case"bin":return Li(t,2,i);case"oct":return Li(t,8,i);case"hex":return Li(t,16,i);case"auto":{var a=Zs(e==null?void 0:e.lowerExp,-3),s=Zs(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var u,h=t.toSignificantDigits(n),o=h.e;return o>=a&&o<s?u=h.toFixed():u=Ws(t,n),u.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],l=arguments[4];return f!=="."?f+l:l})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Am(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);if(a.includes("e")){var s=t.constructor;a=new s(a).toFixed()}return a+"e"+(r>=0?"+":"")+n.toString()}function Ws(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Em(t,e){return t.toFixed(e)}function Zs(t,e){return Ft(t)?t:Pt(t)?t.toNumber():e}function $t(t,e){var r=bm(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function bm(t,e){if(typeof t=="number")return ea(t,e);if(Pt(t))return wm(t,e);if(Cm(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return Ro(t,e);if(Ne(t))return Hs(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>Hs(n)+": "+$t(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Hs(t){for(var e=String(t),r="",n=0;n<e.length;){var i=e.charAt(n);r+=i in Js?Js[i]:i,n++}return'"'+r+'"'}var Js={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Ro(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Ro(t[i],e);return r+="]",r}else return $t(t,e)}function Cm(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function wt(t,e,r){if(!(this instanceof wt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}wt.prototype=new RangeError;wt.prototype.constructor=RangeError;wt.prototype.name="DimensionError";wt.prototype.isDimensionError=!0;function Ke(t,e,r){if(!(this instanceof Ke))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ke.prototype=new RangeError;Ke.prototype.constructor=RangeError;Ke.prototype.name="IndexError";Ke.prototype.isIndexError=!0;function At(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function qo(t,e,r){var n,i=t.length;if(i!==e[r])throw new wt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var s=t[n];if(!Array.isArray(s))throw new wt(e.length-1,e.length,"<");qo(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new wt(e.length+1,e.length,">")}function Qs(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new wt(t.length,0)}else qo(t,e,0)}function qt(t,e){if(t!==void 0){if(!Ft(t)||!Ot(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Ke(t,e)}}function rn(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Ft(i)||!Ot(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+$t(e)+")")}),(Ft(t)||Pt(t))&&(t=[t]);var n=r!==void 0?r:0;return oa(t,e,0,n),t}function oa(t,e,r,n){var i,a,s=t.length,u=e[r],h=Math.min(s,u);if(t.length=u,r<e.length-1){var o=r+1;for(i=0;i<h;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),oa(a,e,o,n);for(i=h;i<u;i++)a=[],t[i]=a,oa(a,e,o,n)}else{for(i=0;i<h;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=h;i<u;i++)t[i]=n}}function Pa(t,e){var r=ha(t,!0),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new wt(0,n,"!=");e=Ra(e,n);var i=$o(e);if(n!==i)throw new wt(i,n,"!=");try{return Fm(r,e)}catch(a){throw a instanceof wt?new wt(i,n,"!="):a}}function Ra(t,e){var r=$o(t),n=t.slice(),i=-1,a=t.indexOf(i),s=t.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var u=a>=0,h=e%r===0;if(u)if(h)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function $o(t){return t.reduce((e,r)=>e*r,1)}function Fm(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var s=r.length/a,u=0;u<s;u++)n.push(r.slice(u*a,(u+1)*a));r=n}return r}function ko(t,e,r,n){var i=n||At(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=zo(t,e,0);i.length<e;)i.push(1);return t}function zo(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=zo(t[n],e,a)}else for(var s=r;s<e;s++)t=[t];return t}function ha(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return e?i(t):n(t),r;function n(a){for(var s=0;s<a.length;s++){var u=a[s];Array.isArray(u)?n(u):r.push(u)}}function i(a){if(Array.isArray(a[0]))for(var s=0;s<a.length;s++)i(a[s]);else for(var u=0;u<a.length;u++)r.push(a[u])}}function qa(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],s=Array.isArray(a);if(i===0&&s&&(n=a.length),s&&a.length!==n)return;var u=s?qa(a,e):e(a);if(r===void 0)r=u;else if(r!==u)return"mixed"}return r}function Lo(t,e,r,n){if(n<r){if(t.length!==e.length)throw new wt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=Lo(t[a],e[a],r,n+1);return i}else return t.concat(e)}function Uo(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(r,n){return Lo(r,n,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function jo(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map(c=>c.length),i=Math.max(...n),a=new Array(i).fill(null),s=0;s<e.length;s++)for(var u=e[s],h=n[s],o=0;o<h;o++){var f=i-h+o;u[o]>a[f]&&(a[f]=u[o])}for(var l=0;l<e.length;l++)Vo(e[l],a);return a}function Vo(t,e){for(var r=e.length,n=t.length,i=0;i<n;i++){var a=r-n+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[i]," to size ").concat(e[a]))}}function fa(t,e){var r=At(t);if(Je(r,e))return t;Vo(r,e);var n=jo(r,e),i=n.length,a=[...Array(i-r.length).fill(1),...r],s=Bm(t);r.length<i&&(s=Pa(s,a),r=At(s));for(var u=0;u<i;u++)r[u]<n[u]&&(s=xm(s,n[u],u),r=At(s));return s}function xm(t,e,r){return Uo(...Array(e).fill(t),r)}function Go(t,e){if(!Array.isArray(t))throw new Error("Array expected");var r=At(t);if(e.length!==r.length)throw new wt(e.length,r.length);for(var n=0;n<e.length;n++)qt(e[n],r[n]);return e.reduce((i,a)=>i[a],t)}function Xs(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(r)return a(t);var n=[];return i(t,0);function i(s,u){if(Array.isArray(s)){for(var h=s.length,o=Array(h),f=0;f<h;f++)n[u]=f,o[f]=i(s[f],u+1);return o}else return e(s,n.slice(0,u),t)}function a(s){if(Array.isArray(s)){for(var u=s.length,h=Array(u),o=0;o<u;o++)h[o]=a(s[o]);return h}else return e(s)}}function Nm(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(r){a(t);return}var n=[];i(t,0);function i(s,u){if(Array.isArray(s))for(var h=s.length,o=0;o<h;o++)n[u]=o,i(s[o],u+1);else e(s,n.slice(0,u),t)}function a(s){if(Array.isArray(s))for(var u=s.length,h=0;h<u;h++)a(s[h]);else e(s)}}function Bm(t){return ti([],t)}function ui(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ri.isTypedFunction(t)){var i;if(n)i=1;else{var a=(e.isMatrix?e.size():At(e)).map(()=>0),s=e.isMatrix?e.get(a):Go(e,a);i=Im(t,s,a,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var h=Sm(t,i);u=h!==void 0?h:t}else u=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var f=arguments.length,l=new Array(f),c=0;c<f;c++)l[c]=arguments[c];return Ys(u,l.slice(0,i),r,t.name)}}:{isUnary:!1,fn:function(){for(var f=arguments.length,l=new Array(f),c=0;c<f;c++)l[c]=arguments[c];return Ys(u,l,r,t.name)}}}return n===void 0?{isUnary:Tm(t),fn:t}:{isUnary:n,fn:t}}function Sm(t,e){var r=[];if(Object.entries(t.signatures).forEach(n=>{var[i,a]=n;i.split(",").length===e&&r.push(a)}),r.length===1)return r[0]}function Tm(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var r=e.match(/\(.*?\)/);return!/\.\.\./.test(r)}function Im(t,e,r,n){for(var i=[e,r,n],a=3;a>0;a--){var s=i.slice(0,a);if(ri.resolve(t,s)!==null)return a}}function Ys(t,e,r,n){try{return t(...e)}catch(i){Om(i,e,r,n)}}function Om(t,e,r,n){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var a=[];throw a.push("value: ".concat(Ie(e[0]))),e.length>=2&&a.push("index: ".concat(Ie(e[1]))),e.length>=3&&a.push("array: ".concat(Ie(e[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var Pm="DenseMatrix",Rm=["Matrix"],qm=et(Pm,Rm,t=>{var{Matrix:e}=t;function r(f,l){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(l&&!Ne(l))throw new Error("Invalid datatype: "+l);if(Nt(f))f.type==="DenseMatrix"?(this._data=xt(f._data),this._size=xt(f._size),this._datatype=l||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=l||f._datatype);else if(f&&Wt(f.data)&&Wt(f.size))this._data=f.data,this._size=f.size,Qs(this._data,this._size),this._datatype=l||f.datatype;else if(Wt(f))this._data=o(f),this._size=At(this._data),Qs(this._data,this._size),this._datatype=l;else{if(f)throw new TypeError("Unsupported type of data ("+Ie(f)+")");this._data=[],this._size=[0],this._datatype=l}}r.prototype=new e,r.prototype.createDenseMatrix=function(f,l){return new r(f,l)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return qa(this._data,Ie)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,l){return new r(f,l)},r.prototype.subset=function(f,l,c){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return a(this,f,l,c);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){return Go(this._data,f)},r.prototype.set=function(f,l,c){if(!Wt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new wt(f.length,this._size.length,"<");var v,g,d,m=f.map(function(M){return M+1});h(this,m,c);var p=this._data;for(v=0,g=f.length-1;v<g;v++)d=f[v],qt(d,p.length),p=p[d];return d=f[f.length-1],qt(d,p.length),p[d]=l,this};function n(f,l){if(!Sa(l))throw new TypeError("Invalid index");var c=l.isScalar();if(c)return f.get(l.min());var v=l.size();if(v.length!==f._size.length)throw new wt(v.length,f._size.length);for(var g=l.min(),d=l.max(),m=0,p=f._size.length;m<p;m++)qt(g[m],f._size[m]),qt(d[m],f._size[m]);return new r(i(f._data,l,v.length,0),f._datatype)}function i(f,l,c,v){var g=v===c-1,d=l.dimension(v);return g?d.map(function(m){return qt(m,f.length),f[m]}).valueOf():d.map(function(m){qt(m,f.length);var p=f[m];return i(p,l,c,v+1)}).valueOf()}function a(f,l,c,v){if(!l||l.isIndex!==!0)throw new TypeError("Invalid index");var g=l.size(),d=l.isScalar(),m;if(Nt(c)?(m=c.size(),c=c.valueOf()):m=At(c),d){if(m.length!==0)throw new TypeError("Scalar expected");f.set(l.min(),c,v)}else{if(!Je(m,g))try{m.length===0?c=fa([c],g):c=fa(c,g),m=At(c)}catch(_){}if(g.length<f._size.length)throw new wt(g.length,f._size.length,"<");if(m.length<g.length){for(var p=0,M=0;g[p]===1&&m[p]===1;)p++;for(;g[p]===1;)M++,p++;c=ko(c,g.length,M,m)}if(!Je(g,m))throw new wt(g,m,">");var D=l.max().map(function(_){return _+1});h(f,D,v);var A=g.length,y=0;s(f._data,l,c,A,y)}return f}function s(f,l,c,v,g){var d=g===v-1,m=l.dimension(g);d?m.forEach(function(p,M){qt(p),f[p]=c[M[0]]}):m.forEach(function(p,M){qt(p),s(f[p],l,c[M[0]],v,g+1)})}r.prototype.resize=function(f,l,c){if(!Yr(f))throw new TypeError("Array or Matrix expected");var v=f.valueOf().map(d=>Array.isArray(d)&&d.length===1?d[0]:d),g=c?this.clone():this;return u(g,v,l)};function u(f,l,c){if(l.length===0){for(var v=f._data;Wt(v);)v=v[0];return v}return f._size=l.slice(0),f._data=rn(f._data,f._size,c),f}r.prototype.reshape=function(f,l){var c=l?this.clone():this;c._data=Pa(c._data,f);var v=c._size.reduce((g,d)=>g*d);return c._size=Ra(f,v),c};function h(f,l,c){for(var v=f._size.slice(0),g=!1;v.length<l.length;)v.push(0),g=!0;for(var d=0,m=l.length;d<m;d++)l[d]>v[d]&&(v[d]=l[d],g=!0);g&&u(f,v,c)}r.prototype.clone=function(){var f=new r({data:xt(this._data),size:xt(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype._forEach=function(f){var l=f.length===2,c=this._size.length-1;if(c<0)return;if(l){m(this._data);return}if(c===0){for(var v=0;v<this._data.length;v++)f(this._data,v,[v]);return}var g=new Array(c+1);d(this._data);function d(p){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(M<c)for(var D=0;D<p.length;D++)g[M]=D,d(p[D],M+1);else for(var A=0;A<p.length;A++)g[M]=A,f(p,A,g.slice())}function m(p){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(M<c)for(var D=0;D<p.length;D++)m(p[D],M+1);else for(var A=0;A<p.length;A++)f(p,A)}},r.prototype.map=function(f){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=this,v=new r(c),g=ui(f,c._data,"map",l),d=l||g.isUnary?(m,p)=>{m[p]=g.fn(m[p])}:(m,p,M)=>{m[p]=g.fn(m[p],M,c)};return v._forEach(d),v},r.prototype.forEach=function(f){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=this,v=ui(f,c._data,"map",l),g=l||v.isUnary?(d,m)=>{v.fn(d[m])}:(d,m,p)=>{v.fn(d[m],p,c)};c._forEach(g)},r.prototype[Symbol.iterator]=function*(){var f=this._size.length-1;if(!(f<0)){if(f===0){for(var l=0;l<this._data.length;l++)yield{value:this._data[l],index:[l]};return}var c=[],v=function*(d,m){if(m<f)for(var p=0;p<d.length;p++)c[m]=p,yield*v(d[p],m+1);else for(var M=0;M<d.length;M++)c[m]=M,yield{value:d[M],index:c.slice()}};yield*v(this._data,0)}},r.prototype.rows=function(){var f=[],l=this.size();if(l.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var c=this._data;for(var v of c)f.push(new r([v],this._datatype));return f},r.prototype.columns=function(){var f=this,l=[],c=this.size();if(c.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var v=this._data,g=function(p){var M=v.map(D=>[D[p]]);l.push(new r(M,f._datatype))},d=0;d<c[1];d++)g(d);return l},r.prototype.toArray=function(){return xt(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return $t(this._data,f)},r.prototype.toString=function(){return $t(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(Pt(f)&&(f=f.toNumber()),!Ft(f)||!Ot(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var l=f>0?f:0,c=f<0?-f:0,v=this._size[0],g=this._size[1],d=Math.min(v-c,g-l),m=[],p=0;p<d;p++)m[p]=this._data[p+c][p+l];return new r({data:m,size:[d],datatype:this._datatype})},r.diagonal=function(f,l,c,v){if(!Wt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(C){if(Pt(C)&&(C=C.toNumber()),!Ft(C)||!Ot(C)||C<1)throw new Error("Size values must be positive integers");return C}),c){if(Pt(c)&&(c=c.toNumber()),!Ft(c)||!Ot(c))throw new TypeError("The parameter k must be an integer number")}else c=0;var g=c>0?c:0,d=c<0?-c:0,m=f[0],p=f[1],M=Math.min(m-d,p-g),D;if(Wt(l)){if(l.length!==M)throw new Error("Invalid value array length");D=function(b){return l[b]}}else if(Nt(l)){var A=l.size();if(A.length!==1||A[0]!==M)throw new Error("Invalid matrix length");D=function(b){return l.get([b])}}else D=function(){return l};v||(v=Pt(D(0))?D(0).mul(0):0);var y=[];if(f.length>0){y=rn(y,f,v);for(var _=0;_<M;_++)y[_+d][_+g]=D(_)}return new r({data:y,size:[m,p]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,l){if(!Ft(f)||!Ot(f)||!Ft(l)||!Ot(l))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return qt(f,this._size[0]),qt(l,this._size[0]),r._swapRows(f,l,this._data),this},r._swapRows=function(f,l,c){var v=c[f];c[f]=c[l],c[l]=v};function o(f){return Nt(f)?o(f.valueOf()):Wt(f)?f.map(o):f}return r},{isClass:!0});function $m(t){var e=t.length,r=t[0].length,n,i,a=[];for(i=0;i<r;i++){var s=[];for(n=0;n<e;n++)s.push(t[n][i]);a.push(s)}return a}function km(t){for(var e=0;e<t.length;e++)if(Yr(t[e]))return!0;return!1}function zm(t,e){Nt(t)?t.forEach(r=>e(r),!1,!0):Nm(t,e,!0)}function tr(t,e,r){if(!r)return Nt(t)?t.map(i=>e(i),!1,!0):Xs(t,e,!0);var n=i=>i===0?i:e(i);return Nt(t)?t.map(i=>n(i),!1,!0):Xs(t,n,!0)}function Lm(t,e,r){var n=Array.isArray(t)?At(t):t.size();if(e<0||e>=n.length)throw new Ke(e,n.length);return Nt(t)?t.create(oi(t.valueOf(),e,r),t.datatype()):oi(t,e,r)}function oi(t,e,r){var n,i,a,s;if(e<=0)if(Array.isArray(t[0])){for(s=$m(t),i=[],n=0;n<s.length;n++)i[n]=oi(s[n],e-1,r);return i}else{for(a=t[0],n=1;n<t.length;n++)a=r(a,t[n]);return a}else{for(i=[],n=0;n<t.length;n++)i[n]=oi(t[n],e-1,r);return i}}var Ks="isInteger",Um=["typed"],jm=et(Ks,Um,t=>{var{typed:e}=t;return e(Ks,{number:Ot,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===BigInt(1)},"Array | Matrix":e.referToSelf(r=>n=>tr(n,r))})}),Wo="number",$a="number, number";function Zo(t){return Math.abs(t)}Zo.signature=Wo;function Ho(t,e){return t+e}Ho.signature=$a;function Jo(t,e){return t-e}Jo.signature=$a;function Qo(t,e){return t*e}Qo.signature=$a;function Xo(t){return-t}Xo.signature=Wo;function Vm(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(r),n))}var tu="isZero",Gm=["typed","equalScalar"],Wm=et(tu,Gm,t=>{var{typed:e,equalScalar:r}=t;return e(tu,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===BigInt(0),Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>tr(i,n))})});function Zm(t,e,r,n){return ni(t.re,e.re,r,n)&&ni(t.im,e.im,r,n)}var Hm=et("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),hi="equalScalar",Jm=["typed","config"],Qm=et(hi,Jm,t=>{var{typed:e,config:r}=t,n=Hm({typed:e});return e(hi,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return ni(a,s,r.relTol,r.absTol)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||Vm(a,s,r.relTol,r.absTol)},"bigint, bigint":function(a,s){return a===s},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return Zm(a,s,r.relTol,r.absTol)}},n)});et(hi,["typed","config"],t=>{var{typed:e,config:r}=t;return e(hi,{"number, number":function(i,a){return ni(i,a,r.relTol,r.absTol)}})});var Xm="SparseMatrix",Ym=["typed","equalScalar","Matrix"],Km=et(Xm,Ym,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(d,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Ne(m))throw new Error("Invalid datatype: "+m);if(Nt(d))a(this,d,m);else if(d&&Wt(d.index)&&Wt(d.ptr)&&Wt(d.size))this._values=d.values,this._index=d.index,this._ptr=d.ptr,this._size=d.size,this._datatype=m||d.datatype;else if(Wt(d))s(this,d,m);else{if(d)throw new TypeError("Unsupported type of data ("+Ie(d)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(d,m,p){m.type==="SparseMatrix"?(d._values=m._values?xt(m._values):void 0,d._index=xt(m._index),d._ptr=xt(m._ptr),d._size=xt(m._size),d._datatype=p||m._datatype):s(d,m.valueOf(),p||m._datatype)}function s(d,m,p){d._values=[],d._index=[],d._ptr=[],d._datatype=p;var M=m.length,D=0,A=r,y=0;if(Ne(p)&&(A=e.find(r,[p,p])||r,y=e.convert(0,p)),M>0){var _=0;do{d._ptr.push(d._index.length);for(var C=0;C<M;C++){var b=m[C];if(Wt(b)){if(_===0&&D<b.length&&(D=b.length),_<b.length){var E=b[_];A(E,y)||(d._values.push(E),d._index.push(C))}}else _===0&&D<1&&(D=1),A(b,y)||(d._values.push(b),d._index.push(C))}_++}while(_<D)}d._ptr.push(d._index.length),d._size=[M,D]}i.prototype=new n,i.prototype.createSparseMatrix=function(d,m){return new i(d,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return qa(this._values,Ie)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(d,m){return new i(d,m)},i.prototype.density=function(){var d=this._size[0],m=this._size[1];return d!==0&&m!==0?this._index.length/(d*m):0},i.prototype.subset=function(d,m,p){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,d);case 2:case 3:return h(this,d,m,p);default:throw new SyntaxError("Wrong number of arguments")}};function u(d,m){if(!Sa(m))throw new TypeError("Invalid index");var p=m.isScalar();if(p)return d.get(m.min());var M=m.size();if(M.length!==d._size.length)throw new wt(M.length,d._size.length);var D,A,y,_,C=m.min(),b=m.max();for(D=0,A=d._size.length;D<A;D++)qt(C[D],d._size[D]),qt(b[D],d._size[D]);var E=d._values,N=d._index,S=d._ptr,k=m.dimension(0),J=m.dimension(1),U=[],V=[];k.forEach(function(j,rt){V[j]=rt[0],U[j]=!0});var P=E?[]:void 0,X=[],Q=[];return J.forEach(function(j){for(Q.push(X.length),y=S[j],_=S[j+1];y<_;y++)D=N[y],U[D]===!0&&(X.push(V[D]),P&&P.push(E[y]))}),Q.push(X.length),new i({values:P,index:X,ptr:Q,size:M,datatype:d._datatype})}function h(d,m,p,M){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var D=m.size(),A=m.isScalar(),y;if(Nt(p)?(y=p.size(),p=p.toArray()):y=At(p),A){if(y.length!==0)throw new TypeError("Scalar expected");d.set(m.min(),p,M)}else{if(D.length!==1&&D.length!==2)throw new wt(D.length,d._size.length,"<");if(y.length<D.length){for(var _=0,C=0;D[_]===1&&y[_]===1;)_++;for(;D[_]===1;)C++,_++;p=ko(p,D.length,C,y)}if(!Je(D,y))throw new wt(D,y,">");if(D.length===1){var b=m.dimension(0);b.forEach(function(S,k){qt(S),d.set([S,0],p[k[0]],M)})}else{var E=m.dimension(0),N=m.dimension(1);E.forEach(function(S,k){qt(S),N.forEach(function(J,U){qt(J),d.set([S,J],p[k[0]][U[0]],M)})})}}return d}i.prototype.get=function(d){if(!Wt(d))throw new TypeError("Array expected");if(d.length!==this._size.length)throw new wt(d.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=d[0],p=d[1];qt(m,this._size[0]),qt(p,this._size[1]);var M=o(m,this._ptr[p],this._ptr[p+1],this._index);return M<this._ptr[p+1]&&this._index[M]===m?this._values[M]:0},i.prototype.set=function(d,m,p){if(!Wt(d))throw new TypeError("Array expected");if(d.length!==this._size.length)throw new wt(d.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var M=d[0],D=d[1],A=this._size[0],y=this._size[1],_=r,C=0;Ne(this._datatype)&&(_=e.find(r,[this._datatype,this._datatype])||r,C=e.convert(0,this._datatype)),(M>A-1||D>y-1)&&(c(this,Math.max(M+1,A),Math.max(D+1,y),p),A=this._size[0],y=this._size[1]),qt(M,A),qt(D,y);var b=o(M,this._ptr[D],this._ptr[D+1],this._index);return b<this._ptr[D+1]&&this._index[b]===M?_(m,C)?f(b,D,this._values,this._index,this._ptr):this._values[b]=m:_(m,C)||l(b,M,D,m,this._values,this._index,this._ptr),this};function o(d,m,p,M){if(p-m===0)return p;for(var D=m;D<p;D++)if(M[D]===d)return D;return m}function f(d,m,p,M,D){p.splice(d,1),M.splice(d,1);for(var A=m+1;A<D.length;A++)D[A]--}function l(d,m,p,M,D,A,y){D.splice(d,0,M),A.splice(d,0,m);for(var _=p+1;_<y.length;_++)y[_]++}i.prototype.resize=function(d,m,p){if(!Yr(d))throw new TypeError("Array or Matrix expected");var M=d.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(M.length!==2)throw new Error("Only two dimensions matrix are supported");M.forEach(function(A){if(!Ft(A)||!Ot(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+$t(M)+")")});var D=p?this.clone():this;return c(D,M[0],M[1],m)};function c(d,m,p,M){var D=M||0,A=r,y=0;Ne(d._datatype)&&(A=e.find(r,[d._datatype,d._datatype])||r,y=e.convert(0,d._datatype),D=e.convert(D,d._datatype));var _=!A(D,y),C=d._size[0],b=d._size[1],E,N,S;if(p>b){for(N=b;N<p;N++)if(d._ptr[N]=d._values.length,_)for(E=0;E<C;E++)d._values.push(D),d._index.push(E);d._ptr[p]=d._values.length}else p<b&&(d._ptr.splice(p+1,b-p),d._values.splice(d._ptr[p],d._values.length),d._index.splice(d._ptr[p],d._index.length));if(b=p,m>C){if(_){var k=0;for(N=0;N<b;N++){d._ptr[N]=d._ptr[N]+k,S=d._ptr[N+1]+k;var J=0;for(E=C;E<m;E++,J++)d._values.splice(S+J,0,D),d._index.splice(S+J,0,E),k++}d._ptr[b]=d._values.length}}else if(m<C){var U=0;for(N=0;N<b;N++){d._ptr[N]=d._ptr[N]-U;var V=d._ptr[N],P=d._ptr[N+1]-U;for(S=V;S<P;S++)E=d._index[S],E>m-1&&(d._values.splice(S,1),d._index.splice(S,1),U++)}d._ptr[N]=d._values.length}return d._size[0]=m,d._size[1]=p,d}i.prototype.reshape=function(d,m){if(!Wt(d))throw new TypeError("Array expected");if(d.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");d.forEach(function(j){if(!Ft(j)||!Ot(j)||j<=-2||j===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+$t(d)+")")});var p=this._size[0]*this._size[1];d=Ra(d,p);var M=d[0]*d[1];if(p!==M)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var D=m?this.clone():this;if(this._size[0]===d[0]&&this._size[1]===d[1])return D;for(var A=[],y=0;y<D._ptr.length;y++)for(var _=0;_<D._ptr[y+1]-D._ptr[y];_++)A.push(y);for(var C=D._values.slice(),b=D._index.slice(),E=0;E<D._index.length;E++){var N=b[E],S=A[E],k=N*D._size[1]+S;A[E]=k%d[1],b[E]=Math.floor(k/d[1])}D._values.length=0,D._index.length=0,D._ptr.length=d[1]+1,D._size=d.slice();for(var J=0;J<D._ptr.length;J++)D._ptr[J]=0;for(var U=0;U<C.length;U++){var V=b[U],P=A[U],X=C[U],Q=o(V,D._ptr[P],D._ptr[P+1],D._index);l(Q,V,P,X,D._values,D._index,D._ptr)}return D},i.prototype.clone=function(){var d=new i({values:this._values?xt(this._values):void 0,index:xt(this._index),ptr:xt(this._ptr),size:xt(this._size),datatype:this._datatype});return d},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(d,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var p=this,M=this._size[0],D=this._size[1],A=ui(d,p,"map"),y=function(C,b,E){return A.fn(C,[b,E],p)};return v(this,0,M-1,0,D-1,y,m)};function v(d,m,p,M,D,A,y){var _=[],C=[],b=[],E=r,N=0;Ne(d._datatype)&&(E=e.find(r,[d._datatype,d._datatype])||r,N=e.convert(0,d._datatype));for(var S=function(nt,St,bt){var gt=A(nt,St,bt);E(gt,N)||(_.push(gt),C.push(St))},k=M;k<=D;k++){b.push(_.length);var J=d._ptr[k],U=d._ptr[k+1];if(y)for(var V=J;V<U;V++){var P=d._index[V];P>=m&&P<=p&&S(d._values[V],P-m,k-M)}else{for(var X={},Q=J;Q<U;Q++){var j=d._index[Q];X[j]=d._values[Q]}for(var rt=m;rt<=p;rt++){var ft=rt in X?X[rt]:0;S(ft,rt-m,k-M)}}}return b.push(_.length),new i({values:_,index:C,ptr:b,size:[p-m+1,D-M+1]})}i.prototype.forEach=function(d,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var p=this,M=this._size[0],D=this._size[1],A=ui(d,p,"forEach"),y=0;y<D;y++){var _=this._ptr[y],C=this._ptr[y+1];if(m)for(var b=_;b<C;b++){var E=this._index[b];A.fn(this._values[b],[E,y],p)}else{for(var N={},S=_;S<C;S++){var k=this._index[S];N[k]=this._values[S]}for(var J=0;J<M;J++){var U=J in N?N[J]:0;A.fn(U,[J,y],p)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var d=this._size[1],m=0;m<d;m++)for(var p=this._ptr[m],M=this._ptr[m+1],D=p;D<M;D++){var A=this._index[D];yield{value:this._values[D],index:[A,m]}}},i.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1)};function g(d,m,p,M,D){var A=M[0],y=M[1],_=[],C,b;for(C=0;C<A;C++)for(_[C]=[],b=0;b<y;b++)_[C][b]=0;for(b=0;b<y;b++)for(var E=p[b],N=p[b+1],S=E;S<N;S++)C=m[S],_[C][b]=d?D?xt(d[S]):d[S]:1;return _}return i.prototype.format=function(d){for(var m=this._size[0],p=this._size[1],M=this.density(),D="Sparse Matrix ["+$t(m,d)+" x "+$t(p,d)+"] density: "+$t(M,d)+"\n",A=0;A<p;A++)for(var y=this._ptr[A],_=this._ptr[A+1],C=y;C<_;C++){var b=this._index[C];D+="\n    ("+$t(b,d)+", "+$t(A,d)+") ==> "+(this._values?$t(this._values[C],d):"X")}return D},i.prototype.toString=function(){return $t(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(d){if(d){if(Pt(d)&&(d=d.toNumber()),!Ft(d)||!Ot(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,p=d<0?-d:0,M=this._size[0],D=this._size[1],A=Math.min(M-p,D-m),y=[],_=[],C=[];C[0]=0;for(var b=m;b<D&&y.length<A;b++)for(var E=this._ptr[b],N=this._ptr[b+1],S=E;S<N;S++){var k=this._index[S];if(k===b-m+p){y.push(this._values[S]),_[y.length-1]=k-p;break}}return C.push(y.length),new i({values:y,index:_,ptr:C,size:[A,1]})},i.fromJSON=function(d){return new i(d)},i.diagonal=function(d,m,p,M,D){if(!Wt(d))throw new TypeError("Array expected, size parameter");if(d.length!==2)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(j){if(Pt(j)&&(j=j.toNumber()),!Ft(j)||!Ot(j)||j<1)throw new Error("Size values must be positive integers");return j}),p){if(Pt(p)&&(p=p.toNumber()),!Ft(p)||!Ot(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var A=r,y=0;Ne(D)&&(A=e.find(r,[D,D])||r,y=e.convert(0,D));var _=p>0?p:0,C=p<0?-p:0,b=d[0],E=d[1],N=Math.min(b-C,E-_),S;if(Wt(m)){if(m.length!==N)throw new Error("Invalid value array length");S=function(rt){return m[rt]}}else if(Nt(m)){var k=m.size();if(k.length!==1||k[0]!==N)throw new Error("Invalid matrix length");S=function(rt){return m.get([rt])}}else S=function(){return m};for(var J=[],U=[],V=[],P=0;P<E;P++){V.push(J.length);var X=P-_;if(X>=0&&X<N){var Q=S(X);A(Q,y)||(U.push(X+C),J.push(Q))}}return V.push(J.length),new i({values:J,index:U,ptr:V,size:[b,E]})},i.prototype.swapRows=function(d,m){if(!Ft(d)||!Ot(d)||!Ft(m)||!Ot(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return qt(d,this._size[0]),qt(m,this._size[0]),i._swapRows(d,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(d,m,p,M,D){for(var A=M[d],y=M[d+1],_=A;_<y;_++)D(p[_],m[_])},i._swapRows=function(d,m,p,M,D,A){for(var y=0;y<p;y++){var _=A[y],C=A[y+1],b=o(d,_,C,D),E=o(m,_,C,D);if(b<C&&E<C&&D[b]===d&&D[E]===m){if(M){var N=M[b];M[b]=M[E],M[E]=N}continue}if(b<C&&D[b]===d&&(E>=C||D[E]!==m)){var S=M?M[b]:void 0;D.splice(E,0,m),M&&M.splice(E,0,S),D.splice(E<=b?b+1:b,1),M&&M.splice(E<=b?b+1:b,1);continue}if(E<C&&D[E]===m&&(b>=C||D[b]!==d)){var k=M?M[E]:void 0;D.splice(b,0,d),M&&M.splice(b,0,k),D.splice(b<=E?E+1:E,1),M&&M.splice(b<=E?E+1:E,1)}}},i},{isClass:!0}),tp="number",ep=["typed"];function rp(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:i}}else return null}function np(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var i=parseInt(t.fractionalPart[n],t.radix);r+=i/Math.pow(t.radix,n+1)}var a=e+r;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is not a valid number');return a}var ip=et(tp,ep,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=rp(i);if(a)return np(a);var s=0,u=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);u&&(s=Number(u[2]),i=u[1]);var h=Number(i);if(isNaN(h))throw new SyntaxError('String "'+i+'" is not a valid number');if(u){if(h>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));h>=2**(s-1)&&(h=h-2**s)}return h},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(n=>i=>tr(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),ap="bignumber",sp=["typed","BigNumber"],up=et(ap,sp,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var s=a[2],u=r(a[1]),h=new r(2).pow(Number(s));if(u.gt(h.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var o=new r(2).pow(Number(s)-1);return u.gte(o)?u.sub(h):u}return new r(i)},BigNumber:function(i){return i},bigint:function(i){return new r(i.toString())},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Fraction:function(i){return new r(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new r(0)},"Array | Matrix":e.referToSelf(n=>i=>tr(i,n))})}),op="fraction",hp=["typed","Fraction"],fp=et(op,hp,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,a){return new r(i,a)},"bigint, bigint":function(i,a){return new r(i,a)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},bigint:function(i){return new r(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Object:function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>tr(i,n))})}),eu="matrix",lp=["typed","Matrix","DenseMatrix","SparseMatrix"],cp=et(eu,lp,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(eu,{"":function(){return a([])},string:function(u){return a([],u)},"string, string":function(u,h){return a([],u,h)},Array:function(u){return a(u)},Matrix:function(u){return a(u,u.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,u,h){if(u==="dense"||u==="default"||u===void 0)return new n(s,h);if(u==="sparse")return new i(s,h);throw new TypeError("Unknown matrix type "+JSON.stringify(u)+".")}}),ru="unaryMinus",dp=["typed"],vp=et(ru,dp,t=>{var{typed:e}=t;return e(ru,{number:Xo,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>tr(n,r,!0))})}),nu="abs",gp=["typed"],mp=et(nu,gp,t=>{var{typed:e}=t;return e(nu,{number:Zo,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<BigInt(0)?-r:r,"Array | Matrix":e.referToSelf(r=>n=>tr(n,r,!0))})}),iu="addScalar",pp=["typed"],yp=et(iu,pp,t=>{var{typed:e}=t;return e(iu,{"number, number":Ho,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),au="subtractScalar",Dp=["typed"],_p=et(au,Dp,t=>{var{typed:e}=t;return e(au,{"number, number":Jo,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),Mp="matAlgo11xS0s",wp=["typed","equalScalar"],Yo=et(Mp,wp,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s,u){var h=i._values,o=i._index,f=i._ptr,l=i._size,c=i._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=l[0],g=l[1],d,m=r,p=0,M=s;typeof c=="string"&&(d=c,m=e.find(r,[d,d]),p=e.convert(0,d),a=e.convert(a,d),M=e.find(s,[d,d]));for(var D=[],A=[],y=[],_=0;_<g;_++){y[_]=A.length;for(var C=f[_],b=f[_+1],E=C;E<b;E++){var N=o[E],S=u?M(a,h[E]):M(h[E],a);m(S,p)||(A.push(N),D.push(S))}}return y[g]=A.length,i.createSparseMatrix({values:D,index:A,ptr:y,size:[v,g],datatype:d})}}),Ap="matAlgo14xDs",Ep=["typed"],ka=et(Ap,Ep,t=>{var{typed:e}=t;return function(i,a,s,u){var h=i._data,o=i._size,f=i._datatype,l,c=s;typeof f=="string"&&(l=f,a=e.convert(a,l),c=e.find(s,[l,l]));var v=o.length>0?r(c,0,o,o[0],h,a,u):[];return i.createDenseMatrix({data:v,size:xt(o),datatype:l})};function r(n,i,a,s,u,h,o){var f=[];if(i===a.length-1)for(var l=0;l<s;l++)f[l]=o?n(h,u[l]):n(u[l],h);else for(var c=0;c<s;c++)f[c]=r(n,i+1,a,a[i+1],u[c],h,o);return f}}),bp="matAlgo13xDD",Cp=["typed"],Fp=et(bp,Cp,t=>{var{typed:e}=t;return function(i,a,s){var u=i._data,h=i._size,o=i._datatype,f=a._data,l=a._size,c=a._datatype,v=[];if(h.length!==l.length)throw new wt(h.length,l.length);for(var g=0;g<h.length;g++){if(h[g]!==l[g])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+l+")");v[g]=h[g]}var d,m=s;typeof o=="string"&&o===c&&(d=o,m=e.find(s,[d,d]));var p=v.length>0?r(m,0,v,v[0],u,f):[];return i.createDenseMatrix({data:p,size:v,datatype:d})};function r(n,i,a,s,u,h){var o=[];if(i===a.length-1)for(var f=0;f<s;f++)o[f]=n(u[f],h[f]);else for(var l=0;l<s;l++)o[l]=r(n,i+1,a,a[i+1],u[l],h[l]);return o}});function Jt(t,e){if(Je(t.size(),e.size()))return[t,e];var r=jo(t.size(),e.size());return[t,e].map(n=>xp(n,r))}function xp(t,e){return Je(t.size(),e)?t:t.create(fa(t.valueOf(),e),t.datatype())}var Np="matrixAlgorithmSuite",Bp=["typed","matrix"],Sp=et(Np,Bp,t=>{var{typed:e,matrix:r}=t,n=Fp({typed:e}),i=ka({typed:e});return function(s){var u=s.elop,h=s.SD||s.DS,o;u?(o={"DenseMatrix, DenseMatrix":(v,g)=>n(...Jt(v,g),u),"Array, Array":(v,g)=>n(...Jt(r(v),r(g)),u).valueOf(),"Array, DenseMatrix":(v,g)=>n(...Jt(r(v),g),u),"DenseMatrix, Array":(v,g)=>n(...Jt(v,r(g)),u)},s.SS&&(o["SparseMatrix, SparseMatrix"]=(v,g)=>s.SS(...Jt(v,g),u,!1)),s.DS&&(o["DenseMatrix, SparseMatrix"]=(v,g)=>s.DS(...Jt(v,g),u,!1),o["Array, SparseMatrix"]=(v,g)=>s.DS(...Jt(r(v),g),u,!1)),h&&(o["SparseMatrix, DenseMatrix"]=(v,g)=>h(...Jt(g,v),u,!0),o["SparseMatrix, Array"]=(v,g)=>h(...Jt(r(g),v),u,!0))):(o={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(g,d)=>n(...Jt(g,d),v)),"Array, Array":e.referToSelf(v=>(g,d)=>n(...Jt(r(g),r(d)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(g,d)=>n(...Jt(r(g),d),v)),"DenseMatrix, Array":e.referToSelf(v=>(g,d)=>n(...Jt(g,r(d)),v))},s.SS&&(o["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(g,d)=>s.SS(...Jt(g,d),v,!1))),s.DS&&(o["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(g,d)=>s.DS(...Jt(g,d),v,!1)),o["Array, SparseMatrix"]=e.referToSelf(v=>(g,d)=>s.DS(...Jt(r(g),d),v,!1))),h&&(o["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(g,d)=>h(...Jt(d,g),v,!0)),o["SparseMatrix, Array"]=e.referToSelf(v=>(g,d)=>h(...Jt(r(d),g),v,!0))));var f=s.scalar||"any",l=s.Ds||s.Ss;l&&(u?(o["DenseMatrix,"+f]=(v,g)=>i(v,g,u,!1),o[f+", DenseMatrix"]=(v,g)=>i(g,v,u,!0),o["Array,"+f]=(v,g)=>i(r(v),g,u,!1).valueOf(),o[f+", Array"]=(v,g)=>i(r(g),v,u,!0).valueOf()):(o["DenseMatrix,"+f]=e.referToSelf(v=>(g,d)=>i(g,d,v,!1)),o[f+", DenseMatrix"]=e.referToSelf(v=>(g,d)=>i(d,g,v,!0)),o["Array,"+f]=e.referToSelf(v=>(g,d)=>i(r(g),d,v,!1).valueOf()),o[f+", Array"]=e.referToSelf(v=>(g,d)=>i(r(d),g,v,!0).valueOf())));var c=s.sS!==void 0?s.sS:s.Ss;return u?(s.Ss&&(o["SparseMatrix,"+f]=(v,g)=>s.Ss(v,g,u,!1)),c&&(o[f+", SparseMatrix"]=(v,g)=>c(g,v,u,!0))):(s.Ss&&(o["SparseMatrix,"+f]=e.referToSelf(v=>(g,d)=>s.Ss(g,d,v,!1))),c&&(o[f+", SparseMatrix"]=e.referToSelf(v=>(g,d)=>c(d,g,v,!0)))),u&&u.signatures&&_o(o,u.signatures),o}}),Tp="matAlgo01xDSid",Ip=["typed"],Op=et(Tp,Ip,t=>{var{typed:e}=t;return function(n,i,a,s){var u=n._data,h=n._size,o=n._datatype||n.getDataType(),f=i._values,l=i._index,c=i._ptr,v=i._size,g=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(h.length!==v.length)throw new wt(h.length,v.length);if(h[0]!==v[0]||h[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+v+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d=h[0],m=h[1],p=typeof o=="string"&&o!=="mixed"&&o===g?o:void 0,M=p?e.find(a,[p,p]):a,D,A,y=[];for(D=0;D<d;D++)y[D]=[];var _=[],C=[];for(A=0;A<m;A++){for(var b=A+1,E=c[A],N=c[A+1],S=E;S<N;S++)D=l[S],_[D]=s?M(f[S],u[D][A]):M(u[D][A],f[S]),C[D]=b;for(D=0;D<d;D++)C[D]===b?y[D][A]=_[D]:y[D][A]=u[D][A]}return n.createDenseMatrix({data:y,size:[d,m],datatype:o===n._datatype&&g===i._datatype?p:void 0})}}),Pp="matAlgo04xSidSid",Rp=["typed","equalScalar"],qp=et(Pp,Rp,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var u=i._values,h=i._index,o=i._ptr,f=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=a._values,v=a._index,g=a._ptr,d=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(f.length!==d.length)throw new wt(f.length,d.length);if(f[0]!==d[0]||f[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+d+")");var p=f[0],M=f[1],D,A=r,y=0,_=s;typeof l=="string"&&l===m&&l!=="mixed"&&(D=l,A=e.find(r,[D,D]),y=e.convert(0,D),_=e.find(s,[D,D]));var C=u&&c?[]:void 0,b=[],E=[],N=u&&c?[]:void 0,S=u&&c?[]:void 0,k=[],J=[],U,V,P,X,Q;for(V=0;V<M;V++){E[V]=b.length;var j=V+1;for(X=o[V],Q=o[V+1],P=X;P<Q;P++)U=h[P],b.push(U),k[U]=j,N&&(N[U]=u[P]);for(X=g[V],Q=g[V+1],P=X;P<Q;P++)if(U=v[P],k[U]===j){if(N){var rt=_(N[U],c[P]);A(rt,y)?k[U]=null:N[U]=rt}}else b.push(U),J[U]=j,S&&(S[U]=c[P]);if(N&&S)for(P=E[V];P<b.length;)U=b[P],k[U]===j?(C[P]=N[U],P++):J[U]===j?(C[P]=S[U],P++):b.splice(P,1)}return E[M]=b.length,i.createSparseMatrix({values:C,index:b,ptr:E,size:[p,M],datatype:l===i._datatype&&m===a._datatype?D:void 0})}}),$p="matAlgo10xSids",kp=["typed","DenseMatrix"],zp=et($p,kp,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,u){var h=i._values,o=i._index,f=i._ptr,l=i._size,c=i._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=l[0],g=l[1],d,m=s;typeof c=="string"&&(d=c,a=e.convert(a,d),m=e.find(s,[d,d]));for(var p=[],M=[],D=[],A=0;A<g;A++){for(var y=A+1,_=f[A],C=f[A+1],b=_;b<C;b++){var E=o[b];M[E]=h[b],D[E]=y}for(var N=0;N<v;N++)A===0&&(p[N]=[]),D[N]===y?p[N][A]=u?m(a,M[N]):m(M[N],a):p[N][A]=a}return new r({data:p,size:[v,g],datatype:d})}}),Lp="multiplyScalar",Up=["typed"],jp=et(Lp,Up,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Qo,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),su="multiply",Vp=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Gp=et(su,Vp,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:s}=t,u=Yo({typed:e,equalScalar:a}),h=ka({typed:e});function o(y,_){switch(y.length){case 1:switch(_.length){case 1:if(y[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(y[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+y[0]+") must match Matrix rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;case 2:switch(_.length){case 1:if(y[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+y[1]+") must match Vector length ("+_[0]+")");break;case 2:if(y[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+y[1]+") must match Matrix B rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+y.length+" dimensions)")}}function f(y,_,C){if(C===0)throw new Error("Cannot multiply two empty vectors");return s(y,_)}function l(y,_){if(_.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return c(y,_)}function c(y,_){var C=y._data,b=y._size,E=y._datatype||y.getDataType(),N=_._data,S=_._size,k=_._datatype||_.getDataType(),J=b[0],U=S[1],V,P=n,X=i;E&&k&&E===k&&typeof E=="string"&&E!=="mixed"&&(V=E,P=e.find(n,[V,V]),X=e.find(i,[V,V]));for(var Q=[],j=0;j<U;j++){for(var rt=X(C[0],N[0][j]),ft=1;ft<J;ft++)rt=P(rt,X(C[ft],N[ft][j]));Q[j]=rt}return y.createDenseMatrix({data:Q,size:[U],datatype:E===y._datatype&&k===_._datatype?V:void 0})}var v=e("_multiplyMatrixVector",{"DenseMatrix, any":d,"SparseMatrix, any":M}),g=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":p,"SparseMatrix, DenseMatrix":D,"SparseMatrix, SparseMatrix":A});function d(y,_){var C=y._data,b=y._size,E=y._datatype||y.getDataType(),N=_._data,S=_._datatype||_.getDataType(),k=b[0],J=b[1],U,V=n,P=i;E&&S&&E===S&&typeof E=="string"&&E!=="mixed"&&(U=E,V=e.find(n,[U,U]),P=e.find(i,[U,U]));for(var X=[],Q=0;Q<k;Q++){for(var j=C[Q],rt=P(j[0],N[0]),ft=1;ft<J;ft++)rt=V(rt,P(j[ft],N[ft]));X[Q]=rt}return y.createDenseMatrix({data:X,size:[k],datatype:E===y._datatype&&S===_._datatype?U:void 0})}function m(y,_){var C=y._data,b=y._size,E=y._datatype||y.getDataType(),N=_._data,S=_._size,k=_._datatype||_.getDataType(),J=b[0],U=b[1],V=S[1],P,X=n,Q=i;E&&k&&E===k&&typeof E=="string"&&E!=="mixed"&&E!=="mixed"&&(P=E,X=e.find(n,[P,P]),Q=e.find(i,[P,P]));for(var j=[],rt=0;rt<J;rt++){var ft=C[rt];j[rt]=[];for(var ht=0;ht<V;ht++){for(var nt=Q(ft[0],N[0][ht]),St=1;St<U;St++)nt=X(nt,Q(ft[St],N[St][ht]));j[rt][ht]=nt}}return y.createDenseMatrix({data:j,size:[J,V],datatype:E===y._datatype&&k===_._datatype?P:void 0})}function p(y,_){var C=y._data,b=y._size,E=y._datatype||y.getDataType(),N=_._values,S=_._index,k=_._ptr,J=_._size,U=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!N)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var V=b[0],P=J[1],X,Q=n,j=i,rt=a,ft=0;E&&U&&E===U&&typeof E=="string"&&E!=="mixed"&&(X=E,Q=e.find(n,[X,X]),j=e.find(i,[X,X]),rt=e.find(a,[X,X]),ft=e.convert(0,X));for(var ht=[],nt=[],St=[],bt=_.createSparseMatrix({values:ht,index:nt,ptr:St,size:[V,P],datatype:E===y._datatype&&U===_._datatype?X:void 0}),gt=0;gt<P;gt++){St[gt]=nt.length;var Mt=k[gt],Vt=k[gt+1];if(Vt>Mt)for(var mt=0,ct=0;ct<V;ct++){for(var re=ct+1,kt=void 0,pt=Mt;pt<Vt;pt++){var Rt=S[pt];mt!==re?(kt=j(C[ct][Rt],N[pt]),mt=re):kt=Q(kt,j(C[ct][Rt],N[pt]))}mt===re&&!rt(kt,ft)&&(nt.push(ct),ht.push(kt))}}return St[P]=nt.length,bt}function M(y,_){var C=y._values,b=y._index,E=y._ptr,N=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var S=_._data,k=_._datatype||_.getDataType(),J=y._size[0],U=_._size[0],V=[],P=[],X=[],Q,j=n,rt=i,ft=a,ht=0;N&&k&&N===k&&typeof N=="string"&&N!=="mixed"&&(Q=N,j=e.find(n,[Q,Q]),rt=e.find(i,[Q,Q]),ft=e.find(a,[Q,Q]),ht=e.convert(0,Q));var nt=[],St=[];X[0]=0;for(var bt=0;bt<U;bt++){var gt=S[bt];if(!ft(gt,ht))for(var Mt=E[bt],Vt=E[bt+1],mt=Mt;mt<Vt;mt++){var ct=b[mt];St[ct]?nt[ct]=j(nt[ct],rt(gt,C[mt])):(St[ct]=!0,P.push(ct),nt[ct]=rt(gt,C[mt]))}}for(var re=P.length,kt=0;kt<re;kt++){var pt=P[kt];V[kt]=nt[pt]}return X[1]=P.length,y.createSparseMatrix({values:V,index:P,ptr:X,size:[J,1],datatype:N===y._datatype&&k===_._datatype?Q:void 0})}function D(y,_){var C=y._values,b=y._index,E=y._ptr,N=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var S=_._data,k=_._datatype||_.getDataType(),J=y._size[0],U=_._size[0],V=_._size[1],P,X=n,Q=i,j=a,rt=0;N&&k&&N===k&&typeof N=="string"&&N!=="mixed"&&(P=N,X=e.find(n,[P,P]),Q=e.find(i,[P,P]),j=e.find(a,[P,P]),rt=e.convert(0,P));for(var ft=[],ht=[],nt=[],St=y.createSparseMatrix({values:ft,index:ht,ptr:nt,size:[J,V],datatype:N===y._datatype&&k===_._datatype?P:void 0}),bt=[],gt=[],Mt=0;Mt<V;Mt++){nt[Mt]=ht.length;for(var Vt=Mt+1,mt=0;mt<U;mt++){var ct=S[mt][Mt];if(!j(ct,rt))for(var re=E[mt],kt=E[mt+1],pt=re;pt<kt;pt++){var Rt=b[pt];gt[Rt]!==Vt?(gt[Rt]=Vt,ht.push(Rt),bt[Rt]=Q(ct,C[pt])):bt[Rt]=X(bt[Rt],Q(ct,C[pt]))}}for(var he=nt[Mt],Ae=ht.length,Ee=he;Ee<Ae;Ee++){var ke=ht[Ee];ft[Ee]=bt[ke]}}return nt[V]=ht.length,St}function A(y,_){var C=y._values,b=y._index,E=y._ptr,N=y._datatype||y._data===void 0?y._datatype:y.getDataType(),S=_._values,k=_._index,J=_._ptr,U=_._datatype||_._data===void 0?_._datatype:_.getDataType(),V=y._size[0],P=_._size[1],X=C&&S,Q,j=n,rt=i;N&&U&&N===U&&typeof N=="string"&&N!=="mixed"&&(Q=N,j=e.find(n,[Q,Q]),rt=e.find(i,[Q,Q]));for(var ft=X?[]:void 0,ht=[],nt=[],St=y.createSparseMatrix({values:ft,index:ht,ptr:nt,size:[V,P],datatype:N===y._datatype&&U===_._datatype?Q:void 0}),bt=X?[]:void 0,gt=[],Mt,Vt,mt,ct,re,kt,pt,Rt,he=0;he<P;he++){nt[he]=ht.length;var Ae=he+1;for(re=J[he],kt=J[he+1],ct=re;ct<kt;ct++)if(Rt=k[ct],X)for(Vt=E[Rt],mt=E[Rt+1],Mt=Vt;Mt<mt;Mt++)pt=b[Mt],gt[pt]!==Ae?(gt[pt]=Ae,ht.push(pt),bt[pt]=rt(S[ct],C[Mt])):bt[pt]=j(bt[pt],rt(S[ct],C[Mt]));else for(Vt=E[Rt],mt=E[Rt+1],Mt=Vt;Mt<mt;Mt++)pt=b[Mt],gt[pt]!==Ae&&(gt[pt]=Ae,ht.push(pt));if(X)for(var Ee=nt[he],ke=ht.length,ze=Ee;ze<ke;ze++){var Or=ht[ze];ft[ze]=bt[Or]}}return nt[P]=ht.length,St}return e(su,i,{"Array, Array":e.referTo("Matrix, Matrix",y=>(_,C)=>{o(At(_),At(C));var b=y(r(_),r(C));return Nt(b)?b.valueOf():b}),"Matrix, Matrix":function(_,C){var b=_.size(),E=C.size();return o(b,E),b.length===1?E.length===1?f(_,C,b[0]):l(_,C):E.length===1?v(_,C):g(_,C)},"Matrix, Array":e.referTo("Matrix,Matrix",y=>(_,C)=>y(_,r(C))),"Array, Matrix":e.referToSelf(y=>(_,C)=>y(r(_,C.storage()),C)),"SparseMatrix, any":function(_,C){return u(_,C,i,!1)},"DenseMatrix, any":function(_,C){return h(_,C,i,!1)},"any, SparseMatrix":function(_,C){return u(C,_,i,!0)},"any, DenseMatrix":function(_,C){return h(C,_,i,!0)},"Array, any":function(_,C){return h(r(_),C,i,!1).valueOf()},"any, Array":function(_,C){return h(r(C),_,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(y=>(_,C,b)=>{for(var E=y(_,C),N=0;N<b.length;N++)E=y(E,b[N]);return E})})}),uu="conj",Wp=["typed"],Zp=et(uu,Wp,t=>{var{typed:e}=t;return e(uu,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>tr(n,r))})}),ou="concat",Hp=["typed","matrix","isInteger"],Jp=et(ou,Hp,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(ou,{"...Array | Matrix | number | BigNumber":function(a){var s,u=a.length,h=-1,o,f=!1,l=[];for(s=0;s<u;s++){var c=a[s];if(Nt(c)&&(f=!0),Ft(c)||Pt(c)){if(s!==u-1)throw new Error("Dimension must be specified as last argument");if(o=h,h=c.valueOf(),!n(h))throw new TypeError("Integer number expected for dimension");if(h<0||s>0&&h>o)throw new Ke(h,o+1)}else{var v=xt(c).valueOf(),g=At(v);if(l[s]=v,o=h,h=g.length-1,s>0&&h!==o)throw new wt(o+1,h+1)}}if(l.length===0)throw new SyntaxError("At least one matrix expected");for(var d=l.shift();l.length;)d=Uo(d,l.shift(),h);return f?r(d):d},"...string":function(a){return a.join("")}})}),hu="diag",Qp=["typed","matrix","DenseMatrix","SparseMatrix"],Xp=et(hu,Qp,t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(hu,{Array:function(o){return a(o,0,At(o),null)},"Array, number":function(o,f){return a(o,f,At(o),null)},"Array, BigNumber":function(o,f){return a(o,f.toNumber(),At(o),null)},"Array, string":function(o,f){return a(o,0,At(o),f)},"Array, number, string":function(o,f,l){return a(o,f,At(o),l)},"Array, BigNumber, string":function(o,f,l){return a(o,f.toNumber(),At(o),l)},Matrix:function(o){return a(o,0,o.size(),o.storage())},"Matrix, number":function(o,f){return a(o,f,o.size(),o.storage())},"Matrix, BigNumber":function(o,f){return a(o,f.toNumber(),o.size(),o.storage())},"Matrix, string":function(o,f){return a(o,0,o.size(),f)},"Matrix, number, string":function(o,f,l){return a(o,f,o.size(),l)},"Matrix, BigNumber, string":function(o,f,l){return a(o,f.toNumber(),o.size(),l)}});function a(h,o,f,l){if(!Ot(o))throw new TypeError("Second parameter in function diag must be an integer");var c=o>0?o:0,v=o<0?-o:0;switch(f.length){case 1:return s(h,o,l,f[0],v,c);case 2:return u(h,o,l,f,v,c)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(h,o,f,l,c,v){var g=[l+c,l+v];if(f&&f!=="sparse"&&f!=="dense")throw new TypeError("Unknown matrix type ".concat(f,'"'));var d=f==="sparse"?i.diagonal(g,h,o):n.diagonal(g,h,o);return f!==null?d:d.valueOf()}function u(h,o,f,l,c,v){if(Nt(h)){var g=h.diagonal(o);return f!==null?f!==g.storage()?r(g,f):g:g.valueOf()}for(var d=Math.min(l[0]-c,l[1]-v),m=[],p=0;p<d;p++)m[p]=h[p+c][p+v];return f!==null?r(m):m}}),fu="flatten",Yp=["typed"],Kp=et(fu,Yp,t=>{var{typed:e}=t;return e(fu,{Array:function(n){return ha(n)},Matrix:function(n){return n.create(ha(n.valueOf(),!0),n.datatype())}})}),lu="identity",ty=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],ey=et(lu,ty,t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:a,SparseMatrix:s}=t;return e(lu,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(f){return n(f)},"number | BigNumber":function(f){return h(f,f,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(f,l){return h(f,f,l)},"number | BigNumber, number | BigNumber":function(f,l){return h(f,l,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(f,l,c){return h(f,l,c)},Array:function(f){return u(f)},"Array, string":function(f,l){return u(f,l)},Matrix:function(f){return u(f.valueOf(),f.storage())},"Matrix, string":function(f,l){return u(f.valueOf(),l)}});function u(o,f){switch(o.length){case 0:return f?n(f):[];case 1:return h(o[0],o[0],f);case 2:return h(o[0],o[1],f);default:throw new Error("Vector containing two values expected")}}function h(o,f,l){var c=Pt(o)||Pt(f)?i:null;if(Pt(o)&&(o=o.toNumber()),Pt(f)&&(f=f.toNumber()),!Ot(o)||o<1)throw new Error("Parameters in function identity must be positive integers");if(!Ot(f)||f<1)throw new Error("Parameters in function identity must be positive integers");var v=c?new i(1):1,g=c?new c(0):0,d=[o,f];if(l){if(l==="sparse")return s.diagonal(d,v,0,g);if(l==="dense")return a.diagonal(d,v,0,g);throw new TypeError('Unknown matrix type "'.concat(l,'"'))}for(var m=rn([],d,g),p=o<f?o:f,M=0;M<p;M++)m[M][M]=v;return m}}),cu="kron",ry=["typed","matrix","multiplyScalar"],ny=et(cu,ry,t=>{var{typed:e,matrix:r,multiplyScalar:n}=t;return e(cu,{"Matrix, Matrix":function(s,u){return r(i(s.toArray(),u.toArray()))},"Matrix, Array":function(s,u){return r(i(s.toArray(),u))},"Array, Matrix":function(s,u){return r(i(s,u.toArray()))},"Array, Array":i});function i(a,s){if(At(a).length===1&&(a=[a]),At(s).length===1&&(s=[s]),At(a).length>2||At(s).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(s.length)+")");var u=[],h=[];return a.map(function(o){return s.map(function(f){return h=[],u.push(h),o.map(function(l){return f.map(function(c){return h.push(n(l,c))})})})})&&u}}),iy="ones",ay=["typed","config","matrix","BigNumber"],sy=et(iy,ay,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e("ones",{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(o){var f=o[o.length-1];if(typeof f=="string"){var l=o.pop();return a(o,l)}else return r.matrix==="Array"?a(o):a(o,"default")},Array:a,Matrix:function(o){var f=o.storage();return a(o.valueOf(),f)},"Array | Matrix, string":function(o,f){return a(o.valueOf(),f)}});function a(h,o){var f=s(h),l=f?new i(1):1;if(u(h),o){var c=n(o);return h.length>0?c.resize(h,l):c}else{var v=[];return h.length>0?rn(v,h,l):v}}function s(h){var o=!1;return h.forEach(function(f,l,c){Pt(f)&&(o=!0,c[l]=f.toNumber())}),o}function u(h){h.forEach(function(o){if(typeof o!="number"||!Ot(o)||o<0)throw new Error("Parameters in function ones must be positive integers")})}});function uy(){throw new Error('No "bignumber" implementation available')}function oy(){throw new Error('No "fraction" implementation available')}function hy(){throw new Error('No "matrix" implementation available')}var du="reshape",fy=["typed","isInteger","matrix"],ly=et(du,fy,t=>{var{typed:e,isInteger:r}=t;return e(du,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(s){if(!r(s))throw new TypeError("Invalid size for dimension: "+s)}),Pa(i,a)}})}),vu="size",cy=["typed","config","?matrix"],dy=et(vu,cy,t=>{var{typed:e,config:r,matrix:n}=t;return e(vu,{Matrix:function(a){return a.create(a.size(),"number")},Array:At,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([],"dense","number"):hy()}})}),gu="transpose",vy=["typed","matrix"],gy=et(gu,vy,t=>{var{typed:e,matrix:r}=t;return e(gu,{Array:s=>n(r(s)).valueOf(),Matrix:n,any:xt});function n(s){var u=s.size(),h;switch(u.length){case 1:h=s.clone();break;case 2:{var o=u[0],f=u[1];if(f===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+$t(u)+")");switch(s.storage()){case"dense":h=i(s,o,f);break;case"sparse":h=a(s,o,f);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+$t(u)+")")}return h}function i(s,u,h){for(var o=s._data,f=[],l,c=0;c<h;c++){l=f[c]=[];for(var v=0;v<u;v++)l[v]=xt(o[v][c])}return s.createDenseMatrix({data:f,size:[h,u],datatype:s._datatype})}function a(s,u,h){for(var o=s._values,f=s._index,l=s._ptr,c=o?[]:void 0,v=[],g=[],d=[],m=0;m<u;m++)d[m]=0;var p,M,D;for(p=0,M=f.length;p<M;p++)d[f[p]]++;for(var A=0,y=0;y<u;y++)g.push(A),A+=d[y],d[y]=g[y];for(g.push(A),D=0;D<h;D++)for(var _=l[D],C=l[D+1],b=_;b<C;b++){var E=d[f[b]]++;v[E]=D,o&&(c[E]=xt(o[b]))}return s.createSparseMatrix({values:c,index:v,ptr:g,size:[h,u],datatype:s._datatype})}}),mu="zeros",my=["typed","config","matrix","BigNumber"],py=et(mu,my,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(mu,{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(o){var f=o[o.length-1];if(typeof f=="string"){var l=o.pop();return a(o,l)}else return r.matrix==="Array"?a(o):a(o,"default")},Array:a,Matrix:function(o){var f=o.storage();return a(o.valueOf(),f)},"Array | Matrix, string":function(o,f){return a(o.valueOf(),f)}});function a(h,o){var f=s(h),l=f?new i(0):0;if(u(h),o){var c=n(o);return h.length>0?c.resize(h,l):c}else{var v=[];return h.length>0?rn(v,h,l):v}}function s(h){var o=!1;return h.forEach(function(f,l,c){Pt(f)&&(o=!0,c[l]=f.toNumber())}),o}function u(h){h.forEach(function(o){if(typeof o!="number"||!Ot(o)||o<0)throw new Error("Parameters in function zeros must be positive integers")})}});function pu(t,e,r){var n;return String(t).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Ie(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).includes("complex numbers")?(n=arguments.length>2?" (type: "+Ie(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var yy="numeric",Dy=["number","?bignumber","?fraction"],_y=et(yy,Dy,t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:s=>e(s),BigNumber:r?s=>r(s):uy,bigint:s=>BigInt(s),Fraction:n?s=>n(s):oy};return function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",o=arguments.length>2?arguments[2]:void 0;if(o!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var f=Ie(u);if(!(f in i))throw new TypeError("Cannot convert "+u+' of type "'+f+'"; valid input types are '+Object.keys(i).join(", "));if(!(h in a))throw new TypeError("Cannot convert "+u+' to type "'+h+'"; valid output types are '+Object.keys(a).join(", "));return h===f?u:a[h](u)}}),yu="divideScalar",My=["typed","numeric"],wy=et(yu,My,t=>{var{typed:e,numeric:r}=t;return e(yu,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"bigint, bigint":function(i,a){return i/a},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),Du="sparse",Ay=["typed","SparseMatrix"],Ey=et(Du,Ay,t=>{var{typed:e,SparseMatrix:r}=t;return e(Du,{"":function(){return new r([])},string:function(i){return new r([],i)},"Array | Matrix":function(i){return new r(i)},"Array | Matrix, string":function(i,a){return new r(i,a)}})}),_u="add",by=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],Cy=et(_u,by,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:u}=t,h=Op({typed:e}),o=qp({typed:e,equalScalar:i}),f=zp({typed:e,DenseMatrix:a}),l=Sp({typed:e,matrix:r,concat:u});return e(_u,{"any, any":n,"any, any, ...any":e.referToSelf(c=>(v,g,d)=>{for(var m=c(v,g),p=0;p<d.length;p++)m=c(m,d[p]);return m})},l({elop:n,DS:h,SS:o,Ss:f}))}),Mu="dot",Fy=["typed","addScalar","multiplyScalar","conj","size"],xy=et(Mu,Fy,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(Mu,{"Array | DenseMatrix, Array | DenseMatrix":u,"SparseMatrix, SparseMatrix":h});function s(f,l){var c=o(f),v=o(l),g,d;if(c.length===1)g=c[0];else if(c.length===2&&c[1]===1)g=c[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+c.join(", ")+")");if(v.length===1)d=v[0];else if(v.length===2&&v[1]===1)d=v[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+v.join(", ")+")");if(g!==d)throw new RangeError("Vectors must have equal length ("+g+" != "+d+")");if(g===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return g}function u(f,l){var c=s(f,l),v=Nt(f)?f._data:f,g=Nt(f)?f._datatype||f.getDataType():void 0,d=Nt(l)?l._data:l,m=Nt(l)?l._datatype||l.getDataType():void 0,p=o(f).length===2,M=o(l).length===2,D=r,A=n;if(g&&m&&g===m&&typeof g=="string"&&g!=="mixed"){var y=g;D=e.find(r,[y,y]),A=e.find(n,[y,y])}if(!p&&!M){for(var _=A(i(v[0]),d[0]),C=1;C<c;C++)_=D(_,A(i(v[C]),d[C]));return _}if(!p&&M){for(var b=A(i(v[0]),d[0][0]),E=1;E<c;E++)b=D(b,A(i(v[E]),d[E][0]));return b}if(p&&!M){for(var N=A(i(v[0][0]),d[0]),S=1;S<c;S++)N=D(N,A(i(v[S][0]),d[S]));return N}if(p&&M){for(var k=A(i(v[0][0]),d[0][0]),J=1;J<c;J++)k=D(k,A(i(v[J][0]),d[J][0]));return k}}function h(f,l){s(f,l);for(var c=f._index,v=f._values,g=l._index,d=l._values,m=0,p=r,M=n,D=0,A=0;D<c.length&&A<g.length;){var y=c[D],_=g[A];if(y<_){D++;continue}if(y>_){A++;continue}y===_&&(m=p(m,M(v[D],d[A])),D++,A++)}return m}function o(f){return Nt(f)?f.size():a(f)}}),wu="det",Ny=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],By=et(wu,Ny,t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:i,divideScalar:a,isZero:s,unaryMinus:u}=t;return e(wu,{any:function(f){return xt(f)},"Array | Matrix":function(f){var l;switch(Nt(f)?l=f.size():Array.isArray(f)?(f=r(f),l=f.size()):l=[],l.length){case 0:return xt(f);case 1:if(l[0]===1)return xt(f.valueOf()[0]);if(l[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+$t(l)+")");case 2:{var c=l[0],v=l[1];if(c===v)return h(f.clone().valueOf(),c);if(v===0)return 1;throw new RangeError("Matrix must be square (size: "+$t(l)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+$t(l)+")")}}});function h(o,f,l){if(f===1)return xt(o[0][0]);if(f===2)return n(i(o[0][0],o[1][1]),i(o[1][0],o[0][1]));for(var c=!1,v=new Array(f).fill(0).map((C,b)=>b),g=0;g<f;g++){var d=v[g];if(s(o[d][g])){var m=void 0;for(m=g+1;m<f;m++)if(!s(o[v[m]][g])){d=v[m],v[m]=v[g],v[g]=d,c=!c;break}if(m===f)return o[d][g]}for(var p=o[d][g],M=g===0?1:o[v[g-1]][g-1],D=g+1;D<f;D++)for(var A=v[D],y=g+1;y<f;y++)o[A][y]=a(n(i(o[A][y],p),i(o[A][g],o[d][y])),M)}var _=o[v[f-1]][f-1];return c?u(_):_}}),Au="inv",Sy=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Ty=et(Au,Sy,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:a,unaryMinus:s,det:u,identity:h,abs:o}=t;return e(Au,{"Array | Matrix":function(c){var v=Nt(c)?c.size():At(c);switch(v.length){case 1:if(v[0]===1)return Nt(c)?r([n(1,c.valueOf()[0])]):[n(1,c[0])];throw new RangeError("Matrix must be square (size: "+$t(v)+")");case 2:{var g=v[0],d=v[1];if(g===d)return Nt(c)?r(f(c.valueOf(),g,d),c.storage()):f(c,g,d);throw new RangeError("Matrix must be square (size: "+$t(v)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+$t(v)+")")}},any:function(c){return n(1,c)}});function f(l,c,v){var g,d,m,p,M;if(c===1){if(p=l[0][0],p===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,p)]]}else if(c===2){var D=u(l);if(D===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(l[1][1],D),n(s(l[0][1]),D)],[n(s(l[1][0]),D),n(l[0][0],D)]]}else{var A=l.concat();for(g=0;g<c;g++)A[g]=A[g].concat();for(var y=h(c).valueOf(),_=0;_<v;_++){var C=o(A[_][_]),b=_;for(g=_+1;g<c;)o(A[g][_])>C&&(C=o(A[g][_]),b=g),g++;if(C===0)throw Error("Cannot calculate inverse, determinant is zero");g=b,g!==_&&(M=A[_],A[_]=A[g],A[g]=M,M=y[_],y[_]=y[g],y[g]=M);var E=A[_],N=y[_];for(g=0;g<c;g++){var S=A[g],k=y[g];if(g!==_){if(S[_]!==0){for(m=n(s(S[_]),E[_]),d=_;d<v;d++)S[d]=i(S[d],a(m,E[d]));for(d=0;d<v;d++)k[d]=i(k[d],a(m,N[d]))}}else{for(m=E[_],d=_;d<v;d++)S[d]=n(S[d],m);for(d=0;d<v;d++)k[d]=n(k[d],m)}}}return y}}}),Iy="divide",Oy=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Py=et(Iy,Oy,t=>{var{typed:e,matrix:r,multiply:n,equalScalar:i,divideScalar:a,inv:s}=t,u=Yo({typed:e,equalScalar:i}),h=ka({typed:e});return e("divide",_o({"Array | Matrix, Array | Matrix":function(f,l){return n(f,s(l))},"DenseMatrix, any":function(f,l){return h(f,l,a,!1)},"SparseMatrix, any":function(f,l){return u(f,l,a,!1)},"Array, any":function(f,l){return h(r(f),l,a,!1).valueOf()},"any, Array | Matrix":function(f,l){return n(f,s(l))}},a.signatures))}),Eu="mean",Ry=["typed","add","divide"],qy=et(Eu,Ry,t=>{var{typed:e,add:r,divide:n}=t;return e(Eu,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(u){if(km(u))throw new TypeError("Scalar values expected in function mean");return a(u)}});function i(s,u){try{var h=Lm(s,u,r),o=Array.isArray(s)?At(s):s.size();return n(h,o[u])}catch(f){throw pu(f,"mean")}}function a(s){var u,h=0;if(zm(s,function(o){try{u=u===void 0?o:r(u,o),h++}catch(f){throw pu(f,"mean",o)}}),h===0)throw new Error("Cannot calculate the mean of an empty array");return n(u,h)}}),An=sm({config:lr}),$y=lm({}),Ko=ym({}),za=Mm({}),En=qm({Matrix:za}),lt=hg({BigNumber:An,Complex:$y,DenseMatrix:En,Fraction:Ko}),ky=mp({typed:lt}),_i=yp({typed:lt}),zy=Zp({typed:lt}),bn=Qm({config:lr,typed:lt}),bu=Kp({typed:lt}),th=jm({typed:lt}),Ly=Wm({equalScalar:bn,typed:lt}),La=jp({typed:lt}),Uy=ip({typed:lt}),Cn=Km({Matrix:za,equalScalar:bn,typed:lt}),jy=_p({typed:lt}),Vy=up({BigNumber:An,typed:lt}),Lt=cp({DenseMatrix:En,Matrix:za,SparseMatrix:Cn,typed:lt}),fi=sy({BigNumber:An,config:lr,matrix:Lt,typed:lt}),li=ly({isInteger:th,matrix:Lt,typed:lt}),On=Ey({SparseMatrix:Cn,typed:lt}),Gy=gy({matrix:Lt,typed:lt}),Ui=py({BigNumber:An,config:lr,matrix:Lt,typed:lt}),wr=Jp({isInteger:th,matrix:Lt,typed:lt}),Cu=Xp({DenseMatrix:En,SparseMatrix:Cn,matrix:Lt,typed:lt}),Wy=fp({Fraction:Ko,typed:lt}),eh=ey({BigNumber:An,DenseMatrix:En,SparseMatrix:Cn,config:lr,matrix:Lt,typed:lt}),Fu=ny({matrix:Lt,multiplyScalar:La,typed:lt}),Zy=_y({bignumber:Vy,fraction:Wy,number:Uy}),Hy=dy({matrix:Lt,config:lr,typed:lt}),rh=vp({typed:lt}),nh=Cy({DenseMatrix:En,SparseMatrix:Cn,addScalar:_i,concat:wr,equalScalar:bn,matrix:Lt,typed:lt}),Ua=wy({numeric:Zy,typed:lt}),Jy=xy({addScalar:_i,conj:zy,multiplyScalar:La,size:Hy,typed:lt}),hr=Gp({addScalar:_i,dot:Jy,equalScalar:bn,matrix:Lt,multiplyScalar:La,typed:lt}),Qy=By({divideScalar:Ua,isZero:Ly,matrix:Lt,multiply:hr,subtractScalar:jy,typed:lt,unaryMinus:rh}),Xy=Ty({abs:ky,addScalar:_i,det:Qy,divideScalar:Ua,identity:eh,matrix:Lt,multiply:hr,typed:lt,unaryMinus:rh}),Yy=Py({divideScalar:Ua,equalScalar:bn,inv:Xy,matrix:Lt,multiply:hr,typed:lt}),Ky=qy({add:nh,divide:Yy,typed:lt});const xu=t=>{const e=eh(t,t,"sparse"),r=On(wr(Cu(bu(hr(Lt([-.25]),fi(1,t-1))),1,"sparse"),Ui(1,t,"sparse"),0)),n=On(wr(Cu(bu(hr(Lt([.25]),fi(1,t-1))),-1,"sparse"),Ui(t,1,"sparse"),1)),i=On(wr(Lt([1.5,-.5],"sparse"),Ui(t-2,1,"sparse"),0)),a=nh(e,r,n);return a.set([0,0],.5),a.set([1,0],.5),a.set([t-2,t-1],-.5),a.set([t-1,t-1],1.5),On(wr(i,a,1))},ja=t=>t==="frohavet"?"https://sfiharvest.smd.sintef.no/sinmod/output/latest/sinmod_"+t+".zarr":"https://raudfinn.smd.sintef.no/raudsinmod/output/latest/raudsinmod_"+t+".zarr",tD=async(t,e)=>{const r=ya(new wa(ja(e))),n=await Kt.v3(r.resolve("/time"),{kind:"array"});if(!n.is("int32"))throw Error("Time data type wrong, expected 'int32'");const i=t,a=Hi(0,n.shape[0],i),s=await _0(n,[a,null]),u=s.shape[0],h=new Array(u),o=new Array(u);for(let f=0;f<u;++f)h[f]=String(s.get(f,0))+"-"+String(s.get(f,1)).padStart(2,"0")+"-"+String(s.get(f,2)).padStart(2,"0")+"T"+String(s.get(f,3)).padStart(2,"0")+":"+String(s.get(f,4)).padStart(2,"0")+":"+String(s.get(f,5)).padStart(2,"0")+"Z",o[f]=f*i;return{stride:i,timestrings:h,timeindices:o}},ih=t=>({id:new Float64Array(t).map(()=>NaN),lng0:new Float64Array(t).map(()=>NaN),lat0:new Float64Array(t).map(()=>NaN),lng1:new Float64Array(t).map(()=>NaN),lat1:new Float64Array(t).map(()=>NaN),lng2:new Float64Array(t).map(()=>NaN),lat2:new Float64Array(t).map(()=>NaN),lng3:new Float64Array(t).map(()=>NaN),lat3:new Float64Array(t).map(()=>NaN),calanus_finmarchicus:new Float64Array(t).map(()=>NaN),diatoms:new Float64Array(t).map(()=>NaN),flagellates:new Float64Array(t).map(()=>NaN),temperature:new Float64Array(t).map(()=>NaN),salinity:new Float64Array(t).map(()=>NaN),u_east:new Float64Array(t).map(()=>NaN),v_north:new Float64Array(t).map(()=>NaN),current:new Float64Array(t).map(()=>NaN)}),eD=async t=>{const e=JSON.parse(t);return e?e.reduce((r,n)=>n&&r?r.concat(n):r,[]):new Array},rD=async t=>{const e=ya(new wa(ja(t))),r=await Kt.v3(e.resolve("/xc"),{kind:"array"}),n=await Kt.v3(e.resolve("/yc"),{kind:"array"}),i=await Kt.v3(e.resolve("/grid_mapping"),{kind:"array"}),a=i.attrs.latitude_of_projection_origin,s=i.attrs.longitude_of_projection_origin,u=i.attrs.standard_parallel,h=i.attrs.semi_major_axis,o=i.attrs.semi_minor_axis,f=i.attrs.false_easting,l=i.attrs.false_northing,c=i.attrs.scale_factor_at_projection_origin,v="+proj=stere +lat_0="+a+" +lon_0="+s+" +lat_ts="+u+" +k="+c+" +a="+h+" +b="+o+" +x_0="+f+" +y_0="+l;if(ge.defs("SINMOD",v),!r.is("float32"))throw Error("Longitude data type expected 'float32'!");if(!n.is("float32"))throw Error("Latitude data type expected 'float32'!");const g=await us(r),d=await us(n),m=g.shape[0],p=li(Lt(Array.from(g.data)),[1,m]),M=hr(p,xu(m)),D=d.shape[0],A=li(Lt(Array.from(d.data)),[1,D]),y=hr(A,xu(D)),_=Fu(M,fi(1,D+1)),C=Fu(fi(1,m+1),y),b=Gy(wr(_,C,0)),E=b.size(),N={sizeX:m,sizeY:D,lng:new Float64Array(E[0]),lat:new Float64Array(E[0])},S=E[0];for(let k=0;k<S;++k){const J=ge("SINMOD","WGS84").forward([b.get([k,0]),b.get([k,1])]);N.lng[k]=J[0],N.lat[k]=J[1]}return ci(N,Aa(N))},nD=async(t,e)=>{const r=JSON.parse(t),n=JSON.parse(new TextDecoder().decode(e.time_str)),i=e.data.id.length,a=ih(i),s=new Array(i).map(()=>"");let u=0;for(let o=0;o<i;o++)e.data.lng0[o]<r.lng[0]||e.data.lng0[o]>r.lng[1]||e.data.lat0[o]<r.lat[0]||e.data.lat0[o]>r.lat[1]||(a.id[u]=e.data.id[o],a.lng0[u]=e.data.lng0[o],a.lat0[u]=e.data.lat0[o],a.lng1[u]=e.data.lng1[o],a.lat1[u]=e.data.lat1[o],a.lng2[u]=e.data.lng2[o],a.lat2[u]=e.data.lat2[o],a.lng3[u]=e.data.lng3[o],a.lat3[u]=e.data.lat3[o],a.calanus_finmarchicus[u]=e.data.calanus_finmarchicus[o],a.diatoms[u]=e.data.diatoms[o],a.flagellates[u]=e.data.flagellates[o],a.temperature[u]=e.data.temperature[o],a.salinity[u]=e.data.salinity[o],a.u_east[u]=e.data.u_east[o],a.v_north[u]=e.data.v_north[o],a.current[u]=e.data.current[o],s[u++]=n[o]);console.log("Reduced:",i-u);const h={data:a,time_str:new TextEncoder().encode(JSON.stringify(s))};return ci(h,Aa(h))},iD=async(t,e,r,n,i,a)=>{const s=ya(new wa(ja(t))),u=JSON.parse(n),h=JSON.parse(e),o=await Kt.v3(s.resolve("/calanus_finmarchicus"),{kind:"array"}),f=o.attrs.scale_factor,l=o.attrs.add_offset,c=await Kt.v3(s.resolve("/diatoms"),{kind:"array"}),v=c.attrs.scale_factor,g=c.attrs.add_offset,d=await Kt.v3(s.resolve("/flagellates"),{kind:"array"}),m=d.attrs.scale_factor,p=d.attrs.add_offset,M=await Kt.v3(s.resolve("/temperature"),{kind:"array"}),D=M.attrs.scale_factor,A=M.attrs.add_offset,y=await Kt.v3(s.resolve("/salinity"),{kind:"array"}),_=y.attrs.scale_factor,C=y.attrs.add_offset,b=await Kt.v3(s.resolve("/u_east"),{kind:"array"}),E=b.attrs.scale_factor,N=b.attrs.add_offset,S=await Kt.v3(s.resolve("/v_north"),{kind:"array"}),k=S.attrs.scale_factor,J=S.attrs.add_offset;if(!o.is("int16"))throw Error("Unexpected data type for calanus finmarchicus, expected 'int16'!");if(!c.is("int16"))throw Error("Unexpected data type for diatoms, expected 'int16'!");if(!d.is("int16"))throw Error("Unexpected data type for flagellates, expected 'int16'!");if(!M.is("int16"))throw Error("Unexpected data type for Temperature, expected 'int16'!");if(!y.is("int16"))throw Error("Unexpected data type for Salinity, expected 'int16'!");if(!b.is("int16"))throw Error("Unexpected data type for Current East, expected 'int16'!");if(!S.is("int16"))throw Error("Unexpected data type for Current North, expected 'int16'!");const U=u.timeindices;let V=u.timeindices.length;a!=-1&&(V=1);const P=Math.floor(i.sizeX/r),X=Math.floor(i.sizeY/r),Q=P*X*V,j=ih(Q),rt=new Array(Q).map(()=>""),ft=li(Lt(Array.from(i.lat)),[i.sizeX+1,i.sizeY+1]),ht=li(Lt(Array.from(i.lng)),[i.sizeX+1,i.sizeY+1]);let nt=0;for(let bt=0;bt<V;++bt){let gt=U[bt],Mt=bt;a>-1&&(gt=U[a],Mt=a);const[Vt,mt,ct,re,kt,pt,Rt]=await Promise.all([o.getChunk([gt,0,0]),c.getChunk([gt,0,0,0]),d.getChunk([gt,0,0,0]),M.getChunk([gt,0,0,0]),y.getChunk([gt,0,0,0]),b.getChunk([gt,0,0,0]),S.getChunk([gt,0,0,0])]),he=Le(Vt.data,Vt.shape,Vt.stride),Ae=Le(mt.data,mt.shape,mt.stride),Ee=Le(ct.data,ct.shape,ct.stride),ke=Le(re.data,re.shape,re.stride),ze=Le(kt.data,kt.shape,kt.stride),Or=Le(pt.data,pt.shape,pt.stride),Mi=Le(Rt.data,Rt.shape,Rt.stride);for(let er=0;er<P;++er){const w=er*r,F=(er+1)*r;for(let x=0;x<X;++x){const I=x*r,R=(x+1)*r,T=[nt,ht.get([w,I]),ft.get([w,I]),ht.get([w,R]),ft.get([w,R]),ht.get([F,R]),ft.get([F,R]),ht.get([F,I]),ft.get([F,I]),u.timestrings[Mt]],G=T[1]<h.lng[0]||T[1]>h.lng[1]||T[2]<h.lat[0]||T[2]>h.lat[1],z=new Array(r*r);let W=0;for(let O=w;O<F;++O)for(let ot=I;ot<R;++ot){let dt=he.get(0,ot,O);dt==o.attrs.missing_value?dt=NaN:dt=dt*f+l;let Ct=Ae.get(0,0,ot,O);Ct==c.attrs.missing_value?Ct=NaN:Ct=Ct*v+g;let Ut=Ee.get(0,0,ot,O);Ut==d.attrs.missing_value?Ut=NaN:Ut=Ut*m+p;let zt=ke.get(0,0,ot,O);zt==M.attrs.missing_value?zt=NaN:zt=zt*D+A;let Xt=ze.get(0,0,ot,O);Xt==y.attrs.missing_value?Xt=NaN:Xt=Xt*_+C;let Gt=Or.get(0,0,ot,O);Gt==b.attrs.missing_value?Gt=NaN:Gt=Gt*E+N;let fe=Mi.get(0,0,ot,O);fe==S.attrs.missing_value?fe=NaN:fe=fe*k+J;let cr=Math.sqrt(Gt*Gt+fe*fe);z[W++]=[dt,Ct,Ut,zt,Xt,Gt,fe,cr]}if(!G){const O=Ky(z,0);isNaN(O[0])||(j.id[nt]=T[0],j.lng0[nt]=T[1],j.lat0[nt]=T[2],j.lng1[nt]=T[3],j.lat1[nt]=T[4],j.lng2[nt]=T[5],j.lat2[nt]=T[6],j.lng3[nt]=T[7],j.lat3[nt]=T[8],rt[nt]=T[9],j.calanus_finmarchicus[nt]=O[0],j.diatoms[nt]=O[1],j.flagellates[nt]=O[2],j.temperature[nt]=O[3],j.salinity[nt]=O[4],j.u_east[nt]=O[5],j.v_north[nt]=O[6],j.current[nt++]=O[7])}}}}const St={data:j,time_str:new TextEncoder().encode(JSON.stringify(rt))};return ci(St,Aa(St))};var aD=Object.freeze({__proto__:null,mergeTimeArrays:eD,sinmodCoordQuery:rD,sinmodDataFiltered:nD,sinmodDataQuery:iD,sinmodTimeQuery:tD});la(aD)});export default sD();
